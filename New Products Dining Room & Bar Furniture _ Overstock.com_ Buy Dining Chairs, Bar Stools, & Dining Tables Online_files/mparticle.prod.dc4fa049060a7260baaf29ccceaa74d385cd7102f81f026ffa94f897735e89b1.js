//
//  Copyright 2019 mParticle, Inc.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.
//
//  Uses portions of code from jQuery
//  jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license

window.mParticle = window.mParticle || {};;
window.mParticle.config = window.mParticle.config || {};;
window.mParticle.config.serviceUrl = 'jssdk.mparticle.com/v2/JS/';;
window.mParticle.config.secureServiceUrl = 'jssdks.mparticle.com/v2/JS/';;
window.mParticle.config.appName = "Overstock";;
window.mParticle.config.minWebviewBridgeVersion = 1;
window.mParticle.config.workspaceToken = "37DE86A9";;
window.mParticle.config.aliasMaxWindow = 90;
window.mParticle.config.kitConfigs = window.mParticle.config.kitConfigs || [];;
window.mParticle.config.pixelConfigs = window.mParticle.config.pixelConfigs || [];;
window.mParticle.config.flags = {"eventsV3":"0","eventBatchingIntervalMillis":"5000"};
var mParticle=function(){function ir(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function ft(n,t){return t={exports:{}},n(t,t.exports),t.exports}function fr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function er(n,t){return t&&(s(t)==="object"||typeof t=="function")?t:ii(n)}function sr(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&or(n,t)}function cr(n){if(Array.isArray(n)){for(var t=0,i=new Array(n.length);t<n.length;t++)i[t]=n[t];return i}}function lr(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function ar(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function vr(n){return ei(n)||oi(n)||si()}function hi(n,t,i,r,u,f,e){try{var o=n[f](e),s=o.value}catch(h){i(h);return}o.done?t(s):Promise.resolve(s).then(r,u)}function yr(n){return function(){var t=this,i=arguments;return new Promise(function(r,u){function f(n){hi(e,r,u,f,o,"next",n)}function o(n){hi(e,r,u,f,o,"throw",n)}var e=n.apply(t,i);f(undefined)})}}function pr(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function ci(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function wr(n,t,i){return t&&ci(n.prototype,t),i&&ci(n,i),n}function li(n,t){var r=Object.keys(n),i;return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function br(n){for(var i,t=1;t<arguments.length;t++)i=arguments[t]!=null?arguments[t]:{},t%2?li(i,!0).forEach(function(t){h(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):li(i).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}function ai(n,t,i){var u,a,f,o,s;if(!n||!t||t.length<1)return null;var h=[],r=null,e=!0,c=!1,l=undefined;try{for(u=t[Symbol.iterator]();!(e=(a=u.next()).done);e=!0)f=a.value,f&&(r=f,o=tu(f),o&&h.push(o))}catch(v){c=!0;l=v}finally{try{e||u["return"]==null||u["return"]()}finally{if(c)throw l;}}return r?(s={source_request_id:i._Helpers.generateUniqueId(),mpid:n,timestamp_unixtime_ms:(new Date).getTime(),environment:r.Debug?"development":"production",events:h,mp_deviceid:r.DeviceId,sdk_version:r.SDKVersion,application_info:{application_version:r.AppVersion,application_name:r.AppName},device_info:{platform:"web",screen_width:window.screen.width,screen_height:window.screen.height},user_attributes:r.UserAttributes,user_identities:nu(r.UserIdentities),consent_state:kr(r.ConsentState),integration_attributes:r.IntegrationAttributes},r.DataPlan&&r.DataPlan.PlanId&&(s.context={data_plan:{plan_id:r.DataPlan.PlanId,plan_version:r.DataPlan.PlanVersion||undefined}}),s):null}function kr(n){if(!n)return null;return{gdpr:dr(n.getGDPRConsentState()),ccpa:gr(n.getCCPAConsentState())}}function dr(n){var i,t;if(!n)return null;i={};for(t in n)n.hasOwnProperty(t)&&(i[t]={consented:n[t].Consented,hardware_id:n[t].HardwareId,document:n[t].ConsentDocument,timestamp_unixtime_ms:n[t].Timestamp,location:n[t].Location});return i}function gr(n){if(!n)return null;var t={data_sale_opt_out:null};return n.hasOwnProperty("data_sale_opt_out")&&(t.data_sale_opt_out={consented:n.data_sale_opt_out.Consented,hardware_id:n.data_sale_opt_out.HardwareId,document:n.data_sale_opt_out.ConsentDocument,timestamp_unixtime_ms:n.data_sale_opt_out.Timestamp,location:n.data_sale_opt_out.Location}),t}function nu(t){var u,s,i;if(!t||!t.length)return null;var r={},f=!0,e=!1,o=undefined;try{for(u=t[Symbol.iterator]();!(f=(s=u.next()).done);f=!0){i=s.value;switch(i.Type){case n.IdentityType.CustomerId:r.customer_id=i.Identity;break;case n.IdentityType.Email:r.email=i.Identity;break;case n.IdentityType.Facebook:r.facebook=i.Identity;break;case n.IdentityType.FacebookCustomAudienceId:r.facebook_custom_audience_id=i.Identity;break;case n.IdentityType.Google:r.google=i.Identity;break;case n.IdentityType.Microsoft:r.microsoft=i.Identity;break;case n.IdentityType.Other:r.other=i.Identity;break;case n.IdentityType.Other2:r.other_id_2=i.Identity;break;case n.IdentityType.Other3:r.other_id_3=i.Identity;break;case n.IdentityType.Other4:r.other_id_4=i.Identity}}}catch(h){e=!0;o=h}finally{try{f||u["return"]==null||u["return"]()}finally{if(e)throw o;}}return r}function tu(t){if(!t)return null;switch(t.EventDataType){case n.MessageType.AppStateTransition:return cu(t);case n.MessageType.Commerce:return su(t);case n.MessageType.CrashReport:return hu(t);case n.MessageType.OptOut:return yu(t);case n.MessageType.PageEvent:return pu(t);case n.MessageType.PageView:return vu(t);case n.MessageType.Profile:return null;case n.MessageType.SessionEnd:return lu(t);case n.MessageType.SessionStart:return au(t);case n.MessageType.UserAttributeChange:return bu(t);case n.MessageType.UserIdentityChange:return ku(t)}return null}function iu(n){if(!n)return"unknown";switch(n){case c.AddToCart:return"add_to_cart";case c.AddToWishlist:return"add_to_wishlist";case c.Checkout:return"checkout";case c.CheckoutOption:return"checkout_option";case c.Click:return"click";case c.Purchase:return"purchase";case c.Refund:return"refund";case c.RemoveFromCart:return"remove_from_cart";case c.RemoveFromWishlist:return"remove_from_wish_list";case c.ViewDetail:return"view_detail";default:return"unknown"}}function ru(n){if(!n.ProductAction)return null;return{action:iu(n.ProductAction.ProductActionType),checkout_step:n.ProductAction.CheckoutStep,checkout_options:n.ProductAction.CheckoutOptions,transaction_id:n.ProductAction.TransactionId,affiliation:n.ProductAction.Affiliation,total_amount:n.ProductAction.TotalAmount,tax_amount:n.ProductAction.TaxAmount,shipping_amount:n.ProductAction.ShippingAmount,coupon_code:n.ProductAction.CouponCode,products:pt(n.ProductAction.ProductList)}}function pt(n){var i,o,t,s;if(!n||!n.length)return null;var u=[],r=!0,f=!1,e=undefined;try{for(i=n[Symbol.iterator]();!(r=(o=i.next()).done);r=!0)t=o.value,s={id:t.Sku,name:t.Name,brand:t.Brand,category:t.Category,variant:t.Variant,total_product_amount:t.TotalAmount,position:t.Position,price:t.Price,quantity:t.Quantity,coupon_code:t.CouponCode,custom_attributes:t.Attributes},u.push(s)}catch(h){f=!0;e=h}finally{try{r||i["return"]==null||i["return"]()}finally{if(f)throw e;}}return u}function uu(n){if(!n.PromotionAction)return null;return{action:n.PromotionAction.PromotionActionType,promotions:fu(n.PromotionAction.PromotionList)}}function fu(n){var i,o,t,s;if(!n||!n.length)return null;var u=[],r=!0,f=!1,e=undefined;try{for(i=n[Symbol.iterator]();!(r=(o=i.next()).done);r=!0)t=o.value,s={id:t.Id,name:t.Name,creative:t.Creative,position:t.Position},u.push(s)}catch(h){f=!0;e=h}finally{try{r||i["return"]==null||i["return"]()}finally{if(f)throw e;}}return u}function eu(n){var t,o,r,s;if(!n.ProductImpressions)return null;var u=[],i=!0,f=!1,e=undefined;try{for(t=n.ProductImpressions[Symbol.iterator]();!(i=(o=t.next()).done);i=!0)r=o.value,s={product_impression_list:r.ProductImpressionList,products:pt(r.ProductList)},u.push(s)}catch(h){f=!0;e=h}finally{try{i||t["return"]==null||t["return"]()}finally{if(f)throw e;}}return u}function ou(n){if(!n.ShoppingCart||!n.ShoppingCart.ProductList||!n.ShoppingCart.ProductList.length)return null;return{products:pt(n.ShoppingCart.ProductList)}}function su(n){var i=v(n),t={custom_flags:n.CustomFlags,product_action:ru(n),promotion_action:uu(n),product_impressions:eu(n),shopping_cart:ou(n),currency_code:n.CurrencyCode};return t=Object.assign(t,i),{event_type:"commerce_event",data:t}}function hu(n){var i=v(n),t={message:n.EventName};return t=Object.assign(t,i),{event_type:"crash_report",data:t}}function cu(n){var i=v(n),t={application_transition_type:"application_initialized",is_first_run:n.IsFirstRun,is_upgrade:!1};return t=Object.assign(t,i),{event_type:"application_state_transition",data:t}}function lu(n){var i=v(n),t={session_duration_ms:n.SessionLength};return t=Object.assign(t,i),{event_type:"session_end",data:t}}function au(n){var i=v(n),t={};return t=Object.assign(t,i),{event_type:"session_start",data:t}}function vu(n){var i=v(n),t={custom_flags:n.CustomFlags,screen_name:n.EventName};return t=Object.assign(t,i),{event_type:"screen_view",data:t}}function yu(n){var i=v(n),t={is_opted_out:n.OptOut};return t=Object.assign(t,i),{event_type:"opt_out",data:t}}function pu(n){var i=v(n),t={custom_event_type:wu(n.EventCategory),custom_flags:n.CustomFlags,event_name:n.EventName};return t=Object.assign(t,i),{event_type:"custom_event",data:t}}function wu(t){switch(t){case n.EventType.Other:return"other";case n.EventType.Location:return"location";case n.EventType.Navigation:return"navigation";case n.EventType.Search:return"search";case n.EventType.Social:return"social";case n.EventType.Transaction:return"transaction";case n.EventType.UserContent:return"user_content";case n.EventType.UserPreference:return"user_preference";case n.CommerceEventType.ProductAddToCart:return"add_to_cart";case n.CommerceEventType.ProductAddToWishlist:return"add_to_wishlist";case n.CommerceEventType.ProductCheckout:return"checkout";case n.CommerceEventType.ProductCheckoutOption:return"checkout_option";case n.CommerceEventType.ProductClick:return"click";case n.CommerceEventType.ProductImpression:return"impression";case n.CommerceEventType.ProductPurchase:return"purchase";case n.CommerceEventType.ProductRefund:return"refund";case n.CommerceEventType.ProductRemoveFromCart:return"remove_from_cart";case n.CommerceEventType.ProductRemoveFromWishlist:return"remove_from_wishlist";case n.CommerceEventType.ProductViewDetail:return"view_detail";case n.CommerceEventType.PromotionClick:return"promotion_click";case n.CommerceEventType.PromotionView:return"promotion_view";default:return"unknown"}}function v(n){return{timestamp_unixtime_ms:n.Timestamp,session_uuid:n.SessionId,session_start_unixtime_ms:n.SessionStartDate,custom_attributes:n.EventAttributes,location:n.Location}}function bu(n){var i=v(n),t={user_attribute_name:n.UserAttributeChanges.UserAttributeName,"new":n.UserAttributeChanges.New,old:n.UserAttributeChanges.Old,deleted:n.UserAttributeChanges.Deleted,is_new_attribute:n.UserAttributeChanges.IsNewAttribute};return t=br({},t,{},i),{event_type:"user_attribute_change",data:t}}function ku(n){var i=v(n),t={"new":{identity_type:n.UserIdentityChanges.New.IdentityType,identity:n.UserIdentityChanges.New.Identity||null,timestamp_unixtime_ms:n.Timestamp,created_this_batch:n.UserIdentityChanges.New.CreatedThisBatch},old:{identity_type:n.UserIdentityChanges.Old.IdentityType,identity:n.UserIdentityChanges.Old.Identity||null,timestamp_unixtime_ms:n.Timestamp,created_this_batch:n.UserIdentityChanges.Old.CreatedThisBatch}};return t=Object.assign(t,i),{event_type:"user_identity_change",data:t}}function nf(i){this.uploader=null;var r=this;this.queueEventForBatchUpload=function(n){if(!this.uploader){var r=i._Helpers.getFeatureFlag(t.FeatureFlags.EventBatchingIntervalMillis);this.uploader=new ct(i,r)}this.uploader.queueEvent(n)};this.shouldEnableBatching=function(){var n=parseInt(i._Helpers.getFeatureFlag(t.FeatureFlags.EventsV3),10),r;return n?(r=i._Helpers.getRampNumber(i._Store.deviceId),n>=r):!1};this.processQueuedEvents=function(){var u,n=i.Identity.getCurrentUser(),t;n&&(u=n.getMPID());i._Store.eventQueue.length&&u&&(t=i._Store.eventQueue,i._Store.eventQueue=[],this.appendUserInfoToEvents(n,t),t.forEach(function(n){r.sendEventToServer(n)}))};this.appendUserInfoToEvents=function(n,t){t.forEach(function(t){t.MPID||i._ServerModel.appendUserInfo(n,t)})};this.sendEventToServer=function(r){if(i._Store.webviewBridgeEnabled){i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.LogEvent,JSON.stringify(r));return}var u,f=i.Identity.getCurrentUser();if(f&&(u=f.getMPID()),i._Store.requireDelay=i._Helpers.isDelayedByIntegration(i._preInit.integrationDelays,i._Store.integrationDelayTimeoutStart,Date.now()),!u||i._Store.requireDelay||!i._Store.configurationLoaded){i.Logger.verbose("Event was added to eventQueue. eventQueue will be processed once a valid MPID is returned or there is no more integration imposed delay.");i._Store.eventQueue.push(r);return}this.processQueuedEvents();this.shouldEnableBatching()?this.queueEventForBatchUpload(r):this.sendSingleEventToServer(r);r&&r.EventName!==n.MessageType.AppStateTransition&&i._Forwarders.sendEventToForwarders(r)};this.sendSingleEventToServer=function(t){if(t.EventDataType!==n.MessageType.Media){var r,u=function(){r.readyState===4&&(i.Logger.verbose("Received "+r.statusText+" from server"),i._Persistence.update())};if(!t){i.Logger.error(it.ErrorMessages.EventEmpty);return}if(i.Logger.verbose(it.InformationMessages.SendHttp),r=i._Helpers.createXHR(u),r)try{r.open("post",i._Helpers.createServiceUrl(i._Store.SDKConfig.v2SecureServiceUrl,i._Store.devToken)+"/Events");r.send(JSON.stringify(i._ServerModel.convertEventToDTO(t,i._Store.isFirstRun)))}catch(f){i.Logger.error("Error sending event to mParticle servers. "+f)}}};this.sendAliasRequest=function(n,t){var r,f=function(){var n,u;if(r.readyState===4){if(i.Logger.verbose("Received "+r.statusText+" from server"),r.status!==200&&r.status!==202&&r.responseText&&(n=JSON.parse(r.responseText),n.hasOwnProperty("message"))){u=n.message;i._Helpers.invokeAliasCallback(t,r.status,u);return}i._Helpers.invokeAliasCallback(t,r.status)}};if(i.Logger.verbose(it.InformationMessages.SendAliasHttp),r=i._Helpers.createXHR(f),r)try{r.open("post",i._Helpers.createServiceUrl(i._Store.SDKConfig.aliasUrl,i._Store.devToken)+"/Alias");r.send(JSON.stringify(n))}catch(u){i._Helpers.invokeAliasCallback(t,bt.noHttpCoverage,u);i.Logger.error("Error sending alias request to mParticle servers. "+u)}};this.sendIdentityRequest=function(n,t,r,u,f,e){var o,s,c=function(){o.readyState===4&&(i.Logger.verbose("Received "+o.statusText+" from server"),f(o,s,r,u,t))};if(i.Logger.verbose(it.InformationMessages.SendIdentityBegin),!n){i.Logger.error(it.ErrorMessages.APIRequestEmpty);return}if(i.Logger.verbose(it.InformationMessages.SendIdentityHttp),o=i._Helpers.createXHR(c),o)try{i._Store.identityCallInFlight?i._Helpers.invokeCallback(r,bt.activeIdentityRequest,"There is currently an Identity request processing. Please wait for this to return before requesting again"):(s=e||null,t==="modify"?o.open("post",i._Helpers.createServiceUrl(i._Store.SDKConfig.identityUrl)+e+"/"+t):o.open("post",i._Helpers.createServiceUrl(i._Store.SDKConfig.identityUrl)+t),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("x-mp-key",i._Store.devToken),i._Store.identityCallInFlight=!0,o.send(JSON.stringify(n)))}catch(h){i._Store.identityCallInFlight=!1;i._Helpers.invokeCallback(r,bt.noHttpCoverage,h);i.Logger.error("Error sending identity request to servers with status code "+o.status+" - "+h)}};this.sendBatchForwardingStatsToServer=function(n,t){var r,u;try{r=i._Helpers.createServiceUrl(i._Store.SDKConfig.v2SecureServiceUrl,i._Store.devToken);u={uuid:i._Helpers.generateUniqueId(),data:n};t&&(t.open("post",r+"/Forwarding"),t.send(JSON.stringify(u)))}catch(f){i.Logger.error("Error sending forwarding stats to mParticle servers.")}};this.sendSingleForwardingStatsToServer=function(n){var r,u,f,t;try{f=function(){t.readyState===4&&t.status===202&&i.Logger.verbose("Successfully sent  "+t.statusText+" from server")};t=i._Helpers.createXHR(f);r=i._Helpers.createServiceUrl(i._Store.SDKConfig.v1SecureServiceUrl,i._Store.devToken);u=n;t&&(t.open("post",r+"/Forwarding"),t.send(JSON.stringify(u)))}catch(e){i.Logger.error("Error sending forwarding stats to mParticle servers.")}};this.getSDKConfiguration=function(n,t,i,r){var f,e,u;try{e=function(){u.readyState===4&&(u.status===200?(t=r._Helpers.extend({},t,JSON.parse(u.responseText)),i(n,t,r),r.Logger.verbose("Successfully received configuration from server")):(i(n,t,r),r.Logger.verbose("Issue with receiving configuration from server, received HTTP Code of "+u.status)))};u=r._Helpers.createXHR(e);f="https://"+r._Store.SDKConfig.configUrl+n+"/config?env=";f=t.isDevelopmentMode?f+"1":f+"0";u&&(u.open("get",f),u.send(null))}catch(o){i(n,t,r);r.Logger.error("Error getting forwarder configuration from mParticle servers.")}};this.prepareForwardingStats=function(n,u){var f,e=i._Forwarders.getForwarderStatsQueue();n&&n.isVisible&&(f={mid:n.id,esid:n.eventSubscriptionId,n:u.EventName,attrs:u.EventAttributes,sdk:u.SDKVersion,dt:u.EventDataType,et:u.EventCategory,dbg:u.Debug,ct:u.Timestamp,eec:u.ExpandedEventCount,dp:u.DataPlan},i._Helpers.getFeatureFlag(t.FeatureFlags.ReportBatching)?(e.push(f),i._Forwarders.setForwarderStatsQueue(e)):r.sendSingleForwardingStatsToServer(f))}}function uf(i){function u(n){var t;return(window.crypto&&window.crypto.getRandomValues&&(t=window.crypto.getRandomValues(new Uint8Array(1))),t)?(n^t[0]%16>>n/4).toString(16):(n^Math.random()*16>>n/4).toString(16)}var r=this;this.canLog=function(){return i._Store.isEnabled&&(i._Store.devToken||i._Store.webviewBridgeEnabled)?!0:!1};this.returnConvertedBoolean=function(n){return n==="false"||n==="0"?!1:Boolean(n)};this.getFeatureFlag=function(n){return i._Store.SDKConfig.flags.hasOwnProperty(n)?i._Store.SDKConfig.flags[n]:null};this.getRampNumber=function(n){if(!n)return 100;var t=r.generateHash(n);return Math.abs(t%100)+1};this.invokeCallback=function(n,t,u,f,e){n||i.Logger.warning("There is no callback provided");try{r.Validators.isFunction(n)&&n({httpCode:t,body:u,getUser:function(){return f?f:i.Identity.getCurrentUser()},getPreviousUser:function(){if(e)return i.Identity.getUser(e);var t=i.Identity.getUsers(),n=t.shift(),r=f||i.Identity.getCurrentUser();return n&&r&&n.getMPID()===r.getMPID()&&(n=t.shift()),n||null}})}catch(o){i.Logger.error("There was an error with your callback: "+o)}};this.invokeAliasCallback=function(n,t,u){n||i.Logger.warning("There is no callback provided");try{if(r.Validators.isFunction(n)){var f={httpCode:t};u&&(f.message=u);n(f)}}catch(e){i.Logger.error("There was an error with your callback: "+e)}};this.extend=function(){var o,e,u,i,h,c,t=arguments[0]||{},f=1,a=arguments.length,l=!1,n={hasOwn:Object.prototype.hasOwnProperty,class2type:{},type:function(t){return t==null?String(t):n.class2type[Object.prototype.toString.call(t)]||"object"},isPlainObject:function(t){if(!t||n.type(t)!=="object"||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!n.hasOwn.call(t,"constructor")&&!n.hasOwn.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}for(var i in t);return i===undefined||n.hasOwn.call(t,i)},isArray:Array.isArray||function(t){return n.type(t)==="array"},isFunction:function(t){return n.type(t)==="function"},isWindow:function(n){return n!=null&&n==n.window}};for(typeof t=="boolean"&&(l=t,t=arguments[1]||{},f=2),s(t)==="object"||n.isFunction(t)||(t={}),a===f&&(t=this,--f);f<a;f++)if((o=arguments[f])!=null)for(e in o)(u=t[e],i=o[e],t!==i)&&(l&&i&&(n.isPlainObject(i)||(h=n.isArray(i)))?(h?(h=!1,c=u&&n.isArray(u)?u:[]):c=u&&n.isPlainObject(u)?u:{},t[e]=r.extend(l,c,i)):i!==undefined&&(t[e]=i));return t};this.isObject=function(n){var t=Object.prototype.toString.call(n);return t==="[object Object]"||t==="[object Error]"};this.inArray=function(n,t){var i=0,r;if(Array.prototype.indexOf)return n.indexOf(t,0)>=0;for(r=n.length;i<r;i++)if(i in n&&n[i]===t)return!0};this.createServiceUrl=function(n,t){var u=window.mParticle&&i._Store.SDKConfig.forceHttps?"https://":window.location.protocol+"//",r;return r=i._Store.SDKConfig.forceHttps?"https://"+n:u+n,t&&(r=r+t),r};this.createXHR=function(n){var t;try{t=new window.XMLHttpRequest}catch(r){i.Logger.error("Error creating XMLHttpRequest object.")}if(t&&n&&"withCredentials"in t)t.onreadystatechange=n;else if(typeof XDomainRequest!="undefined"){i.Logger.verbose("Creating XDomainRequest object");try{t=new window.XDomainRequest;t.onload=n}catch(r){i.Logger.error("Error creating XDomainRequest object")}}return t};this.generateUniqueId=function(n){return n?u(n):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,r.generateUniqueId)};this.filterUserIdentities=function(t,i){var e=[],u,f,o;if(t&&Object.keys(t).length)for(u in t)t.hasOwnProperty(u)&&(f=n.IdentityType.getIdentityType(u),r.inArray(i,f)||(o={Type:f,Identity:t[u]},f===n.IdentityType.CustomerId?e.unshift(o):e.push(o)));return e};this.filterUserIdentitiesForForwarders=function(t,i){var f={},u,e;if(t&&Object.keys(t).length)for(u in t)t.hasOwnProperty(u)&&(e=n.IdentityType.getIdentityType(u),r.inArray(i,e)||(f[u]=t[u]));return f};this.filterUserAttributes=function(n,t){var u={},i,f;if(n&&Object.keys(n).length)for(i in n)n.hasOwnProperty(i)&&(f=r.generateHash(i),r.inArray(t,f)||(u[i]=n[i]));return u};this.findKeyInObject=function(n,t){if(t&&n)for(var i in n)if(n.hasOwnProperty(i)&&i.toLowerCase()===t.toLowerCase())return i;return null};this.decoded=function(n){return decodeURIComponent(n.replace(rf," "))};this.converted=function(n){return n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),n};this.isEventType=function(t){for(var i in n.EventType)if(n.EventType.hasOwnProperty(i)&&n.EventType[i]===t)return!0;return!1};this.parseNumber=function(n){if(isNaN(n)||!isFinite(n))return 0;var t=parseFloat(n);return isNaN(t)?0:t};this.parseStringOrNumber=function(n){return r.Validators.isStringOrNumber(n)?n:null};this.generateHash=function(n){var t=0,i=0,r;if(n===undefined||n===null)return 0;if(n=n.toString().toLowerCase(),Array.prototype.reduce)return n.split("").reduce(function(n,t){return n=(n<<5)-n+t.charCodeAt(0),n&n},0);if(n.length===0)return t;for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r,t=t&t;return t};this.sanitizeAttributes=function(n){var u,t;if(!n||!r.isObject(n))return null;u={};for(t in n)n.hasOwnProperty(t)&&r.Validators.isValidAttributeValue(n[t])?u[t]=n[t]:i.Logger.warning("The corresponding attribute value of "+t+" must be a string, number, boolean, or null.");return u};this.Validators={isValidAttributeValue:function(n){return n!==undefined&&!r.isObject(n)&&!Array.isArray(n)},isValidKeyValue:function(n){return Boolean(n&&!r.isObject(n)&&!Array.isArray(n))},isStringOrNumber:function(n){return typeof n=="string"||typeof n=="number"},isNumber:function(n){return typeof n=="number"},isFunction:function(n){return typeof n=="function"},validateIdentities:function(u,f){var h={userIdentities:1,onUserAlias:1,copyUserAttributes:1},e,o;if(u){if(f==="modify"&&(r.isObject(u.userIdentities)&&!Object.keys(u.userIdentities).length||!r.isObject(u.userIdentities)))return{valid:!1,error:t.Messages.ValidationMessages.ModifyIdentityRequestUserIdentitiesPresent};for(e in u)if(u.hasOwnProperty(e)){if(!h[e])return{valid:!1,error:t.Messages.ValidationMessages.IdentityRequesetInvalidKey};if(e==="onUserAlias"&&!i._Helpers.Validators.isFunction(u[e]))return{valid:!1,error:t.Messages.ValidationMessages.OnUserAliasType+s(u[e])}}if(Object.keys(u).length===0)return{valid:!0};if(u.userIdentities===undefined)return{valid:!1,error:t.Messages.ValidationMessages.UserIdentities};if(u.userIdentities!==null&&!r.isObject(u.userIdentities))return{valid:!1,error:t.Messages.ValidationMessages.UserIdentities};if(r.isObject(u.userIdentities)&&Object.keys(u.userIdentities).length)for(o in u.userIdentities)if(u.userIdentities.hasOwnProperty(o)){if(n.IdentityType.getIdentityType(o)===!1)return{valid:!1,error:t.Messages.ValidationMessages.UserIdentitiesInvalidKey};if(!(typeof u.userIdentities[o]=="string"||u.userIdentities[o]===null))return{valid:!1,error:t.Messages.ValidationMessages.UserIdentitiesInvalidValues}}}return{valid:!0}}};this.isDelayedByIntegration=function(n,t,r){if(r-t>i._Store.SDKConfig.integrationDelayTimeout)return!1;for(var u in n){if(n[u]===!0)return!0;continue}return!1};this.createMainStorageName=function(n){return n?lt.currentStorageName+"_"+n:lt.currentStorageName};this.createProductStorageName=function(n){return n?lt.currentStorageProductsName+"_"+n:lt.currentStorageProductsName};this.isSlug=function(n){return n===tf(n)}}function ff(n){var t=this;this.isBridgeV2Available=function(n){if(!n)return!1;var i=vi+"_"+n+"_v2",t=kt+"_"+n+"_v2";return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.hasOwnProperty(t)?!0:window.mParticle&&window.mParticle.uiwebviewBridgeName&&window.mParticle.uiwebviewBridgeName===t?!0:window.hasOwnProperty(i)?!0:!1};this.isWebviewEnabled=function(i,r){return(n._Store.bridgeV2Available=t.isBridgeV2Available(i),n._Store.bridgeV1Available=t.isBridgeV1Available(),r===2)?n._Store.bridgeV2Available:window.mParticle&&window.mParticle.uiwebviewBridgeName&&window.mParticle.uiwebviewBridgeName!==kt+"_"+i+"_v2"?!1:r<2?n._Store.bridgeV2Available||n._Store.bridgeV1Available:!1};this.isBridgeV1Available=function(){return n._Store.SDKConfig.useNativeSdk||window.mParticleAndroid||n._Store.SDKConfig.isIOS?!0:!1};this.sendToNative=function(i,r){if(n._Store.bridgeV2Available&&n._Store.SDKConfig.minWebviewBridgeVersion===2){t.sendViaBridgeV2(i,r,n._Store.SDKConfig.requiredWebviewBridgeName);return}if(n._Store.bridgeV2Available&&n._Store.SDKConfig.minWebviewBridgeVersion<2){t.sendViaBridgeV2(i,r,n._Store.SDKConfig.requiredWebviewBridgeName);return}if(n._Store.bridgeV1Available&&n._Store.SDKConfig.minWebviewBridgeVersion<2){t.sendViaBridgeV1(i,r);return}};this.sendViaBridgeV1=function(i,r){window.mParticleAndroid&&window.mParticleAndroid.hasOwnProperty(i)?(n.Logger.verbose(ot.InformationMessages.SendAndroid+i),window.mParticleAndroid[i](r)):n._Store.SDKConfig.isIOS&&(n.Logger.verbose(ot.InformationMessages.SendIOS+i),t.sendViaIframeToIOS(i,r))};this.sendViaIframeToIOS=function(n,t){var i=document.createElement("IFRAME");i.setAttribute("src","mp-sdk://"+n+"/"+encodeURIComponent(t));document.documentElement.appendChild(i);i.parentNode.removeChild(i)};this.sendViaBridgeV2=function(i,r,u){if(u){var h=vi+"_"+u+"_v2",e=window[h],f=kt+"_"+u+"_v2",o,s;if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers[f]&&(o=window.webkit.messageHandlers[f]),n.uiwebviewBridgeName===f&&(s=n[f]),e&&e.hasOwnProperty(i)){n.Logger.verbose(ot.InformationMessages.SendAndroid+i);e[i](r);return}o?(n.Logger.verbose(ot.InformationMessages.SendIOS+i),o.postMessage(JSON.stringify({path:i,value:r?JSON.parse(r):null}))):s&&(n.Logger.verbose(ot.InformationMessages.SendIOS+i),t.sendViaIframeToIOS(i,r))}}}function ef(n){var t=this;this.attemptCookieSync=function(i,r){var u,e,o,s,f;r&&!n._Store.webviewBridgeEnabled&&n._Store.pixelConfigurations.forEach(function(h){u={moduleId:h.moduleId,frequencyCap:h.frequencyCap,pixelUrl:t.replaceAmp(h.pixelUrl),redirectUrl:h.redirectUrl?t.replaceAmp(h.redirectUrl):null};o=t.replaceMPID(u.pixelUrl,r);s=u.redirectUrl?t.replaceMPID(u.redirectUrl,r):"";f=o+encodeURIComponent(s);var c=n._Persistence.getPersistence();if(i&&i!==r){c&&c[r]&&(c[r].csd||(c[r].csd={}),t.performCookieSync(f,u.moduleId,r,c[r].csd));return}c[r]&&(c[r].csd||(c[r].csd={}),e=c[r].csd[u.moduleId.toString()]?c[r].csd[u.moduleId.toString()]:null,e?(new Date).getTime()>new Date(e).getTime()+u.frequencyCap*864e5&&t.performCookieSync(f,u.moduleId,r,c[r].csd):t.performCookieSync(f,u.moduleId,r,c[r].csd))})};this.replaceMPID=function(n,t){return n.replace("%%mpid%%",t)};this.replaceAmp=function(n){return n.replace(/&amp;/g,"&")};this.performCookieSync=function(t,i,r,u){var f=document.createElement("img");n.Logger.verbose(yi.InformationMessages.CookieSync);f.src=t;u[i.toString()]=(new Date).getTime();n._Persistence.saveUserCookieSyncDatesToPersistence(r,u)}}function of(t){var i=this;this.initialize=function(){var r,n;t._Store.sessionId?(r=t._Store.SDKConfig.sessionTimeout*6e4,new Date>new Date(t._Store.dateLastEventSent.getTime()+r)?(i.endSession(),i.startNewSession()):(n=t._Persistence.getPersistence(),n&&!n.cu&&(t.Identity.identify(t._Store.SDKConfig.identifyRequest,t._Store.SDKConfig.identityCallback),t._Store.identifyCalled=!0,t._Store.SDKConfig.identityCallback=null))):i.startNewSession()};this.getSession=function(){return t._Store.sessionId};this.startNewSession=function(){var r,u,f;t.Logger.verbose(rt.InformationMessages.StartingNewSession);t._Helpers.canLog()?(t._Store.sessionId=t._Helpers.generateUniqueId().toUpperCase(),r=t.Identity.getCurrentUser(),u=r?r.getMPID():null,u&&(t._Store.currentSessionMPIDs=[u]),t._Store.sessionStartDate||(f=new Date,t._Store.sessionStartDate=f,t._Store.dateLastEventSent=f),i.setSessionTimer(),t._Store.identifyCalled||(t.Identity.identify(t._Store.SDKConfig.identifyRequest,t._Store.SDKConfig.identityCallback),t._Store.identifyCalled=!0,t._Store.SDKConfig.identityCallback=null),t._Events.logEvent({messageType:n.MessageType.SessionStart})):t.Logger.verbose(rt.InformationMessages.AbandonStartSession)};this.endSession=function(r){var f,u,e,o;if(t.Logger.verbose(rt.InformationMessages.StartingEndSession),r)t._Events.logEvent({messageType:n.MessageType.SessionEnd}),t._Store.sessionId=null,t._Store.dateLastEventSent=null,t._Store.sessionAttributes={},t._Persistence.update();else if(t._Helpers.canLog()){if(u=t._Persistence.getPersistence(),!u)return;if(u.gs&&!u.gs.sid){t.Logger.verbose(rt.InformationMessages.NoSessionToEnd);return}u.gs.sid&&t._Store.sessionId!==u.gs.sid&&(t._Store.sessionId=u.gs.sid);u.gs&&u.gs.les&&(f=t._Store.SDKConfig.sessionTimeout*6e4,o=(new Date).getTime(),e=o-u.gs.les,e<f?i.setSessionTimer():(t._Events.logEvent({messageType:n.MessageType.SessionEnd}),t._Store.sessionId=null,t._Store.dateLastEventSent=null,t._Store.sessionStartDate=null,t._Store.sessionAttributes={},t._Persistence.update()))}else t.Logger.verbose(rt.InformationMessages.AbandonEndSession)};this.setSessionTimer=function(){var n=t._Store.SDKConfig.sessionTimeout*6e4;t._Store.globalTimer=window.setTimeout(function(){i.endSession()},n)};this.resetSessionTimer=function(){t._Store.webviewBridgeEnabled||(t._Store.sessionId||i.startNewSession(),i.clearSessionTimeout(),i.setSessionTimer());i.startNewSessionIfNeeded()};this.clearSessionTimeout=function(){clearTimeout(t._Store.globalTimer)};this.startNewSessionIfNeeded=function(){if(!t._Store.webviewBridgeEnabled){var n=t._Persistence.getPersistence();!t._Store.sessionId&&n&&(n.sid?t._Store.sessionId=n.sid:i.startNewSession())}}}function sf(t){var i=this;this.convertTransactionAttributesToProductAction=function(n,t){t.TransactionId=n.Id;t.Affiliation=n.Affiliation;t.CouponCode=n.CouponCode;t.TotalAmount=n.Revenue;t.ShippingAmount=n.Shipping;t.TaxAmount=n.Tax};this.getProductActionEventName=function(t){switch(t){case n.ProductActionType.AddToCart:return"AddToCart";case n.ProductActionType.AddToWishlist:return"AddToWishlist";case n.ProductActionType.Checkout:return"Checkout";case n.ProductActionType.CheckoutOption:return"CheckoutOption";case n.ProductActionType.Click:return"Click";case n.ProductActionType.Purchase:return"Purchase";case n.ProductActionType.Refund:return"Refund";case n.ProductActionType.RemoveFromCart:return"RemoveFromCart";case n.ProductActionType.RemoveFromWishlist:return"RemoveFromWishlist";case n.ProductActionType.ViewDetail:return"ViewDetail";case n.ProductActionType.Unknown:default:return"Unknown"}};this.getPromotionActionEventName=function(t){switch(t){case n.PromotionActionType.PromotionClick:return"PromotionClick";case n.PromotionActionType.PromotionView:return"PromotionView";default:return"Unknown"}};this.convertProductActionToEventType=function(i){switch(i){case n.ProductActionType.AddToCart:return n.CommerceEventType.ProductAddToCart;case n.ProductActionType.AddToWishlist:return n.CommerceEventType.ProductAddToWishlist;case n.ProductActionType.Checkout:return n.CommerceEventType.ProductCheckout;case n.ProductActionType.CheckoutOption:return n.CommerceEventType.ProductCheckoutOption;case n.ProductActionType.Click:return n.CommerceEventType.ProductClick;case n.ProductActionType.Purchase:return n.CommerceEventType.ProductPurchase;case n.ProductActionType.Refund:return n.CommerceEventType.ProductRefund;case n.ProductActionType.RemoveFromCart:return n.CommerceEventType.ProductRemoveFromCart;case n.ProductActionType.RemoveFromWishlist:return n.CommerceEventType.ProductRemoveFromWishlist;case n.ProductActionType.Unknown:return n.EventType.Unknown;case n.ProductActionType.ViewDetail:return n.CommerceEventType.ProductViewDetail;default:return t.Logger.error("Could not convert product action type "+i+" to event type"),null}};this.convertPromotionActionToEventType=function(i){switch(i){case n.PromotionActionType.PromotionClick:return n.CommerceEventType.PromotionClick;case n.PromotionActionType.PromotionView:return n.CommerceEventType.PromotionView;default:return t.Logger.error("Could not convert promotion action type "+i+" to event type"),null}};this.generateExpandedEcommerceName=function(n,t){return"eCommerce - "+n+" - "+(t?"Total":"Item")};this.extractProductAttributes=function(n,t){t.CouponCode&&(n["Coupon Code"]=t.CouponCode);t.Brand&&(n.Brand=t.Brand);t.Category&&(n.Category=t.Category);t.Name&&(n.Name=t.Name);t.Sku&&(n.Id=t.Sku);t.Price&&(n["Item Price"]=t.Price);t.Quantity&&(n.Quantity=t.Quantity);t.Position&&(n.Position=t.Position);t.Variant&&(n.Variant=t.Variant);n["Total Product Amount"]=t.TotalAmount||0};this.extractTransactionId=function(n,t){t.TransactionId&&(n["Transaction Id"]=t.TransactionId)};this.extractActionAttributes=function(n,t){i.extractTransactionId(n,t);t.Affiliation&&(n.Affiliation=t.Affiliation);t.CouponCode&&(n["Coupon Code"]=t.CouponCode);t.TotalAmount&&(n["Total Amount"]=t.TotalAmount);t.ShippingAmount&&(n["Shipping Amount"]=t.ShippingAmount);t.TaxAmount&&(n["Tax Amount"]=t.TaxAmount);t.CheckoutOptions&&(n["Checkout Options"]=t.CheckoutOptions);t.CheckoutStep&&(n["Checkout Step"]=t.CheckoutStep)};this.extractPromotionAttributes=function(n,t){t.Id&&(n.Id=t.Id);t.Creative&&(n.Creative=t.Creative);t.Name&&(n.Name=t.Name);t.Position&&(n.Position=t.Position)};this.buildProductList=function(n,t){return t?Array.isArray(t)?t:[t]:n.ShoppingCart.ProductList};this.createProduct=function(n,i,r,u,f,e,o,s,h,c){return(c=t._Helpers.sanitizeAttributes(c),typeof n!="string")?(t.Logger.error("Name is required when creating a product"),null):t._Helpers.Validators.isStringOrNumber(i)?t._Helpers.Validators.isStringOrNumber(r)?(s&&!t._Helpers.Validators.isNumber(s)&&(t.Logger.error("Position must be a number, it will be set to null."),s=null),u||(u=1),{Name:n,Sku:i,Price:r,Quantity:u,Brand:o,Variant:f,Category:e,Position:s,CouponCode:h,TotalAmount:u*r,Attributes:c}):(t.Logger.error("Price is required when creating a product, and must be a string or a number"),null):(t.Logger.error("SKU is required when creating a product, and must be a string or a number"),null)};this.createPromotion=function(n,i,r,u){return t._Helpers.Validators.isStringOrNumber(n)?{Id:n,Creative:i,Name:r,Position:u}:(t.Logger.error(st.ErrorMessages.PromotionIdRequired),null)};this.createImpression=function(n,i){return typeof n!="string"?(t.Logger.error("Name is required when creating an impression."),null):i?{Name:n,Product:i}:(t.Logger.error("Product is required when creating an impression."),null)};this.createTransactionAttributes=function(n,i,r,u,f,e){return t._Helpers.Validators.isStringOrNumber(n)?{Id:n,Affiliation:i,CouponCode:r,Revenue:u,Shipping:f,Tax:e}:(t.Logger.error(st.ErrorMessages.TransactionIdRequired),null)};this.expandProductImpression=function(r){var u=[];return r.ProductImpressions?(r.ProductImpressions.forEach(function(f){f.ProductList&&f.ProductList.forEach(function(e){var o=t._Helpers.extend(!1,{},r.EventAttributes),s,h;if(e.Attributes)for(s in e.Attributes)o[s]=e.Attributes[s];i.extractProductAttributes(o,e);f.ProductImpressionList&&(o["Product Impression List"]=f.ProductImpressionList);h=t._ServerModel.createEventObject({messageType:n.MessageType.PageEvent,name:i.generateExpandedEcommerceName("Impression"),data:o,eventType:n.EventType.Transaction});u.push(h)})}),u):u};this.expandCommerceEvent=function(n){return n?i.expandProductAction(n).concat(i.expandPromotionAction(n)).concat(i.expandProductImpression(n)):null};this.expandPromotionAction=function(r){var u=[],f;return r.PromotionAction?(f=r.PromotionAction.PromotionList,f.forEach(function(f){var e=t._Helpers.extend(!1,{},r.EventAttributes),o;i.extractPromotionAttributes(e,f);o=t._ServerModel.createEventObject({messageType:n.MessageType.PageEvent,name:i.generateExpandedEcommerceName(n.PromotionActionType.getExpansionName(r.PromotionAction.PromotionActionType)),data:e,eventType:n.EventType.Transaction});u.push(o)}),u):u};this.expandProductAction=function(r){var u=[],e,f,s,o;return r.ProductAction?(e=!1,r.ProductAction.ProductActionType===n.ProductActionType.Purchase||r.ProductAction.ProductActionType===n.ProductActionType.Refund?(f=t._Helpers.extend(!1,{},r.EventAttributes),f["Product Count"]=r.ProductAction.ProductList?r.ProductAction.ProductList.length:0,i.extractActionAttributes(f,r.ProductAction),r.CurrencyCode&&(f["Currency Code"]=r.CurrencyCode),s=t._ServerModel.createEventObject({messageType:n.MessageType.PageEvent,name:i.generateExpandedEcommerceName(n.ProductActionType.getExpansionName(r.ProductAction.ProductActionType),!0),data:f,eventType:n.EventType.Transaction}),u.push(s)):e=!0,o=r.ProductAction.ProductList,!o)?u:(o.forEach(function(f){var o=t._Helpers.extend(!1,r.EventAttributes,f.Attributes),s;e?i.extractActionAttributes(o,r.ProductAction):i.extractTransactionId(o,r.ProductAction);i.extractProductAttributes(o,f);s=t._ServerModel.createEventObject({messageType:n.MessageType.PageEvent,name:i.generateExpandedEcommerceName(n.ProductActionType.getExpansionName(r.ProductAction.ProductActionType)),data:o,eventType:n.EventType.Transaction});u.push(s)}),u):u};this.createCommerceEventObject=function(i){var r;return(t.Logger.verbose(st.InformationMessages.StartingLogCommerceEvent),t._Helpers.canLog())?(r=t._ServerModel.createEventObject({messageType:n.MessageType.Commerce}),r.EventName="eCommerce - ",r.CurrencyCode=t._Store.currencyCode,r.ShoppingCart=[],r.CustomFlags=i,r):(t.Logger.verbose(st.InformationMessages.AbandonLogEvent),null)}}function hf(n){var r={};for(var i in t.DefaultConfig)t.DefaultConfig.hasOwnProperty(i)&&(r[i]=t.DefaultConfig[i]);if(n)for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);for(i in t.DefaultUrls)r[i]=t.DefaultUrls[i];return r}function pi(n,i){var f={isEnabled:!0,sessionAttributes:{},currentSessionMPIDs:[],consentState:null,sessionId:null,isFirstRun:null,clientId:null,deviceId:null,devToken:null,migrationData:{},serverSettings:{},dateLastEventSent:null,sessionStartDate:null,currentPosition:null,isTracking:!1,watchPositionId:null,cartProducts:[],eventQueue:[],currencyCode:null,globalTimer:null,context:"",configurationLoaded:!1,identityCallInFlight:!1,SDKConfig:{},migratingToIDSyncCookies:!1,nonCurrentUserMPIDs:{},identifyCalled:!1,isLoggedIn:!1,cookieSyncDates:{},integrationAttributes:{},requireDelay:!0,isLocalStorageAvailable:null,storageName:null,prodStorageName:null,activeForwarders:[],kits:{},configuredForwarders:[],pixelConfigurations:[]},r,u;for(r in f)this[r]=f[r];this.integrationDelayTimeoutStart=Date.now();this.SDKConfig=hf(n);n&&(this.SDKConfig.isDevelopmentMode=n.hasOwnProperty("isDevelopmentMode")?i._Helpers.returnConvertedBoolean(n.isDevelopmentMode):!1,n.hasOwnProperty("v1SecureServiceUrl")&&(this.SDKConfig.v1SecureServiceUrl=n.v1SecureServiceUrl),n.hasOwnProperty("v2SecureServiceUrl")&&(this.SDKConfig.v2SecureServiceUrl=n.v2SecureServiceUrl),n.hasOwnProperty("v3SecureServiceUrl")&&(this.SDKConfig.v3SecureServiceUrl=n.v3SecureServiceUrl),n.hasOwnProperty("identityUrl")&&(this.SDKConfig.identityUrl=n.identityUrl),n.hasOwnProperty("aliasUrl")&&(this.SDKConfig.aliasUrl=n.aliasUrl),n.hasOwnProperty("configUrl")&&(this.SDKConfig.configUrl=n.configUrl),n.hasOwnProperty("logLevel")&&(this.SDKConfig.logLevel=n.logLevel),this.SDKConfig.useNativeSdk=n.hasOwnProperty("useNativeSdk")?n.useNativeSdk:!1,n.hasOwnProperty("kits")&&(this.SDKConfig.kits=n.kits),this.SDKConfig.isIOS=n.hasOwnProperty("isIOS")?n.isIOS:window.mParticle&&window.mParticle.isIOS?window.mParticle.isIOS:!1,this.SDKConfig.useCookieStorage=n.hasOwnProperty("useCookieStorage")?n.useCookieStorage:!1,this.SDKConfig.maxProducts=n.hasOwnProperty("maxProducts")?n.maxProducts:t.DefaultConfig.maxProducts,this.SDKConfig.maxCookieSize=n.hasOwnProperty("maxCookieSize")?n.maxCookieSize:t.DefaultConfig.maxCookieSize,n.hasOwnProperty("appName")&&(this.SDKConfig.appName=n.appName),this.SDKConfig.integrationDelayTimeout=n.hasOwnProperty("integrationDelayTimeout")?n.integrationDelayTimeout:t.DefaultConfig.integrationDelayTimeout,n.hasOwnProperty("identifyRequest")&&(this.SDKConfig.identifyRequest=n.identifyRequest),n.hasOwnProperty("identityCallback")&&(u=n.identityCallback,i._Helpers.Validators.isFunction(u)?this.SDKConfig.identityCallback=n.identityCallback:i.Logger.warning("The optional callback must be a function. You tried entering a(n) "+s(u)," . Callback not set. Please set your callback again.")),n.hasOwnProperty("appVersion")&&(this.SDKConfig.appVersion=n.appVersion),n.hasOwnProperty("appName")&&(this.SDKConfig.appName=n.appName),n.hasOwnProperty("sessionTimeout")&&(this.SDKConfig.sessionTimeout=n.sessionTimeout),n.hasOwnProperty("dataPlan")&&(this.SDKConfig.dataPlan={PlanVersion:null,PlanId:null},n.dataPlan.hasOwnProperty("planId")&&(typeof n.dataPlan.planId=="string"?i._Helpers.isSlug(n.dataPlan.planId)?this.SDKConfig.dataPlan.PlanId=n.dataPlan.planId:i.Logger.error("Your data plan id must be in a slug format"):i.Logger.error("Your data plan id must be a string")),n.dataPlan.hasOwnProperty("planVersion")&&(typeof n.dataPlan.planVersion=="number"?this.SDKConfig.dataPlan.PlanVersion=n.dataPlan.planVersion:i.Logger.error("Your data plan version must be a number"))),this.SDKConfig.forceHttps=n.hasOwnProperty("forceHttps")?n.forceHttps:!0,n.hasOwnProperty("customFlags")&&(this.SDKConfig.customFlags=n.customFlags),this.SDKConfig.minWebviewBridgeVersion=n.hasOwnProperty("minWebviewBridgeVersion")?n.minWebviewBridgeVersion:1,this.SDKConfig.aliasMaxWindow=n.hasOwnProperty("aliasMaxWindow")?n.aliasMaxWindow:t.DefaultConfig.aliasMaxWindow,n.hasOwnProperty("flags")||(this.SDKConfig.flags={}),this.SDKConfig.flags.hasOwnProperty(t.FeatureFlags.EventsV3)||(this.SDKConfig.flags[t.FeatureFlags.EventsV3]=0),this.SDKConfig.flags.hasOwnProperty(t.FeatureFlags.EventBatchingIntervalMillis)||(this.SDKConfig.flags[t.FeatureFlags.EventBatchingIntervalMillis]=t.DefaultConfig.uploadInterval),this.SDKConfig.flags.hasOwnProperty(t.FeatureFlags.ReportBatching)||(this.SDKConfig.flags[t.FeatureFlags.ReportBatching]=!1))}function cf(n){var i=this,t=n.logLevel||"warning";this.logger=n.hasOwnProperty("logger")?n.logger:new lf;this.verbose=function(n){t!=="none"&&i.logger.verbose&&t==="verbose"&&i.logger.verbose(n)};this.warning=function(n){t!=="none"&&i.logger.warning&&(t==="verbose"||t==="warning")&&i.logger.warning(n)};this.error=function(n){t!=="none"&&i.logger.error&&i.logger.error(n)};this.setLogLevel=function(n){t=n}}function lf(){this.verbose=function(n){window.console&&window.console.info&&window.console.info(n)};this.error=function(n){window.console&&window.console.error&&window.console.error(n)};this.warning=function(n){window.console&&window.console.warn&&window.console.warn(n)}}function af(n){function u(t){var i=n._Store;return t.gs.sid=i.sessionId,t.gs.ie=i.isEnabled,t.gs.sa=i.sessionAttributes,t.gs.ss=i.serverSettings,t.gs.dt=i.devToken,t.gs.les=i.dateLastEventSent?i.dateLastEventSent.getTime():null,t.gs.av=i.SDKConfig.appVersion,t.gs.cgid=i.clientId,t.gs.das=i.deviceId,t.gs.c=i.context,t.gs.ssd=i.sessionStartDate?i.sessionStartDate.getTime():null,t.gs.ia=i.integrationAttributes,t}function i(n){localStorage.removeItem(n)}function r(n,i,r){return t.encodePersistence(JSON.stringify(n))+";expires="+i+";path=/"+r}var t=this;this.useLocalStorage=function(){return!n._Store.SDKConfig.useCookieStorage&&n._Store.isLocalStorageAvailable};this.initializeStorage=function(){var o,r,i,u,e,s,f;try{r=t.getLocalStorage();i=t.getCookie();r||i?n._Store.isFirstRun=!1:(n._Store.isFirstRun=!0,n._Store.mpid=0);n._Store.isLocalStorageAvailable||(n._Store.SDKConfig.useCookieStorage=!0);n._Store.isLocalStorageAvailable?(o=window.localStorage,n._Store.SDKConfig.useCookieStorage?(r?(u=i?n._Helpers.extend(!1,r,i):r,o.removeItem(n._Store.storageName)):i&&(u=i),t.storeDataInMemory(u)):i?(u=r?n._Helpers.extend(!1,r,i):i,t.storeDataInMemory(u),t.expireCookies(n._Store.storageName)):t.storeDataInMemory(r)):t.storeDataInMemory(i);try{n._Store.isLocalStorageAvailable&&(e=localStorage.getItem(n._Store.prodStorageName),e&&(s=JSON.parse(y.decode(e))),n._Store.mpid&&t.storeProductsInMemory(s,n._Store.mpid))}catch(h){n._Store.isLocalStorageAvailable&&localStorage.removeItem(n._Store.prodStorageName);n._Store.cartProducts=[];n.Logger.error("Error loading products in initialization: "+h)}for(f in u)u.hasOwnProperty(f)&&(ht[f]||(n._Store.nonCurrentUserMPIDs[f]=u[f]));t.update()}catch(h){t.useLocalStorage()&&n._Store.isLocalStorageAvailable?localStorage.removeItem(n._Store.storageName):t.expireCookies(n._Store.storageName);n.Logger.error("Error initializing storage: "+h)}};this.update=function(){n._Store.webviewBridgeEnabled||(n._Store.SDKConfig.useCookieStorage&&t.setCookie(),t.setLocalStorage())};this.storeProductsInMemory=function(t,i){if(t)try{n._Store.cartProducts=t[i]&&t[i].cp?t[i].cp:[]}catch(r){n.Logger.error(ut.ErrorMessages.CookieParseError)}};this.storeDataInMemory=function(t,i){try{t?(n._Store.mpid=i?i:t.cu||0,t.gs=t.gs||{},n._Store.sessionId=t.gs.sid||n._Store.sessionId,n._Store.isEnabled=typeof t.gs.ie!="undefined"?t.gs.ie:n._Store.isEnabled,n._Store.sessionAttributes=t.gs.sa||n._Store.sessionAttributes,n._Store.serverSettings=t.gs.ss||n._Store.serverSettings,n._Store.devToken=n._Store.devToken||t.gs.dt,n._Store.SDKConfig.appVersion=n._Store.SDKConfig.appVersion||t.gs.av,n._Store.clientId=t.gs.cgid||n._Store.clientId||n._Helpers.generateUniqueId(),n._Store.deviceId=t.gs.das||n._Store.deviceId||n._Helpers.generateUniqueId(),n._Store.integrationAttributes=t.gs.ia||{},n._Store.context=t.gs.c||n._Store.context,n._Store.currentSessionMPIDs=t.gs.csm||n._Store.currentSessionMPIDs,n._Store.isLoggedIn=t.l===!0,t.gs.les&&(n._Store.dateLastEventSent=new Date(t.gs.les)),n._Store.sessionStartDate=t.gs.ssd?new Date(t.gs.ssd):new Date,t=i?t[i]:t[t.cu]):(n.Logger.verbose(ut.InformationMessages.CookieNotFound),n._Store.clientId=n._Store.clientId||n._Helpers.generateUniqueId(),n._Store.deviceId=n._Store.deviceId||n._Helpers.generateUniqueId())}catch(r){n.Logger.error(ut.ErrorMessages.CookieParseError)}};this.determineLocalStorageAvailability=function(n){var t;window.mParticle&&window.mParticle._forceNoLocalStorage&&(n=undefined);try{return n.setItem("mparticle","test"),t=n.getItem("mparticle")==="test",n.removeItem("mparticle"),t&&n}catch(i){return!1}};this.getUserProductsFromLS=function(t){if(!n._Store.isLocalStorageAvailable)return[];var r,i,u=localStorage.getItem(n._Store.prodStorageName);if(u&&(r=y.decode(u)),t)try{return r&&(i=JSON.parse(r)),r&&i[t]&&i[t].cp&&Array.isArray(i[t].cp)?i[t].cp:[]}catch(f){return[]}else return[]};this.getAllUserProductsFromLS=function(){var i,r=localStorage.getItem(n._Store.prodStorageName),t;r&&(i=y.decode(r));try{t=JSON.parse(i)}catch(u){t={}}return t};this.setLocalStorage=function(){if(n._Store.isLocalStorageAvailable){var o=n._Store.storageName,r=t.getAllUserProductsFromLS(),i=t.getLocalStorage()||{},e=n.Identity.getCurrentUser(),f=e?e.getMPID():null,s={cp:r[f]?r[f].cp:[]};if(f){r=r||{};r[f]=s;try{window.localStorage.setItem(encodeURIComponent(n._Store.prodStorageName),y.encode(JSON.stringify(r)))}catch(h){n.Logger.error("Error with setting products on localStorage.")}}if(!n._Store.SDKConfig.useCookieStorage){i.gs=i.gs||{};i.l=n._Store.isLoggedIn?1:0;n._Store.sessionId&&(i.gs.csm=n._Store.currentSessionMPIDs);i.gs.ie=n._Store.isEnabled;f&&(i.cu=f);Object.keys(n._Store.nonCurrentUserMPIDs).length&&(i=n._Helpers.extend({},i,n._Store.nonCurrentUserMPIDs),n._Store.nonCurrentUserMPIDs={});i=u(i);try{window.localStorage.setItem(encodeURIComponent(o),t.encodePersistence(JSON.stringify(i)))}catch(h){n.Logger.error("Error with setting localStorage item.")}}}};this.getLocalStorage=function(){if(!n._Store.isLocalStorageAvailable)return null;var f=n._Store.storageName,i=t.decodePersistence(window.localStorage.getItem(f)),u={},r;if(i){i=JSON.parse(i);for(r in i)i.hasOwnProperty(r)&&(u[r]=i[r])}return Object.keys(u).length?u:null};this.expireCookies=function(n){var i=new Date,u,f,r;r=t.getCookieDomain();f=r===""?"":";domain="+r;i.setTime(i.getTime()-864e5);u="; expires="+i.toUTCString();document.cookie=n+"="+u+"; path=/"+f};this.getCookie=function(){var s=window.document.cookie.split("; "),i=n._Store.storageName,r,h,f,e,o,u=i?undefined:{};for(n.Logger.verbose(ut.InformationMessages.CookieSearch),r=0,h=s.length;r<h;r++){if(f=s[r].split("="),e=n._Helpers.decoded(f.shift()),o=n._Helpers.decoded(f.join("=")),i&&i===e){u=n._Helpers.converted(o);break}i||(u[e]=n._Helpers.converted(o))}return u?(n.Logger.verbose(ut.InformationMessages.CookieFound),JSON.parse(t.decodePersistence(u))):null};this.setCookie=function(){var r,e=n.Identity.getCurrentUser();e&&(r=e.getMPID());var h=new Date,c=n._Store.storageName,i=t.getCookie()||{},l=new Date(h.getTime()+n._Store.SDKConfig.cookieExpiration*864e5).toGMTString(),f,o,s;f=t.getCookieDomain();o=f===""?"":";domain="+f;i.gs=i.gs||{};n._Store.sessionId&&(i.gs.csm=n._Store.currentSessionMPIDs);r&&(i.cu=r);i.l=n._Store.isLoggedIn?1:0;i=u(i);Object.keys(n._Store.nonCurrentUserMPIDs).length&&(i=n._Helpers.extend({},i,n._Store.nonCurrentUserMPIDs),n._Store.nonCurrentUserMPIDs={});s=t.reduceAndEncodePersistence(i,l,o,n._Store.SDKConfig.maxCookieSize);n.Logger.verbose(ut.InformationMessages.CookieSet);window.document.cookie=encodeURIComponent(c)+"="+s};this.reduceAndEncodePersistence=function(t,i,u,f){var e,c=t.gs.csm?t.gs.csm:[],o,s,h,l,a,v;if(c.length){s={};for(h in t)t.hasOwnProperty(h)&&(ht[h]||h===t.cu||(s[h]=1));if(Object.keys(s).length)for(l in s)e=r(t,i,u),e.length>f&&s.hasOwnProperty(l)&&c.indexOf(l)===-1&&delete t[l];for(a=0;a<c.length;a++)if(e=r(t,i,u),e.length>f)v=c[a],t[v]?(n.Logger.verbose("Size of new encoded cookie is larger than maxCookieSize setting of "+f+". Removing from cookie the earliest logged in MPID containing: "+JSON.stringify(t[v],0,2)),delete t[v]):n.Logger.error("Unable to save MPID data to cookies because the resulting encoded cookie is larger than the maxCookieSize setting of "+f+". We recommend using a maxCookieSize of 1500.");else break}else for(o in t)t.hasOwnProperty(o)&&(e=r(t,i,u),e.length>f&&(ht[o]||o===t.cu||delete t[o]));return e};this.findPrevCookiesBasedOnUI=function(i){var r=n._Persistence.getPersistence(),f,e,u,o,s;if(i)for(e in i.userIdentities)if(r&&Object.keys(r).length)for(u in r)if(r[u].mpid){o=r[u].ui;for(s in o)if(e===s&&i.userIdentities[e]===o[s]){f=u;break}}f&&t.storeDataInMemory(r,f)};this.encodePersistence=function(i){var r,u;i=JSON.parse(i);for(r in i.gs)i.gs.hasOwnProperty(r)&&(at[r]?i.gs[r]?Array.isArray(i.gs[r])&&i.gs[r].length||n._Helpers.isObject(i.gs[r])&&Object.keys(i.gs[r]).length?i.gs[r]=y.encode(JSON.stringify(i.gs[r])):delete i.gs[r]:delete i.gs[r]:r==="ie"?i.gs[r]=i.gs[r]?1:0:i.gs[r]||delete i.gs[r]);for(u in i)if(i.hasOwnProperty(u)&&!ht[u])for(r in i[u])i[u].hasOwnProperty(r)&&at[r]&&(n._Helpers.isObject(i[u][r])&&Object.keys(i[u][r]).length?i[u][r]=y.encode(JSON.stringify(i[u][r])):delete i[u][r]);return t.createCookieString(JSON.stringify(i))};this.decodePersistence=function(i){var r,u;try{if(i){if(i=JSON.parse(t.revertCookieString(i)),n._Helpers.isObject(i)&&Object.keys(i).length){for(r in i.gs)i.gs.hasOwnProperty(r)&&(at[r]?i.gs[r]=JSON.parse(y.decode(i.gs[r])):r==="ie"&&(i.gs[r]=Boolean(i.gs[r])));for(u in i)if(i.hasOwnProperty(u))if(ht[u])u==="l"&&(i[u]=Boolean(i[u]));else for(r in i[u])i[u].hasOwnProperty(r)&&at[r]&&i[u][r].length&&(i[u][r]=JSON.parse(y.decode(i[u][r])))}return JSON.stringify(i)}}catch(f){n.Logger.error("Problem with decoding cookie",f)}};this.replaceCommasWithPipes=function(n){return n.replace(/,/g,"|")};this.replacePipesWithCommas=function(n){return n.replace(/\|/g,",")};this.replaceApostrophesWithQuotes=function(n){return n.replace(/\'/g,'"')};this.replaceQuotesWithApostrophes=function(n){return n.replace(/\"/g,"'")};this.createCookieString=function(n){return t.replaceCommasWithPipes(t.replaceQuotesWithApostrophes(n))};this.revertCookieString=function(n){return t.replacePipesWithCommas(t.replaceApostrophesWithQuotes(n))};this.getCookieDomain=function(){if(n._Store.SDKConfig.cookieDomain)return n._Store.SDKConfig.cookieDomain;var i=t.getDomain(document,location.hostname);return i===""?"":"."+i};this.getDomain=function(n,t){for(var r,u="mptest=cookie",f=t.split("."),i=f.length-1;i>=0;i--)if(r=f.slice(i).join("."),n.cookie=u+";domain=."+r+";",n.cookie.indexOf(u)>-1)return n.cookie=u.split("=")[0]+"=;domain=."+r+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",r;return""};this.getUserIdentities=function(n){var i=t.getPersistence();return i&&i[n]&&i[n].ui?i[n].ui:{}};this.getAllUserAttributes=function(n){var i=t.getPersistence();return i&&i[n]&&i[n].ua?i[n].ua:{}};this.getCartProducts=function(t){var i,r=localStorage.getItem(n._Store.prodStorageName);return r&&(i=JSON.parse(y.decode(r)),i&&i[t]&&i[t].cp)?i[t].cp:[]};this.setCartProducts=function(t){if(n._Store.isLocalStorageAvailable)try{window.localStorage.setItem(encodeURIComponent(n._Store.prodStorageName),y.encode(JSON.stringify(t)))}catch(i){n.Logger.error("Error with setting products on localStorage.")}};this.saveUserIdentitiesToPersistence=function(n,i){if(i){var r=t.getPersistence();r&&(r[n]?r[n].ui=i:r[n]={ui:i},t.savePersistence(r))}};this.saveUserAttributesToPersistence=function(n,i){var r=t.getPersistence();i&&(r&&(r[n]?r[n].ui=i:r[n]={ui:i}),t.savePersistence(r))};this.saveUserCookieSyncDatesToPersistence=function(n,i){if(i){var r=t.getPersistence();r&&(r[n]?r[n].csd=i:r[n]={csd:i});t.savePersistence(r)}};this.saveUserConsentStateToCookies=function(i,r){if(r||r===null){var u=t.getPersistence();u&&(u[i]?u[i].con=n._Consent.ConsentSerialization.toMinifiedJsonObject(r):u[i]={con:n._Consent.ConsentSerialization.toMinifiedJsonObject(r)},t.savePersistence(u))}};this.savePersistence=function(i){var e=t.encodePersistence(JSON.stringify(i)),o=new Date,s=n._Store.storageName,h=new Date(o.getTime()+n._Store.SDKConfig.cookieExpiration*864e5).toGMTString(),r=t.getCookieDomain(),u,f;u=r===""?"":";domain="+r;n._Store.SDKConfig.useCookieStorage?(f=t.reduceAndEncodePersistence(i,h,u,n._Store.SDKConfig.maxCookieSize),window.document.cookie=encodeURIComponent(s)+"="+f):n._Store.isLocalStorageAvailable&&localStorage.setItem(n._Store.storageName,e)};this.getPersistence=function(){return this.useLocalStorage()?this.getLocalStorage():this.getCookie()};this.getConsentState=function(i){var r=t.getPersistence();return r&&r[i]&&r[i].con?n._Consent.ConsentSerialization.fromMinifiedJsonObject(r[i].con):null};this.getFirstSeenTime=function(n){if(!n)return null;var i=t.getPersistence();return i&&i[n]&&i[n].fst?i[n].fst:null};this.setFirstSeenTime=function(n,i){if(n){i||(i=(new Date).getTime());var r=t.getPersistence();r&&(r[n]||(r[n]={}),r[n].fst||(r[n].fst=i,t.savePersistence(r)))}};this.getLastSeenTime=function(i){if(!i)return null;if(i===n.Identity.getCurrentUser().getMPID())return(new Date).getTime();var r=t.getPersistence();return r&&r[i]&&r[i].lst?r[i].lst:null};this.setLastSeenTime=function(n,i){if(n){i||(i=(new Date).getTime());var r=t.getPersistence();r&&r[n]&&(r[n].lst=i,t.savePersistence(r))}};this.getDeviceId=function(){return n._Store.deviceId};this.resetPersistence=function(){if(i(k.localStorageName),i(k.localStorageNameV3),i(k.localStorageNameV4),i(n._Store.prodStorageName),i(n._Store.storageName),i(k.localStorageProductsV4),t.expireCookies(k.cookieName),t.expireCookies(k.cookieNameV2),t.expireCookies(k.cookieNameV3),t.expireCookies(k.cookieNameV4),t.expireCookies(n._Store.prodStorageName),t.expireCookies(n._Store.storageName),mParticle._isTestEnv){var r="abcdef";i(n._Helpers.createMainStorageName(r));t.expireCookies(n._Helpers.createMainStorageName(r));i(n._Helpers.createProductStorageName(r))}};this.forwardingStatsBatches={uploadsTable:{},forwardingStatsEventQueue:[]}}function vf(t){var i=this;this.logEvent=function(n){if(t.Logger.verbose(d.InformationMessages.StartingLogEvent+": "+n.name),t._Helpers.canLog()){n.data&&(n.data=t._Helpers.sanitizeAttributes(n.data));var i=t._ServerModel.createEventObject(n);t._APIClient.sendEventToServer(i)}else t.Logger.verbose(d.InformationMessages.AbandonLogEvent)};this.startTracking=function(n){function u(r){t._Store.currentPosition={lat:r.coords.latitude,lng:r.coords.longitude};i(n,r);n=null;t._Store.isTracking=!0}function f(){i(n);n=null;t._Store.isTracking=!1}function i(n,i){if(n)try{i?n(i):n()}catch(r){t.Logger.error("Error invoking the callback passed to startTrackingLocation.");t.Logger.error(r)}}if(t._Store.isTracking){var r={coords:{latitude:t._Store.currentPosition.lat,longitude:t._Store.currentPosition.lng}};i(n,r)}else"geolocation"in navigator&&(t._Store.watchPositionId=navigator.geolocation.watchPosition(u,f))};this.stopTracking=function(){t._Store.isTracking&&(navigator.geolocation.clearWatch(t._Store.watchPositionId),t._Store.currentPosition=null,t._Store.isTracking=!1)};this.logOptOut=function(){t.Logger.verbose(d.InformationMessages.StartingLogOptOut);var i=t._ServerModel.createEventObject({messageType:n.MessageType.OptOut,eventType:n.EventType.Other});t._APIClient.sendEventToServer(i)};this.logAST=function(){i.logEvent({messageType:n.MessageType.AppStateTransition})};this.logCheckoutEvent=function(r,u,f,e){var o=t._Ecommerce.createCommerceEventObject(e);o&&(o.EventName+=t._Ecommerce.getProductActionEventName(n.ProductActionType.Checkout),o.EventCategory=n.CommerceEventType.ProductCheckout,o.ProductAction={ProductActionType:n.ProductActionType.Checkout,CheckoutStep:r,CheckoutOptions:u,ProductList:o.ShoppingCart.ProductList},i.logCommerceEvent(o,f))};this.logProductActionEvent=function(n,r,u,f){var e=t._Ecommerce.createCommerceEventObject(f);e&&(e.EventCategory=t._Ecommerce.convertProductActionToEventType(n),e.EventName+=t._Ecommerce.getProductActionEventName(n),e.ProductAction={ProductActionType:n,ProductList:Array.isArray(r)?r:[r]},i.logCommerceEvent(e,u))};this.logPurchaseEvent=function(r,u,f,e){var o=t._Ecommerce.createCommerceEventObject(e);o&&(o.EventName+=t._Ecommerce.getProductActionEventName(n.ProductActionType.Purchase),o.EventCategory=n.CommerceEventType.ProductPurchase,o.ProductAction={ProductActionType:n.ProductActionType.Purchase},o.ProductAction.ProductList=t._Ecommerce.buildProductList(o,u),t._Ecommerce.convertTransactionAttributesToProductAction(r,o.ProductAction),i.logCommerceEvent(o,f))};this.logRefundEvent=function(r,u,f,e){if(!r){t.Logger.error(d.ErrorMessages.TransactionRequired);return}var o=t._Ecommerce.createCommerceEventObject(e);o&&(o.EventName+=t._Ecommerce.getProductActionEventName(n.ProductActionType.Refund),o.EventCategory=n.CommerceEventType.ProductRefund,o.ProductAction={ProductActionType:n.ProductActionType.Refund},o.ProductAction.ProductList=t._Ecommerce.buildProductList(o,u),t._Ecommerce.convertTransactionAttributesToProductAction(r,o.ProductAction),i.logCommerceEvent(o,f))};this.logPromotionEvent=function(n,r,u,f){var e=t._Ecommerce.createCommerceEventObject(f);e&&(e.EventName+=t._Ecommerce.getPromotionActionEventName(n),e.EventCategory=t._Ecommerce.convertPromotionActionToEventType(n),e.PromotionAction={PromotionActionType:n,PromotionList:[r]},i.logCommerceEvent(e,u))};this.logImpressionEvent=function(r,u,f){var e=t._Ecommerce.createCommerceEventObject(f);e&&(e.EventName+="Impression",e.EventCategory=n.CommerceEventType.ProductImpression,Array.isArray(r)||(r=[r]),e.ProductImpressions=[],r.forEach(function(n){e.ProductImpressions.push({ProductImpressionList:n.Name,ProductList:Array.isArray(n.Product)?n.Product:[n.Product]})}),i.logCommerceEvent(e,u))};this.logCommerceEvent=function(n,i){t.Logger.verbose(d.InformationMessages.StartingLogCommerceEvent);i=t._Helpers.sanitizeAttributes(i);t._Helpers.canLog()?(t._Store.webviewBridgeEnabled&&(n.ShoppingCart={}),i&&(n.EventAttributes=i),t._APIClient.sendEventToServer(n),t._Persistence.update()):t.Logger.verbose(d.InformationMessages.AbandonLogEvent)};this.addEventHandler=function(r,u,f,e,o){var h=[],l=function(r){var u=function(){s.href?window.location.href=s.href:s.submit&&s.submit()};t.Logger.verbose("DOM event triggered, handling event");i.logEvent({messageType:n.MessageType.PageEvent,name:typeof f=="function"?f(s):f,data:typeof e=="function"?e(s):e,eventType:o||n.EventType.Other});(s.href&&s.target!=="_blank"||s.submit)&&(r.preventDefault?r.preventDefault():r.returnValue=!1,setTimeout(u,t._Store.SDKConfig.timeout))},s,c;if(!u){t.Logger.error("Can't bind event, selector is required");return}if(typeof u=="string"?h=document.querySelectorAll(u):u.nodeType&&(h=[u]),h.length)for(t.Logger.verbose("Found "+h.length+" element"+(h.length>1?"s":"")+", attaching event handlers"),c=0;c<h.length;c++)s=h[c],s.addEventListener?s.addEventListener(r,l,!1):s.attachEvent?s.attachEvent("on"+r,l):s["on"+r]=l;else t.Logger.verbose("No elements found")}}function wf(n){function o(){var c=window.document.cookie.split("; "),l,f,a,s,o,h;for(n.Logger.verbose(t.Messages.InformationMessages.CookieSearch),f=0,a=c.length;f<a;f++){if(s=c[f].split("="),o=n._Helpers.decoded(s.shift()),h=n._Helpers.decoded(s.join("=")),o===n._Store.storageName)return;if(o===e.cookieNameV4){r(h,e.cookieNameV4);n._Store.isLocalStorageAvailable&&u();return}if(o===e.cookieNameV3){l=i.convertSDKv1CookiesV3ToSDKv2CookiesV4(h);r(l,e.cookieNameV3);break}}}function r(i,r){var s=new Date,u=n._Persistence.getCookieDomain(),f,o;f=new Date(s.getTime()+e.CookieExpiration*864e5).toGMTString();o=u===""?"":";domain="+u;n.Logger.verbose(t.Messages.InformationMessages.CookieSet);window.document.cookie=encodeURIComponent(n._Store.storageName)+"="+i+";expires="+f+";path=/"+o;n._Persistence.expireCookies(r);n._Store.migratingToIDSyncCookies=!0}function s(t){var r,i;try{r={gs:{csm:[]}};t=JSON.parse(t);for(i in t)t.hasOwnProperty(i)&&(yf[i]?r.gs[i]=t[i]:i==="mpid"?r.cu=t[i]:t.mpid&&(r[t.mpid]=r[t.mpid]||{},pf[i]&&(r[t.mpid][i]=t[i])));return JSON.stringify(r)}catch(u){n.Logger.error("Failed to restructure previous cookie into most current cookie schema")}}function u(){var t=e.localStorageProductsV4,i=localStorage.getItem(e.localStorageProductsV4);localStorage.setItem(n._Store.prodStorageName,i);localStorage.removeItem(t)}function f(t,i){if(n._Store.isLocalStorageAvailable){var r={};if(r[i]={},t.cp){try{r[i].cp=JSON.parse(dt.decode(t.cp))}catch(u){r[i].cp=t.cp}Array.isArray(r[i].cp)||(r[i].cp=[])}localStorage.setItem(n._Store.prodStorageName,dt.encode(JSON.stringify(r)))}}function h(){function l(t,i){try{window.localStorage.setItem(encodeURIComponent(n._Store.storageName),t)}catch(r){n.Logger.error("Error with setting localStorage item.")}window.localStorage.removeItem(encodeURIComponent(i))}var r,s=e.localStorageNameV3,h=e.localStorageNameV4,a=window.localStorage.getItem(n._Store.storageName),o,t,c;if(!a){if(o=window.localStorage.getItem(h),o){l(o,h);u();return}if(t=window.localStorage.getItem(s),t){if(n._Store.migratingToIDSyncCookies=!0,c=t.slice(),t=JSON.parse(n._Persistence.replacePipesWithCommas(n._Persistence.replaceApostrophesWithQuotes(t))),t.mpid){t=JSON.parse(i.convertSDKv1CookiesV3ToSDKv2CookiesV4(c));l(JSON.stringify(t),s);return}if((t.cp||t.pb)&&!t.mpid){if(r=n._Persistence.getCookie(),r){f(t,r.cu);localStorage.removeItem(e.localStorageNameV3);return}localStorage.removeItem(e.localStorageNameV3);return}}}}var i=this;this.migrate=function(){try{o()}catch(t){n._Persistence.expireCookies(e.cookieNameV3);n._Persistence.expireCookies(e.cookieNameV4);n.Logger.error("Error migrating cookie: "+t)}if(n._Store.isLocalStorageAvailable)try{h()}catch(t){localStorage.removeItem(e.localStorageNameV3);localStorage.removeItem(e.localStorageNameV4);n.Logger.error("Error migrating localStorage: "+t)}};this.convertSDKv1CookiesV3ToSDKv2CookiesV4=function(t){t=n._Persistence.replacePipesWithCommas(n._Persistence.replaceApostrophesWithQuotes(t));var i=JSON.parse(t),r=JSON.parse(s(t));return i.mpid&&(r.gs.csm.push(i.mpid),r.gs.csm=dt.encode(JSON.stringify(r.gs.csm)),f(i,i.mpid)),JSON.stringify(r)}}function wi(t,i,r){var u=this;return{getUserIdentities:function(){var u={},f=r._Persistence.getUserIdentities(t);for(var e in f)f.hasOwnProperty(e)&&(u[n.IdentityType.getIdentityName(r._Helpers.parseNumber(e))]=f[e]);return u=r._Helpers.filterUserIdentitiesForForwarders(u,i.userIdentityFilters),{userIdentities:u}},getMPID:function(){return t},getUserAttributesLists:function(n){var t,f={},i;t=u.getAllUserAttributes();for(i in t)t.hasOwnProperty(i)&&Array.isArray(t[i])&&(f[i]=t[i].slice());return r._Helpers.filterUserAttributes(f,n.userAttributeFilters)},getAllUserAttributes:function(){var f={},n=r._Persistence.getAllUserAttributes(t),u;if(n)for(u in n)n.hasOwnProperty(u)&&(f[u]=Array.isArray(n[u])?n[u].slice():n[u]);return r._Helpers.filterUserAttributes(f,i.userAttributeFilters)}}}function bf(t){var i=this;this.initForwarders=function(n,r){var u=t.Identity.getCurrentUser();!t._Store.webviewBridgeEnabled&&t._Store.configuredForwarders&&(t._Store.configuredForwarders.sort(function(n,t){return n.settings.PriorityValue=n.settings.PriorityValue||0,t.settings.PriorityValue=t.settings.PriorityValue||0,-1*(n.settings.PriorityValue-t.settings.PriorityValue)}),t._Store.activeForwarders=t._Store.configuredForwarders.filter(function(f){if(!i.isEnabledForUserConsent(f.filteringConsentRuleValues,u)||!i.isEnabledForUserAttributes(f.filteringUserAttributeValue,u)||!i.isEnabledForUnknownUser(f.excludeAnonymousUser,u))return!1;var e=t._Helpers.filterUserIdentities(n,f.userIdentityFilters),o=t._Helpers.filterUserAttributes(u?u.getAllUserAttributes():{},f.userAttributeFilters);return f.initialized||(f.init(f.settings,r,!1,null,o,e,t._Store.SDKConfig.appVersion,t._Store.SDKConfig.appName,t._Store.SDKConfig.customFlags,t._Store.clientId),f.initialized=!0),!0}))};this.isEnabledForUserConsent=function(n,i){var r,u,e,h,o,s;if(!n||!n.values||!n.values.length)return!0;if(!i)return!1;if(r={},u=i.getConsentState(),u){var f=u.getGDPRConsentState();if(f)for(e in f)f.hasOwnProperty(e)&&(o=t._Helpers.generateHash("1"+e).toString(),r[o]=f[e].Consented);h=u.getCCPAConsentState();h&&(o=t._Helpers.generateHash("2data_sale_opt_out").toString(),r[o]=h.Consented)}return s=!1,n.values.forEach(function(n){if(!s){var t=n.consentPurpose,i=n.hasConsented;r.hasOwnProperty(t)&&r[t]===i&&(s=!0)}}),n.includeOnMatch===s};this.isEnabledForUserAttributes=function(n,i){var e,o,r,f,u;if(!n||!t._Helpers.isObject(n)||!Object.keys(n).length)return!0;if(i)r=i.getAllUserAttributes();else return!1;f=!1;try{if(r&&t._Helpers.isObject(r)&&Object.keys(r).length)for(u in r)if(r.hasOwnProperty(u)&&(e=t._Helpers.generateHash(u).toString(),o=t._Helpers.generateHash(r[u]).toString(),e===n.userAttributeName&&o===n.userAttributeValue)){f=!0;break}return n?n.includeOnMatch===f:!0}catch(s){return!0}};this.isEnabledForUnknownUser=function(n,t){return(!t||!t.isLoggedIn())&&n?!1:!0};this.applyToForwarders=function(n,i){t._Store.activeForwarders.length&&t._Store.activeForwarders.forEach(function(r){var f=r[n],u;if(f)try{u=r[n](i);u&&t.Logger.verbose(u)}catch(e){t.Logger.verbose(e)}})};this.sendEventToForwarders=function(i){var u,o,s,p=function(n,i){n.UserIdentities&&n.UserIdentities.length&&n.UserIdentities.forEach(function(r,u){t._Helpers.inArray(i,r.Type)&&(n.UserIdentities.splice(u,1),u>0&&u--)})},v=function(n,i){var u,r;if(i)for(r in n.EventAttributes)n.EventAttributes.hasOwnProperty(r)&&(u=t._Helpers.generateHash(n.EventCategory+n.EventName+r),t._Helpers.inArray(i,u)&&delete n.EventAttributes[r])},e=function(n,i){return n&&n.length&&t._Helpers.inArray(n,i)?!0:!1},w=[n.MessageType.PageEvent,n.MessageType.PageView,n.MessageType.Commerce],r,f,h,c,l,y,a;if(!t._Store.webviewBridgeEnabled&&t._Store.activeForwarders)for(o=t._Helpers.generateHash(i.EventCategory+i.EventName),s=t._Helpers.generateHash(i.EventCategory),r=0;r<t._Store.activeForwarders.length;r++){if(w.indexOf(i.EventDataType)>-1&&t._Store.activeForwarders[r].filteringEventAttributeValue&&t._Store.activeForwarders[r].filteringEventAttributeValue.eventAttributeName&&t._Store.activeForwarders[r].filteringEventAttributeValue.eventAttributeValue){if(f=null,i.EventAttributes)for(h in i.EventAttributes)if(c=t._Helpers.generateHash(h).toString(),c===t._Store.activeForwarders[r].filteringEventAttributeValue.eventAttributeName&&(f={name:c,value:t._Helpers.generateHash(i.EventAttributes[h]).toString()}),f)break;if(l=f!==null&&f.value===t._Store.activeForwarders[r].filteringEventAttributeValue.eventAttributeValue,y=t._Store.activeForwarders[r].filteringEventAttributeValue.includeOnMatch===!0?l:!l,!y)continue}if(u={},u=t._Helpers.extend(!0,u,i),i.EventDataType===n.MessageType.PageEvent&&(e(t._Store.activeForwarders[r].eventNameFilters,o)||e(t._Store.activeForwarders[r].eventTypeFilters,s)))continue;else if(i.EventDataType===n.MessageType.Commerce&&e(t._Store.activeForwarders[r].eventTypeFilters,s))continue;else if(i.EventDataType===n.MessageType.PageView&&e(t._Store.activeForwarders[r].screenNameFilters,o))continue;u.EventAttributes&&(i.EventDataType===n.MessageType.PageEvent?v(u,t._Store.activeForwarders[r].attributeFilters):i.EventDataType===n.MessageType.PageView&&v(u,t._Store.activeForwarders[r].pageViewAttributeFilters));p(u,t._Store.activeForwarders[r].userIdentityFilters);u.UserAttributes=t._Helpers.filterUserAttributes(u.UserAttributes,t._Store.activeForwarders[r].userAttributeFilters);t.Logger.verbose("Sending message to forwarder: "+t._Store.activeForwarders[r].name);t._Store.activeForwarders[r].process&&(a=t._Store.activeForwarders[r].process(u),a&&t.Logger.verbose(a))}};this.callSetUserAttributeOnForwarders=function(n,i){t._Store.activeForwarders.length&&t._Store.activeForwarders.forEach(function(r){if(r.setUserAttribute&&r.userAttributeFilters&&!t._Helpers.inArray(r.userAttributeFilters,t._Helpers.generateHash(n)))try{var u=r.setUserAttribute(n,i);u&&t.Logger.verbose(u)}catch(f){t.Logger.error(f)}})};this.setForwarderUserIdentities=function(n){t._Store.activeForwarders.forEach(function(i){var r=t._Helpers.filterUserIdentities(n,i.userIdentityFilters);i.setUserIdentity&&r.forEach(function(n){var r=i.setUserIdentity(n.Identity,n.Type);r&&t.Logger.verbose(r)})})};this.setForwarderOnUserIdentified=function(n){t._Store.activeForwarders.forEach(function(i){var u=wi(n.getMPID(),i,t),r;i.onUserIdentified&&(r=i.onUserIdentified(u),r&&t.Logger.verbose(r))})};this.setForwarderOnIdentityComplete=function(n,i){var r;t._Store.activeForwarders.forEach(function(u){var f=wi(n.getMPID(),u,t);i==="identify"?u.onIdentifyComplete&&(r=u.onIdentifyComplete(f),r&&t.Logger.verbose(r)):i==="login"?u.onLoginComplete&&(r=u.onLoginComplete(f),r&&t.Logger.verbose(r)):i==="logout"?u.onLogoutComplete&&(r=u.onLogoutComplete(f),r&&t.Logger.verbose(r)):i==="modify"&&u.onModifyComplete&&(r=u.onModifyComplete(f),r&&t.Logger.verbose(r))})};this.getForwarderStatsQueue=function(){return t._Persistence.forwardingStatsBatches.forwardingStatsEventQueue};this.setForwarderStatsQueue=function(n){t._Persistence.forwardingStatsBatches.forwardingStatsEventQueue=n};this.configureForwarder=function(n){var r=null,i=n,u={},f;t._Helpers.isObject(t._Store.SDKConfig.kits)&&Object.keys(t._Store.SDKConfig.kits).length>0?u=t._Store.SDKConfig.kits:t._preInit.forwarderConstructors.length>0&&t._preInit.forwarderConstructors.forEach(function(n){u[n.name]=n});for(f in u)if(f===i.name&&(i.isDebug===t._Store.SDKConfig.isDevelopmentMode||i.isSandbox===t._Store.SDKConfig.isDevelopmentMode)){r=new u[f].constructor;r.id=i.moduleId;r.isSandbox=i.isDebug||i.isSandbox;r.hasSandbox=i.hasDebugString==="true";r.isVisible=i.isVisible;r.settings=i.settings;r.eventNameFilters=i.eventNameFilters;r.eventTypeFilters=i.eventTypeFilters;r.attributeFilters=i.attributeFilters;r.screenNameFilters=i.screenNameFilters;r.screenNameFilters=i.screenNameFilters;r.pageViewAttributeFilters=i.pageViewAttributeFilters;r.userIdentityFilters=i.userIdentityFilters;r.userAttributeFilters=i.userAttributeFilters;r.filteringEventAttributeValue=i.filteringEventAttributeValue;r.filteringUserAttributeValue=i.filteringUserAttributeValue;r.eventSubscriptionId=i.eventSubscriptionId;r.filteringConsentRuleValues=i.filteringConsentRuleValues;r.excludeAnonymousUser=i.excludeAnonymousUser;t._Store.configuredForwarders.push(r);break}};this.configurePixel=function(n){(n.isDebug===t._Store.SDKConfig.isDevelopmentMode||n.isProduction!==t._Store.SDKConfig.isDevelopmentMode)&&t._Store.pixelConfigurations.push(n)};this.processForwarders=function(n,r){if(n)try{Array.isArray(n.kitConfigs)&&n.kitConfigs.length&&n.kitConfigs.forEach(function(n){i.configureForwarder(n)});Array.isArray(n.pixelConfigs)&&n.pixelConfigs.length&&n.pixelConfigs.forEach(function(n){i.configurePixel(n)});i.initForwarders(t._Store.SDKConfig.identifyRequest.userIdentities,r)}catch(u){t.Logger.error("Config was not parsed propertly. Forwarders may not be initialized.")}else t.Logger.warning("No config was passed. Cannot process forwarders")}}function ki(i){function f(n,t){var r=[],i;t.flags={};for(i in n.CustomFlags)r=[],n.CustomFlags.hasOwnProperty(i)&&(Array.isArray(n.CustomFlags[i])?n.CustomFlags[i].forEach(function(n){(typeof n=="number"||typeof n=="string"||typeof n=="boolean")&&r.push(n.toString())}):(typeof n.CustomFlags[i]=="number"||typeof n.CustomFlags[i]=="string"||typeof n.CustomFlags[i]=="boolean")&&r.push(n.CustomFlags[i].toString()),r.length&&(t.flags[i]=r))}function r(n){return n?n.map(function(n){return e(n)}):[]}function e(n){return{id:i._Helpers.parseStringOrNumber(n.Sku),nm:i._Helpers.parseStringOrNumber(n.Name),pr:i._Helpers.parseNumber(n.Price),qt:i._Helpers.parseNumber(n.Quantity),br:i._Helpers.parseStringOrNumber(n.Brand),va:i._Helpers.parseStringOrNumber(n.Variant),ca:i._Helpers.parseStringOrNumber(n.Category),ps:i._Helpers.parseNumber(n.Position),cc:i._Helpers.parseStringOrNumber(n.CouponCode),tpa:i._Helpers.parseNumber(n.TotalAmount),attrs:n.Attributes}}var u=this;this.appendUserInfo=function(t,r){var e,u,o,s,h,c,f;if(r){if(!t){r.MPID=null;r.ConsentState=null;r.UserAttributes=null;r.UserIdentities=null;return}if(!r.MPID||r.MPID!==t.getMPID()){r.MPID=t.getMPID();r.ConsentState=t.getConsentState();r.UserAttributes=t.getAllUserAttributes();e=t.getUserIdentities().userIdentities;u={};for(o in e)s=n.IdentityType.getIdentityType(o),s!==!1&&(u[s]=e[o]);if(h=[],i._Helpers.isObject(u)&&Object.keys(u).length)for(c in u)f={},f.Identity=u[c],f.Type=i._Helpers.parseNumber(c),h.push(f);r.UserIdentities=h}}};this.convertToConsentStateDTO=function(n){var f,e,r,i,t,u;if(!n)return null;if(f={},e=n.getGDPRConsentState(),e){r={};f.gdpr=r;for(i in e)e.hasOwnProperty(i)&&(t=e[i],f.gdpr[i]={},typeof t.Consented=="boolean"&&(r[i].c=t.Consented),typeof t.Timestamp=="number"&&(r[i].ts=t.Timestamp),typeof t.ConsentDocument=="string"&&(r[i].d=t.ConsentDocument),typeof t.Location=="string"&&(r[i].l=t.Location),typeof t.HardwareId=="string"&&(r[i].h=t.HardwareId))}return u=n.getCCPAConsentState(),u&&(f.ccpa={data_sale_opt_out:{c:u.Consented,ts:u.Timestamp,d:u.ConsentDocument,l:u.Location,h:u.HardwareId}}),f};this.createEventObject=function(r){var e={},f={},s=r.messageType===n.MessageType.OptOut?!i._Store.isEnabled:null,o;return i._Store.sessionId||r.messageType==n.MessageType.OptOut||i._Store.webviewBridgeEnabled?(f=r.hasOwnProperty("toEventAPIObject")?r.toEventAPIObject():{EventName:r.name||r.messageType,EventCategory:r.eventType,EventAttributes:i._Helpers.sanitizeAttributes(r.data),EventDataType:r.messageType,CustomFlags:r.customFlags||{},UserAttributeChanges:r.userAttributeChanges,UserIdentityChanges:r.userIdentityChanges},r.messageType!==n.MessageType.SessionEnd&&(i._Store.dateLastEventSent=new Date),e={Store:i._Store.serverSettings,SDKVersion:t.sdkVersion,SessionId:i._Store.sessionId,SessionStartDate:i._Store.sessionStartDate?i._Store.sessionStartDate.getTime():null,Debug:i._Store.SDKConfig.isDevelopmentMode,Location:i._Store.currentPosition,OptOut:s,ExpandedEventCount:0,AppVersion:i.getAppVersion(),AppName:i.getAppName(),ClientGeneratedId:i._Store.clientId,DeviceId:i._Store.deviceId,IntegrationAttributes:i._Store.integrationAttributes,CurrencyCode:i._Store.currencyCode,DataPlan:i._Store.SDKConfig.dataPlan?i._Store.SDKConfig.dataPlan:{}},f.CurrencyCode=i._Store.currencyCode,o=i.Identity.getCurrentUser(),u.appendUserInfo(o,f),r.messageType===n.MessageType.SessionEnd&&(f.SessionLength=i._Store.dateLastEventSent.getTime()-i._Store.sessionStartDate.getTime(),f.currentSessionMPIDs=i._Store.currentSessionMPIDs,f.EventAttributes=i._Store.sessionAttributes,i._Store.currentSessionMPIDs=[],i._Store.sessionStartDate=null),e.Timestamp=i._Store.dateLastEventSent.getTime(),i._Helpers.extend({},f,e)):null};this.convertEventToDTO=function(n,t){var e={n:n.EventName,et:n.EventCategory,ua:n.UserAttributes,ui:n.UserIdentities,ia:n.IntegrationAttributes,str:n.Store,attrs:n.EventAttributes,sdk:n.SDKVersion,sid:n.SessionId,sl:n.SessionLength,ssd:n.SessionStartDate,dt:n.EventDataType,dbg:n.Debug,ct:n.Timestamp,lc:n.Location,o:n.OptOut,eec:n.ExpandedEventCount,av:n.AppVersion,cgid:n.ClientGeneratedId,das:n.DeviceId,mpid:n.MPID,smpids:n.currentSessionMPIDs},o;return n.DataPlan&&n.DataPlan.PlanId&&(e.dp_id=n.DataPlan.PlanId,n.DataPlan.PlanVersion&&(e.dp_v=n.DataPlan.PlanVersion)),o=u.convertToConsentStateDTO(n.ConsentState),o&&(e.con=o),n.EventDataType===vt.AppStateTransition&&(e.fr=t,e.iu=!1,e.at=bi.AppInit,e.lr=window.location.href||null,e.attrs=null),n.CustomFlags&&f(n,e),n.EventDataType===vt.Commerce?(e.cu=n.CurrencyCode,n.ShoppingCart&&(e.sc={pl:r(n.ShoppingCart.ProductList)}),n.ProductAction?e.pd={an:n.ProductAction.ProductActionType,cs:i._Helpers.parseNumber(n.ProductAction.CheckoutStep),co:n.ProductAction.CheckoutOptions,pl:r(n.ProductAction.ProductList),ti:n.ProductAction.TransactionId,ta:n.ProductAction.Affiliation,tcc:n.ProductAction.CouponCode,tr:i._Helpers.parseNumber(n.ProductAction.TotalAmount),ts:i._Helpers.parseNumber(n.ProductAction.ShippingAmount),tt:i._Helpers.parseNumber(n.ProductAction.TaxAmount)}:n.PromotionAction?e.pm={an:n.PromotionAction.PromotionActionType,pl:n.PromotionAction.PromotionList.map(function(n){return{id:n.Id,nm:n.Name,cr:n.Creative,ps:n.Position?n.Position:0}})}:n.ProductImpressions&&(e.pi=n.ProductImpressions.map(function(n){return{pil:n.ProductImpressionList,pl:r(n.ProductList)}}))):n.EventDataType===vt.Profile&&(e.pet=n.ProfileMessageType),e}}function kf(n){function t(){var i=n._Forwarders.getForwarderStatsQueue(),t=n._Persistence.forwardingStatsBatches.uploadsTable,u=Date.now(),r;i.length&&(t[u]={uploading:!1,data:i},n._Forwarders.setForwarderStatsQueue([]));for(r in t)(function(i){if(t.hasOwnProperty(i)&&t[i].uploading===!1){var u=function(){r.readyState===4&&(r.status===200||r.status===202?(n.Logger.verbose("Successfully sent  "+r.statusText+" from server"),delete t[i]):r.status.toString()[0]==="4"?r.status!==429&&delete t[i]:t[i].uploading=!1)},r=n._Helpers.createXHR(u),f=t[i].data;t[i].uploading=!0;n._APIClient.sendBatchForwardingStatsToServer(f,r)}})(r)}this.startForwardingStatsTimer=function(){mParticle._forwardingStatsTimer=setInterval(function(){t()},n._Store.SDKConfig.forwarderStatsTimeout)}}function df(i){var r=this;this.checkIdentitySwap=function(n,t,r){if(n&&t&&n!==t){var u=i._Persistence.getPersistence();u&&(u.cu=t,u.gs.csm=r,i._Persistence.savePersistence(u))}};this.IdentityRequest={createKnownIdentities:function(n,t){var r={},u;if(n&&n.userIdentities&&i._Helpers.isObject(n.userIdentities))for(u in n.userIdentities)r[u]=n.userIdentities[u];return r.device_application_stamp=t,r},preProcessIdentityRequest:function(n,t,r){var f,e;return(i.Logger.verbose(u.InformationMessages.StartingLogEvent+": "+r),f=i._Helpers.Validators.validateIdentities(n,r),!f.valid)?(i.Logger.error("ERROR: "+f.error),{valid:!1,error:f.error}):t&&!i._Helpers.Validators.isFunction(t)?(e="The optional callback must be a function. You tried entering a(n) "+s(t),i.Logger.error(e),{valid:!1,error:e}):{valid:!0}},createIdentityRequest:function(n,t,r,u,f,e,o){return{client_sdk:{platform:t,sdk_vendor:r,sdk_version:u},context:e,environment:i._Store.SDKConfig.isDevelopmentMode?"development":"production",request_id:i._Helpers.generateUniqueId(),request_timestamp_ms:(new Date).getTime(),previous_mpid:o||null,known_identities:this.createKnownIdentities(n,f)}},createModifyIdentityRequest:function(n,t,r,u,f,e){return{client_sdk:{platform:r,sdk_vendor:u,sdk_version:f},context:e,environment:i._Store.SDKConfig.isDevelopmentMode?"development":"production",request_id:i._Helpers.generateUniqueId(),request_timestamp_ms:(new Date).getTime(),identity_changes:this.createIdentityChanges(n,t)}},createIdentityChanges:function(n,t){var u=[],r;if(t&&i._Helpers.isObject(t)&&n&&i._Helpers.isObject(n))for(r in t)u.push({old_value:n[r]||null,new_value:t[r],identity_type:r});return u},modifyUserIdentities:function(t,i){var u={};for(var r in i)u[n.IdentityType.getIdentityType(r)]=i[r];for(r in t)u[r]||(u[r]=t[r]);return u},createAliasNetworkRequest:function(n){return{request_id:i._Helpers.generateUniqueId(),request_type:"alias",environment:i._Store.SDKConfig.isDevelopmentMode?"development":"production",api_key:i._Store.devToken,data:{destination_mpid:n.destinationMpid,source_mpid:n.sourceMpid,start_unixtime_ms:n.startTime,end_unixtime_ms:n.endTime,device_application_stamp:i._Store.deviceId}}},convertAliasToNative:function(n){return{DestinationMpid:n.destinationMpid,SourceMpid:n.sourceMpid,StartUnixtimeMs:n.startTime,EndUnixtimeMs:n.endTime}},convertToNative:function(t){var r=[],i;if(t&&t.userIdentities){for(i in t.userIdentities)t.userIdentities.hasOwnProperty(i)&&r.push({Type:n.IdentityType.getIdentityType(i),Identity:t.userIdentities[i]});return{UserIdentities:r}}}};this.IdentityAPI={HTTPCodes:f,identify:function(n,e){var o,h=i.Identity.getCurrentUser(),s=i._Identity.IdentityRequest.preProcessIdentityRequest(n,e,"identify"),c;h&&(o=h.getMPID());s.valid?(c=i._Identity.IdentityRequest.createIdentityRequest(n,t.platform,t.sdkVendor,t.sdkVersion,i._Store.deviceId,i._Store.context,o),i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Identify,JSON.stringify(i._Identity.IdentityRequest.convertToNative(n))),i._Helpers.invokeCallback(e,f.nativeIdentityRequest,"Identify request sent to native sdk")):i._APIClient.sendIdentityRequest(c,"identify",e,n,r.parseIdentityResponse,o):(i._Helpers.invokeCallback(e,f.loggingDisabledOrMissingAPIKey,u.InformationMessages.AbandonLogEvent),i.Logger.verbose(u.InformationMessages.AbandonLogEvent))):(i._Helpers.invokeCallback(e,f.validationIssue,s.error),i.Logger.verbose(s))},logout:function(e,o){var s,l=i.Identity.getCurrentUser(),h=i._Identity.IdentityRequest.preProcessIdentityRequest(e,o,"logout"),c,a;l&&(s=l.getMPID());h.valid?(a=i._Identity.IdentityRequest.createIdentityRequest(e,t.platform,t.sdkVendor,t.sdkVersion,i._Store.deviceId,i._Store.context,s),i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Logout,JSON.stringify(i._Identity.IdentityRequest.convertToNative(e))),i._Helpers.invokeCallback(o,f.nativeIdentityRequest,"Logout request sent to native sdk")):(i._APIClient.sendIdentityRequest(a,"logout",o,e,r.parseIdentityResponse,s),c=i._ServerModel.createEventObject({messageType:n.MessageType.Profile}),c.ProfileMessageType=n.ProfileMessageType.Logout,i._Store.activeForwarders.length&&i._Store.activeForwarders.forEach(function(n){n.logOut&&n.logOut(c)})):(i._Helpers.invokeCallback(o,f.loggingDisabledOrMissingAPIKey,u.InformationMessages.AbandonLogEvent),i.Logger.verbose(u.InformationMessages.AbandonLogEvent))):(i._Helpers.invokeCallback(o,f.validationIssue,h.error),i.Logger.verbose(h))},login:function(n,e){var o,h=i.Identity.getCurrentUser(),s=i._Identity.IdentityRequest.preProcessIdentityRequest(n,e,"login"),c;h&&(o=h.getMPID());s.valid?(c=i._Identity.IdentityRequest.createIdentityRequest(n,t.platform,t.sdkVendor,t.sdkVersion,i._Store.deviceId,i._Store.context,o),i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Login,JSON.stringify(i._Identity.IdentityRequest.convertToNative(n))),i._Helpers.invokeCallback(e,f.nativeIdentityRequest,"Login request sent to native sdk")):i._APIClient.sendIdentityRequest(c,"login",e,n,r.parseIdentityResponse,o):(i._Helpers.invokeCallback(e,f.loggingDisabledOrMissingAPIKey,u.InformationMessages.AbandonLogEvent),i.Logger.verbose(u.InformationMessages.AbandonLogEvent))):(i._Helpers.invokeCallback(e,f.validationIssue,s.error),i.Logger.verbose(s))},modify:function(n,e){var h,o=i.Identity.getCurrentUser(),s=i._Identity.IdentityRequest.preProcessIdentityRequest(n,e,"modify"),c,l;o&&(h=o.getMPID());c=n&&n.userIdentities?n.userIdentities:{};s.valid?(l=i._Identity.IdentityRequest.createModifyIdentityRequest(o?o.getUserIdentities().userIdentities:{},c,t.platform,t.sdkVendor,t.sdkVersion,i._Store.context),i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Modify,JSON.stringify(i._Identity.IdentityRequest.convertToNative(n))),i._Helpers.invokeCallback(e,f.nativeIdentityRequest,"Modify request sent to native sdk")):i._APIClient.sendIdentityRequest(l,"modify",e,n,r.parseIdentityResponse,h):(i._Helpers.invokeCallback(e,f.loggingDisabledOrMissingAPIKey,u.InformationMessages.AbandonLogEvent),i.Logger.verbose(u.InformationMessages.AbandonLogEvent))):(i._Helpers.invokeCallback(e,f.validationIssue,s.error),i.Logger.verbose(s))},getCurrentUser:function(){var n;return i._Store?(n=i._Store.mpid,n?(n=i._Store.mpid.slice(),r.mParticleUser(n,i._Store.isLoggedIn)):i._Store.webviewBridgeEnabled?r.mParticleUser():null):null},getUser:function(n){var u=i._Persistence.getPersistence();return u?u[n]&&!t.SDKv2NonMPIDCookieKeys.hasOwnProperty(n)?r.mParticleUser(n):null:null},getUsers:function(){var f=i._Persistence.getPersistence(),n=[],u;if(f)for(u in f)t.SDKv2NonMPIDCookieKeys.hasOwnProperty(u)||n.push(r.mParticleUser(u));return n.sort(function(n,t){var i=n.getLastSeenTime()||0,r=t.getLastSeenTime()||0;return i>r?-1:1}),n},aliasUsers:function(n,r){var e,o;if(n.destinationMpid&&n.sourceMpid||(e=u.ValidationMessages.AliasMissingMpid),n.destinationMpid===n.sourceMpid&&(e=u.ValidationMessages.AliasNonUniqueMpid),n.startTime&&n.endTime||(e=u.ValidationMessages.AliasMissingTime),n.startTime>n.endTime&&(e=u.ValidationMessages.AliasStartBeforeEndTime),e){i.Logger.warning(e);i._Helpers.invokeAliasCallback(r,f.validationIssue,e);return}i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Alias,JSON.stringify(i._Identity.IdentityRequest.convertAliasToNative(n))),i._Helpers.invokeAliasCallback(r,f.nativeIdentityRequest,"Alias request sent to native sdk")):(i.Logger.verbose(u.InformationMessages.StartingAliasRequest+": "+n.sourceMpid+" -> "+n.destinationMpid),o=i._Identity.IdentityRequest.createAliasNetworkRequest(n),i._APIClient.sendAliasRequest(o,r)):(i._Helpers.invokeAliasCallback(r,f.loggingDisabledOrMissingAPIKey,u.InformationMessages.AbandonAliasUsers),i.Logger.verbose(u.InformationMessages.AbandonAliasUsers))},createAliasRequest:function(n,t){var r,u,f;try{return!t||!n?(i.Logger.error("'destinationUser' and 'sourceUser' must both be present"),null):(r=n.getFirstSeenTime(),r||i.Identity.getUsers().forEach(function(n){n.getFirstSeenTime()&&(!r||n.getFirstSeenTime()<r)&&(r=n.getFirstSeenTime())}),u=(new Date).getTime()-i._Store.SDKConfig.aliasMaxWindow*864e5,f=n.getLastSeenTime()||(new Date).getTime(),r<u&&(r=u,f<r&&i.Logger.warning("Source User has not been seen in the last "+i._Store.SDKConfig.maxAliasWindow+" days, Alias Request will likely fail")),{destinationMpid:t.getMPID(),sourceMpid:n.getMPID(),startTime:r,endTime:f})}catch(e){return i.Logger.error("There was a problem with creating an alias request: "+e),null}}};this.mParticleUser=function(r,f){var e=this;return{getUserIdentities:function(){var f={},t=i._Persistence.getUserIdentities(r);for(var u in t)t.hasOwnProperty(u)&&(f[n.IdentityType.getIdentityName(i._Helpers.parseNumber(u))]=t[u]);return{userIdentities:f}},getMPID:function(){return r},setUserTag:function(n){if(!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(u.ErrorMessages.BadKey);return}this.setUserAttribute(n,null)},removeUserTag:function(n){if(!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(u.ErrorMessages.BadKey);return}this.removeUserAttribute(n)},setUserAttribute:function(n,f){var s,o,l,c,h;if(i._SessionManager.resetSessionTimer(),i._Helpers.canLog()){if(!i._Helpers.Validators.isValidAttributeValue(f)){i.Logger.error(u.ErrorMessages.BadAttribute);return}if(!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(u.ErrorMessages.BadKey);return}i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetUserAttribute,JSON.stringify({key:n,value:f})):(s=i._Persistence.getPersistence(),o=this.getAllUserAttributes(),h=i._Helpers.findKeyInObject(o,n),h?(c=!1,l=o[h],delete o[h]):c=!0,e.sendUserAttributeChangeEvent(n,f,l,c,!1),o[n]=f,s&&s[r]&&(s[r].ua=o,i._Persistence.savePersistence(s,r)),i._Forwarders.initForwarders(e.IdentityAPI.getCurrentUser().getUserIdentities(),i._APIClient.prepareForwardingStats),i._Forwarders.callSetUserAttributeOnForwarders(n,f))}},setUserAttributes:function(n){if(i._SessionManager.resetSessionTimer(),i._Helpers.isObject(n)){if(i._Helpers.canLog())for(var t in n)n.hasOwnProperty(t)&&this.setUserAttribute(t,n[t])}else i.Logger.error("Must pass an object into setUserAttributes. You passed a "+s(n))},removeUserAttribute:function(n){var f,o,s;if(i._SessionManager.resetSessionTimer(),!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(u.ErrorMessages.BadKey);return}i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.RemoveUserAttribute,JSON.stringify({key:n,value:null})):(f=i._Persistence.getPersistence(),o=this.getAllUserAttributes(),e.sendUserAttributeChangeEvent(n,null,o[n],!1,!0),s=i._Helpers.findKeyInObject(o,n),s&&(n=s),delete o[n],f&&f[r]&&(f[r].ua=o,i._Persistence.savePersistence(f,r)),i._Forwarders.initForwarders(e.IdentityAPI.getCurrentUser().getUserIdentities(),i._APIClient.prepareForwardingStats),i._Forwarders.applyToForwarders("removeUserAttribute",n))},setUserAttributeList:function(n,f){var c,o,h,p,a,v,y,l;if(i._SessionManager.resetSessionTimer(),!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(u.ErrorMessages.BadKey);return}if(!Array.isArray(f)){i.Logger.error("The value you passed in to setUserAttributeList must be an array. You passed in a "+(typeof value=="undefined"?"undefined":s(value)));return}if(v=f.slice(),i._Store.webviewBridgeEnabled)i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetUserAttributeList,JSON.stringify({key:n,value:v}));else{if(c=i._Persistence.getPersistence(),o=this.getAllUserAttributes(),y=i._Helpers.findKeyInObject(o,n),y?(p=!1,h=o[y],delete o[y]):p=!0,i._APIClient.shouldEnableBatching()){if(h&&Array.isArray(h)){if(f.length!==h.length)a=!0;else for(l=0;l<f.length;l++)if(h[l]!==f[l]){a=!0;break}}else a=!0;a&&e.sendUserAttributeChangeEvent(n,f,h,p,!1)}o[n]=v;c&&c[r]&&(c[r].ua=o,i._Persistence.savePersistence(c,r));i._Forwarders.initForwarders(e.IdentityAPI.getCurrentUser().getUserIdentities(),i._APIClient.prepareForwardingStats);i._Forwarders.callSetUserAttributeOnForwarders(n,v)}},removeAllUserAttributes:function(){var n,r;if(i._SessionManager.resetSessionTimer(),i._Store.webviewBridgeEnabled)i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.RemoveAllUserAttributes);else if(n=this.getAllUserAttributes(),i._Forwarders.initForwarders(e.IdentityAPI.getCurrentUser().getUserIdentities(),i._APIClient.prepareForwardingStats),n)for(r in n)n.hasOwnProperty(r)&&i._Forwarders.applyToForwarders("removeUserAttribute",r),this.removeUserAttribute(r)},getUserAttributesLists:function(){var n,i={},t;n=this.getAllUserAttributes();for(t in n)n.hasOwnProperty(t)&&Array.isArray(n[t])&&(i[t]=n[t].slice());return i},getAllUserAttributes:function(){var u={},n=i._Persistence.getAllUserAttributes(r),t;if(n)for(t in n)n.hasOwnProperty(t)&&(u[t]=Array.isArray(n[t])?n[t].slice():n[t]);return u},getCart:function(){return i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart() will be removed in future releases"),e.mParticleUserCart(r)},getConsentState:function(){return i._Persistence.getConsentState(r)},setConsentState:function(n){i._Persistence.saveUserConsentStateToCookies(r,n);i._Forwarders.initForwarders(this.getUserIdentities().userIdentities,i._APIClient.prepareForwardingStats)},isLoggedIn:function(){return f},getLastSeenTime:function(){return i._Persistence.getLastSeenTime(r)},getFirstSeenTime:function(){return i._Persistence.getFirstSeenTime(r)}}};this.mParticleUserCart=function(r){return{add:function(u,f){var s,e,o,h;i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart().add() will be removed in future releases");o=Array.isArray(u)?u.slice():[u];o.forEach(function(n){n.Attributes=i._Helpers.sanitizeAttributes(n.Attributes)});i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.AddToCart,JSON.stringify(o)):(i._SessionManager.resetSessionTimer(),e=i._Persistence.getUserProductsFromLS(r),e=e.concat(o),f===!0&&i._Events.logProductActionEvent(n.ProductActionType.AddToCart,o),h={},h[r]={cp:e},e.length>i._Store.SDKConfig.maxProducts&&(i.Logger.verbose("The cart contains "+e.length+" items. Only "+i._Store.SDKConfig.maxProducts+" can currently be saved in cookies."),e=e.slice(-i._Store.SDKConfig.maxProducts)),s=i._Persistence.getAllUserProductsFromLS(),s[r].cp=e,i._Persistence.setCartProducts(s))},remove:function(u,f){var s,e,o,h,c;i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart().remove() will be removed in future releases");o=-1;h=null;i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.RemoveFromCart,JSON.stringify(u)):(i._SessionManager.resetSessionTimer(),e=i._Persistence.getUserProductsFromLS(r),e&&(e.forEach(function(n,t){n.Sku===u.Sku&&(o=t,h=n)}),o>-1&&(e.splice(o,1),f===!0&&i._Events.logProductActionEvent(n.ProductActionType.RemoveFromCart,h))),c={},c[r]={cp:e},s=i._Persistence.getAllUserProductsFromLS(),s[r].cp=e,i._Persistence.setCartProducts(s))},clear:function(){i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart().clear() will be removed in future releases");var n;i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.ClearCart):(i._SessionManager.resetSessionTimer(),n=i._Persistence.getAllUserProductsFromLS(),n&&n[r]&&n[r].cp&&(n[r].cp=[],n[r].cp=[],i._Persistence.setCartProducts(n)))},getCartProducts:function(){return i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart().getCartProducts() will be removed in future releases"),i._Persistence.getCartProducts(r)}}};this.parseIdentityResponse=function(t,u,e,o,s){var c=i.Identity.getCurrentUser(),l,h,v,y={},w=c?c.getUserIdentities().userIdentities:{},p,a,b,d;for(p in w)y[n.IdentityType.getIdentityType(p)]=w[p];a={};i._Store.identityCallInFlight=!1;try{if(i.Logger.verbose('Parsing "'+s+'" identity response from server'),t.responseText&&(h=JSON.parse(t.responseText),r.sendUserIdentityChange(o,s,h.mpid),h.hasOwnProperty("is_logged_in")&&(i._Store.isLoggedIn=h.is_logged_in)),t.status===200){if(s==="modify"?(a=i._Identity.IdentityRequest.modifyUserIdentities(y,o.userIdentities),i._Persistence.saveUserIdentitiesToPersistence(c.getMPID(),a)):(h=JSON.parse(t.responseText),i.Logger.verbose("Successfully parsed Identity Response"),(!c||c.getMPID()&&h.mpid&&h.mpid!==c.getMPID())&&(i._Store.mpid=h.mpid,c&&i._Persistence.setLastSeenTime(u),i._Persistence.setFirstSeenTime(h.mpid)),s==="identify"&&c&&h.mpid===c.getMPID()&&i._Persistence.setFirstSeenTime(h.mpid),v=i._Store.currentSessionMPIDs.indexOf(h.mpid),i._Store.sessionId&&h.mpid&&u!==h.mpid&&v<0&&i._Store.currentSessionMPIDs.push(h.mpid),v>-1&&(i._Store.currentSessionMPIDs=i._Store.currentSessionMPIDs.slice(0,v).concat(i._Store.currentSessionMPIDs.slice(v+1,i._Store.currentSessionMPIDs.length)),i._Store.currentSessionMPIDs.push(h.mpid)),i._Persistence.saveUserIdentitiesToPersistence(h.mpid,a),i._CookieSyncManager.attemptCookieSync(u,h.mpid),r.checkIdentitySwap(u,h.mpid,i._Store.currentSessionMPIDs),Object.keys(i._Store.migrationData).length?(a=i._Store.migrationData.userIdentities||{},b=i._Store.migrationData.userAttributes||{},i._Persistence.saveUserAttributesToPersistence(h.mpid,b)):o&&o.userIdentities&&Object.keys(o.userIdentities).length&&(a=i._Identity.IdentityRequest.modifyUserIdentities(y,o.userIdentities)),i._Persistence.saveUserIdentitiesToPersistence(h.mpid,a),i._Persistence.update(),i._Persistence.findPrevCookiesBasedOnUI(o),i._Store.context=h.context||i._Store.context),l=i.Identity.getCurrentUser(),o&&o.onUserAlias&&i._Helpers.Validators.isFunction(o.onUserAlias))try{i.Logger.warning("Deprecated function onUserAlias will be removed in future releases");o.onUserAlias(c,l)}catch(k){i.Logger.error("There was an error with your onUserAlias function - "+k)}d=i._Persistence.getPersistence();l&&(i._Persistence.storeDataInMemory(d,l.getMPID()),c&&l.getMPID()===c.getMPID()&&c.isLoggedIn()===l.isLoggedIn()||i._Forwarders.initForwarders(l.getUserIdentities().userIdentities,i._APIClient.prepareForwardingStats),i._Forwarders.setForwarderUserIdentities(l.getUserIdentities().userIdentities),i._Forwarders.setForwarderOnIdentityComplete(l,s),i._Forwarders.setForwarderOnUserIdentified(l,s))}e?t.status===0?i._Helpers.invokeCallback(e,f.noHttpCoverage,h||null,l):i._Helpers.invokeCallback(e,t.status,h||null,l):h&&h.errors&&h.errors.length&&i.Logger.error("Received HTTP response code of "+t.status+" - "+h.errors[0].message);i._APIClient.processQueuedEvents()}catch(k){e&&i._Helpers.invokeCallback(e,t.status,h||null);i.Logger.error("Error parsing JSON response from Identity server: "+k)}};this.sendUserIdentityChange=function(n,t,u){var o,s,h,e,f,c;if(i._APIClient.shouldEnableBatching()&&(u||t==="modify")){if(o=t==="modify"?this.IdentityAPI.getCurrentUser():this.IdentityAPI.getUser(u),e=n.userIdentities,o)s=o.getUserIdentities()?o.getUserIdentities().userIdentities:{};else{for(f in e)h=this.createUserIdentityChange(f,e[f],null,!0),i._APIClient.sendEventToServer(h);return}for(f in e)s[f]!==e[f]&&(c=!s[f],h=r.createUserIdentityChange(f,e[f],s[f],c),i._APIClient.sendEventToServer(h))}};this.createUserIdentityChange=function(t,r,u,f){return i._ServerModel.createEventObject({messageType:n.MessageType.UserIdentityChange,userIdentityChanges:{New:{IdentityType:t,Identity:r,CreatedThisBatch:f},Old:{IdentityType:t,Identity:u,CreatedThisBatch:!1}}})};this.sendUserAttributeChangeEvent=function(n,t,u,f,e){if(i._APIClient.shouldEnableBatching()){var o=r.createUserAttributeChange(n,t,u,f,e);o&&i._APIClient.sendEventToServer(o)}};this.createUserAttributeChange=function(t,r,u,f,e){u||(u=null);var o;return r!==u&&(o=i._ServerModel.createEventObject({messageType:n.MessageType.UserAttributeChange,userAttributeChanges:{UserAttributeName:t,New:r,Old:u||null,Deleted:e,IsNewAttribute:f}})),o}}function gf(n){var i=this,t="data_sale_opt_out";this.createPrivacyConsent=function(t,i,r,u,f){return typeof t!="boolean"?(n.Logger.error("Consented boolean is required when constructing a Consent object."),null):i&&isNaN(i)?(n.Logger.error("Timestamp must be a valid number when constructing a Consent object."),null):r&&typeof r!="string"?(n.Logger.error("Document must be a valid string when constructing a Consent object."),null):u&&typeof u!="string"?(n.Logger.error("Location must be a valid string when constructing a Consent object."),null):f&&typeof f!="string"?(n.Logger.error("Hardware ID must be a valid string when constructing a Consent object."),null):{Consented:t,Timestamp:i||Date.now(),ConsentDocument:r,Location:u,HardwareId:f}};this.ConsentSerialization={toMinifiedJsonObject:function(n){var i={},e,f,u,r;if(n){if(e=n.getGDPRConsentState(),e){i.gdpr={};for(f in e)e.hasOwnProperty(f)&&(u=e[f],i.gdpr[f]={},typeof u.Consented=="boolean"&&(i.gdpr[f].c=u.Consented),typeof u.Timestamp=="number"&&(i.gdpr[f].ts=u.Timestamp),typeof u.ConsentDocument=="string"&&(i.gdpr[f].d=u.ConsentDocument),typeof u.Location=="string"&&(i.gdpr[f].l=u.Location),typeof u.HardwareId=="string"&&(i.gdpr[f].h=u.HardwareId))}r=n.getCCPAConsentState();r&&(i.ccpa={},i.ccpa[t]={},typeof r.Consented=="boolean"&&(i.ccpa[t].c=r.Consented),typeof r.Timestamp=="number"&&(i.ccpa[t].ts=r.Timestamp),typeof r.ConsentDocument=="string"&&(i.ccpa[t].d=r.ConsentDocument),typeof r.Location=="string"&&(i.ccpa[t].l=r.Location),typeof r.HardwareId=="string"&&(i.ccpa[t].h=r.HardwareId))}return i},fromMinifiedJsonObject:function(n){var u=i.createConsentState(),r,f,e;if(n.gdpr)for(r in n.gdpr)n.gdpr.hasOwnProperty(r)&&(f=i.createPrivacyConsent(n.gdpr[r].c,n.gdpr[r].ts,n.gdpr[r].d,n.gdpr[r].l,n.gdpr[r].h),u.addGDPRConsentState(r,f));return n.ccpa&&n.ccpa.hasOwnProperty(t)&&(e=i.createPrivacyConsent(n.ccpa[t].c,n.ccpa[t].ts,n.ccpa[t].d,n.ccpa[t].l,n.ccpa[t].h),u.setCCPAConsentState(e)),u}};this.createConsentState=function(r){function e(n){if(typeof n!="string")return null;var t=n.trim();return t.length?t.toLowerCase():null}function o(t,r){var o=e(t),f;return o?n._Helpers.isObject(r)?(f=i.createPrivacyConsent(r.Consented,r.Timestamp,r.ConsentDocument,r.Location,r.HardwareId),f&&(u[o]=f),this):(n.Logger.error("Invoked with a bad or empty consent object."),this):(n.Logger.error("Purpose must be a string."),this)}function s(t){if(t){if(n._Helpers.isObject(t)){u={};for(var i in t)t.hasOwnProperty(i)&&o(i,t[i])}}else u={};return this}function l(n){var t=e(n);return t?(delete u[t],this):this}function a(){return n._Helpers.extend({},u)}function h(r){if(!n._Helpers.isObject(r))return n.Logger.error("Invoked with a bad or empty CCPA consent object."),this;var u=i.createPrivacyConsent(r.Consented,r.Timestamp,r.ConsentDocument,r.Location,r.HardwareId);return u&&(f[t]=u),this}function v(){return f[t]}function c(){return delete f[t],this}function y(){return n.Logger.warning("removeCCPAState is deprecated and will be removed in a future release; use removeCCPAConsentState instead"),c()}var u={},f={};return r&&(s(r.getGDPRConsentState()),h(r.getCCPAConsentState())),{setGDPRConsentState:s,addGDPRConsentState:o,setCCPAConsentState:h,getCCPAConsentState:v,getGDPRConsentState:a,removeGDPRConsentState:l,removeCCPAState:y,removeCCPAConsentState:c}}}function gi(i){var r=this;this._instanceName=i;this._NativeSdkHelpers=new ff(this);this._Migrations=new wf(this);this._SessionManager=new of(this);this._Persistence=new af(this);this._Helpers=new uf(this);this._Forwarders=new bf(this);this._APIClient=new nf(this);this._Events=new vf(this);this._CookieSyncManager=new ef(this);this._ServerModel=new ki(this);this._Ecommerce=new sf(this);this._ForwardingStatsUploader=new kf(this);this._Consent=new gf(this);this._preInit={readyQueue:[],integrationDelays:{},forwarderConstructors:[]};this.IdentityType=n.IdentityType;this.EventType=n.EventType;this.CommerceEventType=n.CommerceEventType;this.PromotionType=n.PromotionActionType;this.ProductActionType=n.ProductActionType;this._Identity=new df(this);this.Identity=this._Identity.IdentityAPI;this.generateHash=this._Helpers.generateHash;this.getDeviceId=this._Persistence.getDeviceId;window.mParticle&&window.mParticle.config&&window.mParticle.config.hasOwnProperty("rq")&&(this._preInit.readyQueue=window.mParticle.config.rq);this.init=function(n,t){if(t||window.console.warn("You did not pass a config object to init(). mParticle will not initialize properly"),ne(this,n,t),t)!t.hasOwnProperty("requestConfig")||t.requestConfig?r._APIClient.getSDKConfiguration(n,t,nr,this):nr(n,t,this);else{window.console.error("No config available on the window, please pass a config object to mParticle.init()");return}};this.setLogLevel=function(n){r.Logger.setLogLevel(n)};this.reset=function(n){n._Persistence.resetPersistence();n._Store&&delete n._Store};this._resetForTests=function(n,t,i){i._Store&&delete i._Store;i._Store=new pi(n,i);i._Store.isLocalStorageAvailable=i._Persistence.determineLocalStorageAvailability(window.localStorage);i._Events.stopTracking();t||i._Persistence.resetPersistence();i._Persistence.forwardingStatsBatches.uploadsTable={};i._Persistence.forwardingStatsBatches.forwardingStatsEventQueue=[];i._preInit={readyQueue:[],pixelConfigurations:[],integrationDelays:{},forwarderConstructors:[],isDevelopmentMode:!1}};this.ready=function(n){r._Store.isInitialized&&typeof n=="function"?n():r._preInit.readyQueue.push(n)};this.getVersion=function(){return t.sdkVersion};this.setAppVersion=function(n){r._Store.SDKConfig.appVersion=n;r._Persistence.update()};this.getAppName=function(){return r._Store.SDKConfig.appName};this.setAppName=function(n){r._Store.SDKConfig.appName=n};this.getAppVersion=function(){return r._Store.SDKConfig.appVersion};this.stopTrackingLocation=function(){r._SessionManager.resetSessionTimer();r._Events.stopTracking()};this.startTrackingLocation=function(n){r._Helpers.Validators.isFunction(n)||r.Logger.warning("Warning: Location tracking is triggered, but not including a callback into the `startTrackingLocation` may result in events logged too quickly and not being associated with a location.");r._SessionManager.resetSessionTimer();r._Events.startTracking(n)};this.setPosition=function(n,t){r._SessionManager.resetSessionTimer();typeof n=="number"&&typeof t=="number"?r._Store.currentPosition={lat:n,lng:t}:r.Logger.error("Position latitude and/or longitude must both be of type number")};this.startNewSession=function(){r._SessionManager.startNewSession()};this.endSession=function(){r._SessionManager.endSession(!0)};this.logBaseEvent=function(t){if(!r._Store.isInitialized){r.ready(function(){r.logBaseEvent(t)});return}if(r._SessionManager.resetSessionTimer(),typeof t.name!="string"){r.Logger.error(w.ErrorMessages.EventNameInvalidType);return}if(t.eventType||(t.eventType=n.EventType.Unknown),!r._Helpers.canLog()){r.Logger.error(w.ErrorMessages.LoggingDisabled);return}r._Events.logEvent(t)};this.logEvent=function(t,i,u,f){if(!r._Store.isInitialized){r.ready(function(){r.logEvent(t,i,u,f)});return}if(r._SessionManager.resetSessionTimer(),typeof t!="string"){r.Logger.error(w.ErrorMessages.EventNameInvalidType);return}if(i||(i=n.EventType.Unknown),!r._Helpers.isEventType(i)){r.Logger.error("Invalid event type: "+i+", must be one of: \n"+JSON.stringify(n.EventType));return}if(!r._Helpers.canLog()){r.Logger.error(w.ErrorMessages.LoggingDisabled);return}r._Events.logEvent({messageType:n.MessageType.PageEvent,name:t,data:u,eventType:i,customFlags:f})};this.logError=function(t,i){var u,f,e;if(!r._Store.isInitialized){r.ready(function(){r.logError(t,i)});return}if(r._SessionManager.resetSessionTimer(),t){if(typeof t=="string"&&(t={message:t}),u={m:t.message?t.message:t,s:"Error",t:t.stack},i){f=r._Helpers.sanitizeAttributes(i);for(e in f)u[e]=f[e]}r._Events.logEvent({messageType:n.MessageType.CrashReport,name:t.name?t.name:"Error",data:u,eventType:n.EventType.Other})}};this.logLink=function(n,t,i,u){r._Events.addEventHandler("click",n,t,u,i)};this.logForm=function(n,t,i,u){r._Events.addEventHandler("submit",n,t,u,i)};this.logPageView=function(t,i,u){if(!r._Store.isInitialized){r.ready(function(){r.logPageView(t,i,u)});return}if(r._SessionManager.resetSessionTimer(),r._Helpers.canLog()){if(r._Helpers.Validators.isStringOrNumber(t)||(t="PageView"),i){if(!r._Helpers.isObject(i)){r.Logger.error("The attributes argument must be an object. A "+s(i)+" was entered. Please correct and retry.");return}}else i={hostname:window.location.hostname,title:window.document.title};if(u&&!r._Helpers.isObject(u)){r.Logger.error("The customFlags argument must be an object. A "+s(u)+" was entered. Please correct and retry.");return}}r._Events.logEvent({messageType:n.MessageType.PageView,name:t,data:i,eventType:n.EventType.Unknown,customFlags:u})};this.upload=function(){r._Helpers.canLog()&&(r._Store.webviewBridgeEnabled?r._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Upload):r._APIClient.uploader.prepareAndUpload(!1,!1))};this.Consent={createCCPAConsent:r._Consent.createPrivacyConsent,createGDPRConsent:r._Consent.createPrivacyConsent,createConsentState:r._Consent.createConsentState};this.eCommerce={Cart:{add:function(n,t){r.Logger.warning("Deprecated function eCommerce.Cart.add() will be removed in future releases");var i,u=r.Identity.getCurrentUser();u&&(i=u.getMPID());r._Identity.mParticleUserCart(i).add(n,t)},remove:function(n,t){r.Logger.warning("Deprecated function eCommerce.Cart.remove() will be removed in future releases");var i,u=r.Identity.getCurrentUser();u&&(i=u.getMPID());r._Identity.mParticleUserCart(i).remove(n,t)},clear:function(){r.Logger.warning("Deprecated function eCommerce.Cart.clear() will be removed in future releases");var n,t=r.Identity.getCurrentUser();t&&(n=t.getMPID());r._Identity.mParticleUserCart(n).clear()}},setCurrencyCode:function(n){if(!r._Store.isInitialized){r.ready(function(){r.setCurrencyCode(n)});return}if(typeof n!="string"){r.Logger.error("Code must be a string");return}r._SessionManager.resetSessionTimer();r._Store.currencyCode=n},createProduct:function(n,t,i,u,f,e,o,s,h,c){return r._Ecommerce.createProduct(n,t,i,u,f,e,o,s,h,c)},createPromotion:function(n,t,i,u){return r._Ecommerce.createPromotion(n,t,i,u)},createImpression:function(n,t){return r._Ecommerce.createImpression(n,t)},createTransactionAttributes:function(n,t,i,u,f,e){return r._Ecommerce.createTransactionAttributes(n,t,i,u,f,e)},logCheckout:function(n,t,i,u){if(!r._Store.isInitialized){r.ready(function(){r.eCommerce.logCheckout(n,t,i,u)});return}r._SessionManager.resetSessionTimer();r._Events.logCheckoutEvent(n,t,i,u)},logProductAction:function(n,t,i,u){if(!r._Store.isInitialized){r.ready(function(){r.eCommerce.logProductAction(n,t,i,u)});return}r._SessionManager.resetSessionTimer();r._Events.logProductActionEvent(n,t,i,u)},logPurchase:function(n,t,i,u,f){if(!r._Store.isInitialized){r.ready(function(){r.eCommerce.logPurchase(n,t,i,u,f)});return}if(!n||!t){r.Logger.error(w.ErrorMessages.BadLogPurchase);return}r._SessionManager.resetSessionTimer();r._Events.logPurchaseEvent(n,t,u,f)},logPromotion:function(n,t,i,u){if(!r._Store.isInitialized){r.ready(function(){r.eCommerce.logPromotion(n,t,i,u)});return}r._SessionManager.resetSessionTimer();r._Events.logPromotionEvent(n,t,i,u)},logImpression:function(n,t,i){if(!r._Store.isInitialized){r.ready(function(){r.eCommerce.logImpression(n,t,i)});return}r._SessionManager.resetSessionTimer();r._Events.logImpressionEvent(n,t,i)},logRefund:function(n,t,i,u,f){if(!r._Store.isInitialized){r.ready(function(){r.eCommerce.logRefund(n,t,i,u,f)});return}r._SessionManager.resetSessionTimer();r._Events.logRefundEvent(n,t,u,f)},expandCommerceEvent:function(n){return r._Ecommerce.expandCommerceEvent(n)}};this.setSessionAttribute=function(n,i){if(!r._Store.isInitialized){r.ready(function(){r.setSessionAttribute(n,i)});return}if(r._Helpers.canLog()){if(!r._Helpers.Validators.isValidAttributeValue(i)){r.Logger.error(w.ErrorMessages.BadAttribute);return}if(!r._Helpers.Validators.isValidKeyValue(n)){r.Logger.error(w.ErrorMessages.BadKey);return}if(r._Store.webviewBridgeEnabled)r._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetSessionAttribute,JSON.stringify({key:n,value:i}));else{var u=r._Helpers.findKeyInObject(r._Store.sessionAttributes,n);u&&(n=u);r._Store.sessionAttributes[n]=i;r._Persistence.update();r._Forwarders.applyToForwarders("setSessionAttribute",[n,i])}}};this.setOptOut=function(n){if(!r._Store.isInitialized){r.ready(function(){r.setOptOut(n)});return}r._SessionManager.resetSessionTimer();r._Store.isEnabled=!n;r._Events.logOptOut();r._Persistence.update();r._Store.activeForwarders.length&&r._Store.activeForwarders.forEach(function(t){if(t.setOptOut){var i=t.setOptOut(n);i&&r.Logger.verbose(i)}})};this.setIntegrationAttribute=function(n,t){if(!r._Store.isInitialized){r.ready(function(){r.setIntegrationAttribute(n,t)});return}if(typeof n!="number"){r.Logger.error("integrationId must be a number");return}if(t===null)r._Store.integrationAttributes[n]={};else if(r._Helpers.isObject(t))if(Object.keys(t).length===0)r._Store.integrationAttributes[n]={};else for(var i in t)if(typeof i=="string")if(typeof t[i]=="string")r._Helpers.isObject(r._Store.integrationAttributes[n])?r._Store.integrationAttributes[n][i]=t[i]:(r._Store.integrationAttributes[n]={},r._Store.integrationAttributes[n][i]=t[i]);else{r.Logger.error("Values for integration attributes must be strings. You entered a "+s(t[i]));continue}else{r.Logger.error("Keys must be strings, you entered a "+s(i));continue}else{r.Logger.error("Attrs must be an object with keys and values. You entered a "+s(t));return}r._Persistence.update()};this.getIntegrationAttributes=function(n){return r._Store.integrationAttributes[n]?r._Store.integrationAttributes[n]:{}};this.addForwarder=function(n){r._preInit.forwarderConstructors.push(n)};this.configurePixel=function(n){r._Forwarders.configurePixel(n)};this._getActiveForwarders=function(){return r._Store.activeForwarders};this._getIntegrationDelays=function(){return r._preInit.integrationDelays};this._setIntegrationDelay=function(n,t){r._preInit.integrationDelays[n]=t}}function nr(n,i,r){var u,o,f,e;if(i.flags&&(i.flags.hasOwnProperty(t.FeatureFlags.EventsV3)&&(r._Store.SDKConfig.flags[t.FeatureFlags.EventsV3]=i.flags[t.FeatureFlags.EventsV3]),i.flags.hasOwnProperty(t.FeatureFlags.EventBatchingIntervalMillis)&&(r._Store.SDKConfig.flags[t.FeatureFlags.EventBatchingIntervalMillis]=i.flags[t.FeatureFlags.EventBatchingIntervalMillis])),r._Store.storageName=r._Helpers.createMainStorageName(i.workspaceToken),r._Store.prodStorageName=r._Helpers.createProductStorageName(i.workspaceToken),i.hasOwnProperty("workspaceToken")?r._Store.SDKConfig.workspaceToken=i.workspaceToken:r.Logger.warning("You should have a workspaceToken on your config object for security purposes."),i.hasOwnProperty("requiredWebviewBridgeName")?r._Store.SDKConfig.requiredWebviewBridgeName=i.requiredWebviewBridgeName:i.hasOwnProperty("workspaceToken")&&(r._Store.SDKConfig.requiredWebviewBridgeName=i.workspaceToken),r._Store.webviewBridgeEnabled=r._NativeSdkHelpers.isWebviewEnabled(r._Store.SDKConfig.requiredWebviewBridgeName,r._Store.SDKConfig.minWebviewBridgeVersion),r._Store.configurationLoaded=!0,r._Store.webviewBridgeEnabled||(r._Migrations.migrate(),r._Persistence.initializeStorage()),r._Store.webviewBridgeEnabled)r._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetSessionAttribute,JSON.stringify({key:"$src_env",value:"webview"})),n&&r._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetSessionAttribute,JSON.stringify({key:"$src_key",value:n}));else{if(r._Helpers.isObject(r._Store.SDKConfig.identifyRequest)&&r._Helpers.isObject(r._Store.SDKConfig.identifyRequest.userIdentities)&&Object.keys(r._Store.SDKConfig.identifyRequest.userIdentities).length===0||!r._Store.SDKConfig.identifyRequest){if(o={},u=r.Identity.getCurrentUser(),u){f=u.getUserIdentities().userIdentities||{};for(e in f)f.hasOwnProperty(e)&&(o[e]=f[e])}r._Store.SDKConfig.identifyRequest={userIdentities:o}}r._Store.migratingToIDSyncCookies&&(r.Identity.identify(r._Store.SDKConfig.identifyRequest,r._Store.SDKConfig.identityCallback),r._Store.migratingToIDSyncCookies=!1);u=r.Identity.getCurrentUser();r._Helpers.getFeatureFlag(t.FeatureFlags.ReportBatching)&&r._ForwardingStatsUploader.startForwardingStatsTimer();r._Forwarders.processForwarders(i,r._APIClient.prepareForwardingStats);!r._Store.identifyCalled&&r._Store.SDKConfig.identityCallback&&u&&u.getMPID()&&r._Store.SDKConfig.identityCallback({httpCode:di.activeSession,getUser:function(){return r._Identity.mParticleUser(u.getMPID())},getPreviousUser:function(){var t=r.Identity.getUsers(),n=t.shift();return n&&u&&n.getMPID()===u.getMPID()&&(n=t.shift()),n||null},body:{mpid:u.getMPID(),is_logged_in:r._Store.isLoggedIn,matched_identities:u.getUserIdentities().userIdentities,context:null,is_ephemeral:!1}});r._SessionManager.initialize();r._Events.logAST()}r._Store.isInitialized=!0;r._preInit.readyQueue&&r._preInit.readyQueue.length&&(r._preInit.readyQueue.forEach(function(n){r._Helpers.Validators.isFunction(n)?n():Array.isArray(n)&&te(n,r)}),r._preInit.readyQueue=[]);r._Store.isFirstRun&&(r._Store.isFirstRun=!1)}function ne(n,t,i){n.Logger=new cf(i);n._Store=new pi(i,n);window.mParticle.Store=n._Store;n._Store.devToken=t||null;n.Logger.verbose(w.InformationMessages.StartingInitialization);try{n._Store.isLocalStorageAvailable=n._Persistence.determineLocalStorageAvailability(window.localStorage)}catch(r){n.Logger.warning("localStorage is not available, using cookies if avaialble");n._Store.isLocalStorageAvailable=!1}}function te(n,t){var i=n,e=i.splice(0,1)[0],f,r,u,o;if(mParticle[i[0]])mParticle[e].apply(this,i);else{f=e.split(".");try{for(r=mParticle,u=0;u<f.length;u++)o=f[u],r=r[o];r.apply(this,i)}catch(s){t.Logger.verbose("Unable to compute proper mParticle function "+s)}}}function ie(){var i=this;this.Store={};this._instances={};this.IdentityType=n.IdentityType;this.EventType=n.EventType;this.CommerceEventType=n.CommerceEventType;this.PromotionType=n.PromotionActionType;this.ProductActionType=n.ProductActionType;this.isIOS=window.mParticle&&window.mParticle.isIOS?window.mParticle.isIOS:!1;this.config=window.mParticle&&window.mParticle.config?window.mParticle.config:{};this.init=function(n,r,u){!r&&window.mParticle&&window.mParticle.config&&(window.console.warn("You did not pass a config object to mParticle.init(). Attempting to use the window.mParticle.config if it exists. Please note that in a future release, this may not work and mParticle will not initialize properly"),r=window.mParticle?window.mParticle.config:{});u=(!u||u.length===0?t.DefaultInstance:u).toLowerCase();var f=i._instances[u];f===undefined&&(f=new gi(n,r,u),i._instances[u]=f);f.init(n,r,u)};this.getInstance=function(n){var r;return n?(r=i._instances[n.toLowerCase()],!r)?(console.log("You tried to initialize an instance named "+n+". This instance does not exist. Check your instance name or initialize a new instance with this name before calling it."),null):r:(n=t.DefaultInstance,r=i._instances[n],r||(r=new gi(n),i._instances[t.DefaultInstance]=r),r)};this.getDeviceId=function(){return i.getInstance().getDeviceId()};this.startNewSession=function(){i.getInstance().startNewSession()};this.endSession=function(){i.getInstance().endSession()};this.setLogLevel=function(n){i.getInstance().setLogLevel(n)};this.ready=function(n){i.getInstance().ready(n)};this.setAppVersion=function(n){i.getInstance().setAppVersion(n)};this.getAppName=function(){return i.getInstance().getAppName()};this.setAppName=function(n){i.getInstance().setAppName(n)};this.getAppVersion=function(){return i.getInstance().getAppVersion()};this.stopTrackingLocation=function(){i.getInstance().stopTrackingLocation()};this.startTrackingLocation=function(n){i.getInstance().startTrackingLocation(n)};this.setPosition=function(n,t){i.getInstance().setPosition(n,t)};this.startNewSession=function(){i.getInstance().startNewSession()};this.endSession=function(){i.getInstance().endSession()};this.logBaseEvent=function(n){i.getInstance().logBaseEvent(n)};this.logEvent=function(n,t,r,u){i.getInstance().logEvent(n,t,r,u)};this.logError=function(n,t){i.getInstance().logError(n,t)};this.logLink=function(n,t,r,u){i.getInstance().logLink(n,t,r,u)};this.logForm=function(n,t,r,u){i.getInstance().logForm(n,t,r,u)};this.logPageView=function(n,t,r){i.getInstance().logPageView(n,t,r)};this.upload=function(){i.getInstance().upload()};this.eCommerce={Cart:{add:function(n,t){i.getInstance().eCommerce.Cart.add(n,t)},remove:function(n,t){i.getInstance().eCommerce.Cart.remove(n,t)},clear:function(){i.getInstance().eCommerce.Cart.clear()}},setCurrencyCode:function(n){i.getInstance().eCommerce.setCurrencyCode(n)},createProduct:function(n,t,r,u,f,e,o,s,h,c){return i.getInstance().eCommerce.createProduct(n,t,r,u,f,e,o,s,h,c)},createPromotion:function(n,t,r,u){return i.getInstance().eCommerce.createPromotion(n,t,r,u)},createImpression:function(n,t){return i.getInstance().eCommerce.createImpression(n,t)},createTransactionAttributes:function(n,t,r,u,f,e){return i.getInstance().eCommerce.createTransactionAttributes(n,t,r,u,f,e)},logCheckout:function(n,t,r,u){i.getInstance().eCommerce.logCheckout(n,t,r,u)},logProductAction:function(n,t,r,u){i.getInstance().eCommerce.logProductAction(n,t,r,u)},logPurchase:function(n,t,r,u,f){i.getInstance().eCommerce.logPurchase(n,t,r,u,f)},logPromotion:function(n,t,r,u){i.getInstance().eCommerce.logPromotion(n,t,r,u)},logImpression:function(n,t,r){i.getInstance().eCommerce.logImpression(n,t,r)},logRefund:function(n,t,r,u,f){i.getInstance().eCommerce.logRefund(n,t,r,u,f)},expandCommerceEvent:function(n){return i.getInstance().eCommerce.expandCommerceEvent(n)}};this.setSessionAttribute=function(n,t){i.getInstance().setSessionAttribute(n,t)};this.setOptOut=function(n){i.getInstance().setOptOut(n)};this.setIntegrationAttribute=function(n,t){i.getInstance().setIntegrationAttribute(n,t)};this.getIntegrationAttributes=function(n){return i.getInstance().getIntegrationAttributes(n)};this.Identity={HTTPCodes:i.getInstance().Identity.HTTPCodes,aliasUsers:function(n,t){i.getInstance().Identity.aliasUsers(n,t)},createAliasRequest:function(n,t){return i.getInstance().Identity.createAliasRequest(n,t)},getCurrentUser:function(){return i.getInstance().Identity.getCurrentUser()},getUser:function(n){return i.getInstance().Identity.getUser(n)},getUsers:function(){return i.getInstance().Identity.getUsers()},identify:function(n,t){i.getInstance().Identity.identify(n,t)},login:function(n,t){i.getInstance().Identity.login(n,t)},logout:function(n,t){i.getInstance().Identity.logout(n,t)},modify:function(n,t){i.getInstance().Identity.modify(n,t)}};this.sessionManager={getSession:function(){return i.getInstance()._SessionManager.getSession()}};this.Consent={createConsentState:function(){return i.getInstance().Consent.createConsentState()},createGDPRConsent:function(n,t,r,u,f){return i.getInstance().Consent.createGDPRConsent(n,t,r,u,f)},createCCPAConsent:function(n,t,r,u,f){return i.getInstance().Consent.createGDPRConsent(n,t,r,u,f)}};this.reset=function(){i.getInstance().reset(i.getInstance())};this._resetForTests=function(n,t){typeof t=="boolean"?i.getInstance()._resetForTests(n,t,i.getInstance()):i.getInstance()._resetForTests(n,!1,i.getInstance())};this.configurePixel=function(n){i.getInstance().configurePixel(n)};this._setIntegrationDelay=function(n,t){i.getInstance()._setIntegrationDelay(n,t)};this._getIntegrationDelays=function(){return i.getInstance()._getIntegrationDelays()};this.getVersion=function(){return i.getInstance().getVersion()};this.generateHash=function(n){return i.getInstance().generateHash(n)};this.addForwarder=function(n){i.getInstance().addForwarder(n)};this._getActiveForwarders=function(){return i.getInstance()._getActiveForwarders()}}var l={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(n){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(n)))}catch(t){window.console.log("Error encoding cookie values into Base64:"+t)}return this._encode(n)},_encode:function(n){var f="",e,t,i,s,h,o,r,u=0;for(n=ni.encode(n);u<n.length;)e=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),s=e>>2,h=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),f=f+l._keyStr.charAt(s)+l._keyStr.charAt(h)+l._keyStr.charAt(o)+l._keyStr.charAt(r);return f},decode:function(n){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(n)))}catch(t){}return l._decode(n)},_decode:function(n){var t="",e,o,s,h,u,r,f,i=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<n.length;)h=l._keyStr.indexOf(n.charAt(i++)),u=l._keyStr.indexOf(n.charAt(i++)),r=l._keyStr.indexOf(n.charAt(i++)),f=l._keyStr.indexOf(n.charAt(i++)),e=h<<2|u>>4,o=(u&15)<<4|r>>2,s=(r&3)<<6|f,t=t+String.fromCharCode(e),r!==64&&(t=t+String.fromCharCode(o)),f!==64&&(t=t+String.fromCharCode(s));return ni.decode(t)}},ni={encode:function(n){for(var t,i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},decode:function(n){for(var r="",t=0,i=0,u=0,f=0;t<n.length;)i=n.charCodeAt(t),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(u=n.charCodeAt(t+1),r+=String.fromCharCode((i&31)<<6|u&63),t+=2):(u=n.charCodeAt(t+1),f=n.charCodeAt(t+2),r+=String.fromCharCode((i&15)<<12|(u&63)<<6|f&63),t+=3);return r}},g={forEach:function(n,t){var u,i,r,f,e;if(this==null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(u=t),i=0;i<f;)i in r&&(e=r[i],n.call(u,e,i,r)),i++},map:function(n,t){var e,u,i,r,f,o,s;if(this===null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(e=t),u=new Array(f),i=0;i<f;)i in r&&(o=r[i],s=n.call(e,o,i,r),u[i]=s),i++;return u},filter:function(n){var i,f,r,e,t,u;if(this===void 0||this===null)throw new TypeError;if(i=Object(this),f=i.length>>>0,typeof n!="function")throw new TypeError;for(r=[],e=arguments.length>=2?arguments[1]:void 0,t=0;t<f;t++)t in i&&(u=i[t],n.call(e,u,t,i)&&r.push(u));return r},isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"},Base64:l},h=ir,ti={SessionStart:1,SessionEnd:2,PageView:3,PageEvent:4,CrashReport:5,OptOut:6,AppStateTransition:10,Profile:14,Commerce:16,Media:20,UserAttributeChange:17,UserIdentityChange:18},rr=h({},ti.Commerce,1),p={Unknown:0,Navigation:1,Location:2,Search:3,Transaction:4,UserContent:5,UserPreference:6,Social:7,Other:8,Media:9,getName:function(n){switch(n){case p.Unknown:return"Unknown";case p.Navigation:return"Navigation";case p.Location:return"Location";case p.Search:return"Search";case p.Transaction:return"Transaction";case p.UserContent:return"User Content";case p.UserPreference:return"User Preference";case p.Social:return"Social";case o.ProductAddToCart:return"Product Added to Cart";case o.ProductAddToWishlist:return"Product Added to Wishlist";case o.ProductCheckout:return"Product Checkout";case o.ProductCheckoutOption:return"Product Checkout Options";case o.ProductClick:return"Product Click";case o.ProductImpression:return"Product Impression";case o.ProductPurchase:return"Product Purchased";case o.ProductRefund:return"Product Refunded";case o.ProductRemoveFromCart:return"Product Removed From Cart";case o.ProductRemoveFromWishlist:return"Product Removed from Wishlist";case o.ProductViewDetail:return"Product View Details";case o.PromotionClick:return"Promotion Click";case o.PromotionView:return"Promotion View";default:return"Other"}}},o={ProductAddToCart:10,ProductRemoveFromCart:11,ProductCheckout:12,ProductCheckoutOption:13,ProductClick:14,ProductViewDetail:15,ProductPurchase:16,ProductRefund:17,PromotionView:18,PromotionClick:19,ProductAddToWishlist:20,ProductRemoveFromWishlist:21,ProductImpression:22},i={Other:0,CustomerId:1,Facebook:2,Twitter:3,Google:4,Microsoft:5,Yahoo:6,Email:7,FacebookCustomAudienceId:9,Other2:10,Other3:11,Other4:12},r,b,s,ii,ei,oi,si,yt,nt,tt,et,c,ct,yi,rt,st,d,vt,bi,u,f,w,di,tr,gt;i.isValid=function(n){if(typeof n=="number")for(var t in i)if(i.hasOwnProperty(t)&&i[t]===n)return!0;return!1};i.getName=function(n){switch(n){case window.mParticle.IdentityType.CustomerId:return"Customer ID";case window.mParticle.IdentityType.Facebook:return"Facebook ID";case window.mParticle.IdentityType.Twitter:return"Twitter ID";case window.mParticle.IdentityType.Google:return"Google ID";case window.mParticle.IdentityType.Microsoft:return"Microsoft ID";case window.mParticle.IdentityType.Yahoo:return"Yahoo ID";case window.mParticle.IdentityType.Email:return"Email";case window.mParticle.IdentityType.FacebookCustomAudienceId:return"Facebook App User ID";default:return"Other ID"}};i.getIdentityType=function(n){switch(n){case"other":return i.Other;case"customerid":return i.CustomerId;case"facebook":return i.Facebook;case"twitter":return i.Twitter;case"google":return i.Google;case"microsoft":return i.Microsoft;case"yahoo":return i.Yahoo;case"email":return i.Email;case"facebookcustomaudienceid":return i.FacebookCustomAudienceId;case"other2":return i.Other2;case"other3":return i.Other3;case"other4":return i.Other4;default:return!1}};i.getIdentityName=function(n){switch(n){case i.Other:return"other";case i.CustomerId:return"customerid";case i.Facebook:return"facebook";case i.Twitter:return"twitter";case i.Google:return"google";case i.Microsoft:return"microsoft";case i.Yahoo:return"yahoo";case i.Email:return"email";case i.FacebookCustomAudienceId:return"facebookcustomaudienceid";case i.Other2:return"other2";case i.Other3:return"other3";case i.Other4:return"other4"}};r={Unknown:0,AddToCart:1,RemoveFromCart:2,Checkout:3,CheckoutOption:4,Click:5,ViewDetail:6,Purchase:7,Refund:8,AddToWishlist:9,RemoveFromWishlist:10};r.getName=function(n){switch(n){case r.AddToCart:return"Add to Cart";case r.RemoveFromCart:return"Remove from Cart";case r.Checkout:return"Checkout";case r.CheckoutOption:return"Checkout Option";case r.Click:return"Click";case r.ViewDetail:return"View Detail";case r.Purchase:return"Purchase";case r.Refund:return"Refund";case r.AddToWishlist:return"Add to Wishlist";case r.RemoveFromWishlist:return"Remove from Wishlist";default:return"Unknown"}};r.getExpansionName=function(n){switch(n){case r.AddToCart:return"add_to_cart";case r.RemoveFromCart:return"remove_from_cart";case r.Checkout:return"checkout";case r.CheckoutOption:return"checkout_option";case r.Click:return"click";case r.ViewDetail:return"view_detail";case r.Purchase:return"purchase";case r.Refund:return"refund";case r.AddToWishlist:return"add_to_wishlist";case r.RemoveFromWishlist:return"remove_from_wishlist";default:return"unknown"}};b={Unknown:0,PromotionView:1,PromotionClick:2};b.getName=function(n){switch(n){case b.PromotionView:return"view";case b.PromotionClick:return"click";default:return"unknown"}};b.getExpansionName=function(n){switch(n){case b.PromotionView:return"view";case b.PromotionClick:return"click";default:return"unknown"}};var n={MessageType:ti,EventType:p,CommerceEventType:o,IdentityType:i,ProfileMessageType:{Logout:3},ApplicationTransitionType:{AppInit:1},ProductActionType:r,PromotionActionType:b,TriggerUploadType:rr},t={sdkVersion:"2.11.7",sdkVendor:"mparticle",platform:"web",Messages:{ErrorMessages:{NoToken:"A token must be specified.",EventNameInvalidType:"Event name must be a valid string value.",EventDataInvalidType:"Event data must be a valid object hash.",LoggingDisabled:"Event logging is currently disabled.",CookieParseError:"Could not parse cookie",EventEmpty:"Event object is null or undefined, cancelling send",APIRequestEmpty:"APIRequest is null or undefined, cancelling send",NoEventType:"Event type must be specified.",TransactionIdRequired:"Transaction ID is required",TransactionRequired:"A transaction attributes object is required",PromotionIdRequired:"Promotion ID is required",BadAttribute:"Attribute value cannot be object or array",BadKey:"Key value cannot be object or array",BadLogPurchase:"Transaction attributes and a product are both required to log a purchase, https://docs.mparticle.com/?javascript#measuring-transactions"},InformationMessages:{CookieSearch:"Searching for cookie",CookieFound:"Cookie found, parsing values",CookieNotFound:"Cookies not found",CookieSet:"Setting cookie",CookieSync:"Performing cookie sync",SendBegin:"Starting to send event",SendIdentityBegin:"Starting to send event to identity server",SendWindowsPhone:"Sending event to Windows Phone container",SendIOS:"Calling iOS path: ",SendAndroid:"Calling Android JS interface method: ",SendHttp:"Sending event to mParticle HTTP service",SendAliasHttp:"Sending alias request to mParticle HTTP service",SendIdentityHttp:"Sending event to mParticle HTTP service",StartingNewSession:"Starting new Session",StartingLogEvent:"Starting to log event",StartingLogOptOut:"Starting to log user opt in/out",StartingEndSession:"Starting to end session",StartingInitialization:"Starting to initialize",StartingLogCommerceEvent:"Starting to log commerce event",StartingAliasRequest:"Starting to Alias MPIDs",LoadingConfig:"Loading configuration options",AbandonLogEvent:"Cannot log event, logging disabled or developer token not set",AbandonAliasUsers:"Cannot Alias Users, logging disabled or developer token not set",AbandonStartSession:"Cannot start session, logging disabled or developer token not set",AbandonEndSession:"Cannot end session, logging disabled or developer token not set",NoSessionToEnd:"Cannot end session, no active session found"},ValidationMessages:{ModifyIdentityRequestUserIdentitiesPresent:"identityRequests to modify require userIdentities to be present. Request not sent to server. Please fix and try again",IdentityRequesetInvalidKey:"There is an invalid key on your identityRequest object. It can only contain a `userIdentities` object and a `onUserAlias` function. Request not sent to server. Please fix and try again.",OnUserAliasType:"The onUserAlias value must be a function. The onUserAlias provided is of type",UserIdentities:"The userIdentities key must be an object with keys of identityTypes and values of strings. Request not sent to server. Please fix and try again.",UserIdentitiesInvalidKey:"There is an invalid identity key on your `userIdentities` object within the identityRequest. Request not sent to server. Please fix and try again.",UserIdentitiesInvalidValues:"All user identity values must be strings or null. Request not sent to server. Please fix and try again.",AliasMissingMpid:"Alias Request must contain both a destinationMpid and a sourceMpid",AliasNonUniqueMpid:"Alias Request's destinationMpid and sourceMpid must be unique",AliasMissingTime:"Alias Request must have both a startTime and an endTime",AliasStartBeforeEndTime:"Alias Request's endTime must be later than its startTime"}},NativeSdkPaths:{LogEvent:"logEvent",SetUserTag:"setUserTag",RemoveUserTag:"removeUserTag",SetUserAttribute:"setUserAttribute",RemoveUserAttribute:"removeUserAttribute",SetSessionAttribute:"setSessionAttribute",AddToCart:"addToCart",RemoveFromCart:"removeFromCart",ClearCart:"clearCart",LogOut:"logOut",SetUserAttributeList:"setUserAttributeList",RemoveAllUserAttributes:"removeAllUserAttributes",GetUserAttributesLists:"getUserAttributesLists",GetAllUserAttributes:"getAllUserAttributes",Identify:"identify",Logout:"logout",Login:"login",Modify:"modify",Alias:"aliasUsers",Upload:"upload"},StorageNames:{localStorageName:"mprtcl-api",localStorageNameV3:"mprtcl-v3",cookieName:"mprtcl-api",cookieNameV2:"mprtcl-v2",cookieNameV3:"mprtcl-v3",localStorageNameV4:"mprtcl-v4",localStorageProductsV4:"mprtcl-prodv4",cookieNameV4:"mprtcl-v4",currentStorageName:"mprtcl-v4",currentStorageProductsName:"mprtcl-prodv4"},DefaultConfig:{cookieDomain:null,cookieExpiration:365,logLevel:null,timeout:300,sessionTimeout:30,maxProducts:20,forwarderStatsTimeout:5e3,integrationDelayTimeout:5e3,maxCookieSize:3e3,aliasMaxWindow:90,uploadInterval:0},DefaultUrls:{v1SecureServiceUrl:"jssdks.mparticle.com/v1/JS/",v2SecureServiceUrl:"jssdks.mparticle.com/v2/JS/",v3SecureServiceUrl:"jssdks.mparticle.com/v3/JS/",configUrl:"jssdkcdns.mparticle.com/JS/v2/",identityUrl:"identity.mparticle.com/v1/",aliasUrl:"jssdks.mparticle.com/v1/identity/"},Base64CookieKeys:{csm:1,sa:1,ss:1,ua:1,ui:1,csd:1,ia:1,con:1},SDKv2NonMPIDCookieKeys:{gs:1,cu:1,l:1,globalSettings:1,currentUserMPID:1},HTTPCodes:{noHttpCoverage:-1,activeIdentityRequest:-2,activeSession:-3,validationIssue:-4,nativeIdentityRequest:-5,loggingDisabledOrMissingAPIKey:-6,tooManyRequests:429},FeatureFlags:{ReportBatching:"reportBatching",EventsV3:"eventsV3",EventBatchingIntervalMillis:"eventBatchingIntervalMillis"},DefaultInstance:"default_instance"},ur=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};s=ft(function(n){function t(n){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(n)}function i(r){return n.exports=typeof Symbol=="function"&&t(Symbol.iterator)==="symbol"?i=function(n){return t(n)}:i=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":t(n)},i(r)}n.exports=i});ii=fr;var ri=er,ui=ft(function(n){function t(i){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},t(i)}n.exports=t}),or=ft(function(n){function t(i,r){return n.exports=t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},t(i,r)}n.exports=t});var fi=sr,hr=ft(function(n){var t=function(n){function nt(n,t,i,r){var f=t&&t.prototype instanceof w?t:w,u=Object.create(f.prototype),e=new k(r||[]);return u._invoke=st(n,i,e),u}function p(n,t,i){try{return{type:"normal",arg:n.call(t,i)}}catch(r){return{type:"throw",arg:r}}}function w(){}function c(){}function f(){}function rt(n){["next","throw","return"].forEach(function(t){n[t]=function(n){return this._invoke(t,n)}})}function v(n){function t(i,u,f,e){var h=p(n[i],n,u),s,o;if(h.type==="throw")e(h.arg);else return(s=h.arg,o=s.value,o&&typeof o=="object"&&r.call(o,"__await"))?Promise.resolve(o.__await).then(function(n){t("next",n,f,e)},function(n){t("throw",n,f,e)}):Promise.resolve(o).then(function(n){s.value=n;f(s)},function(n){return t("throw",n,f,e)})}function u(n,r){function u(){return new Promise(function(i,u){t(n,r,i,u)})}return i=i?i.then(u,u):u()}var i;this._invoke=u}function st(n,i,r){var u=tt;return function(f,e){var c,s,o;if(u===it)throw new Error("Generator is already running");if(u===h){if(f==="throw")throw e;return ft()}for(r.method=f,r.arg=e;;){if(c=r.delegate,c&&(s=ut(c,r),s)){if(s===t)continue;return s}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(u===tt){u=h;throw r.arg;}r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);if(u=it,o=p(n,i,r),o.type==="normal"){if(u=r.done?h:ot,o.arg===t)continue;return{value:o.arg,done:r.done}}o.type==="throw"&&(u=h,r.method="throw",r.arg=o.arg)}}}function ut(n,r){var e=n.iterator[r.method],f,u;if(e===i){if(r.delegate=null,r.method==="throw"){if(n.iterator["return"]&&(r.method="return",r.arg=i,ut(n,r),r.method==="throw"))return t;r.method="throw";r.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}if(f=p(e,n.iterator,r.arg),f.type==="throw")return r.method="throw",r.arg=f.arg,r.delegate=null,t;if(u=f.arg,!u)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,t;if(u.done)r[n.resultName]=u.value,r.next=n.nextLoc,r.method!=="return"&&(r.method="next",r.arg=i);else return u;return r.delegate=null,t}function ht(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]);2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]);this.tryEntries.push(t)}function b(n){var t=n.completion||{};t.type="normal";delete t.arg;n.completion=t}function k(n){this.tryEntries=[{tryLoc:"root"}];n.forEach(ht,this);this.reset(!0)}function d(n){var f,u,t;if(n){if(f=n[o],f)return f.call(n);if(typeof n.next=="function")return n;if(!isNaN(n.length))return u=-1,t=function t(){while(++u<n.length)if(r.call(n,u))return t.value=n[u],t.done=!1,t;return t.value=i,t.done=!0,t},t.next=t}return{next:ft}}function ft(){return{value:i,done:!0}}var g=Object.prototype,r=g.hasOwnProperty,i,y=typeof Symbol=="function"?Symbol:{},o=y.iterator||"@@iterator",et=y.asyncIterator||"@@asyncIterator",s=y.toStringTag||"@@toStringTag",l,a,e,u;n.wrap=nt;var tt="suspendedStart",ot="suspendedYield",it="executing",h="completed",t={};return l={},l[o]=function(){return this},a=Object.getPrototypeOf,e=a&&a(a(d([]))),e&&e!==g&&r.call(e,o)&&(l=e),u=f.prototype=w.prototype=Object.create(l),c.prototype=u.constructor=f,f.constructor=c,f[s]=c.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var t=typeof n=="function"&&n.constructor;return t?t===c||(t.displayName||t.name)==="GeneratorFunction":!1},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s in n||(n[s]="GeneratorFunction")),n.prototype=Object.create(u),n},n.awrap=function(n){return{__await:n}},rt(v.prototype),v.prototype[et]=function(){return this},n.AsyncIterator=v,n.async=function(t,i,r,u){var f=new v(nt(t,i,r,u));return n.isGeneratorFunction(i)?f:f.next().then(function(n){return n.done?n.value:f.next()})},rt(u),u[s]="Generator",u[o]=function(){return this},u.toString=function(){return"[object Generator]"},n.keys=function(n){var i=[];for(var r in n)i.push(r);return i.reverse(),function t(){while(i.length){var r=i.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=d,k.prototype={constructor:k,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(b),!n)for(var t in this)t.charAt(0)==="t"&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(n){function u(t,r){return o.type="throw",o.arg=n,f.next=t,r&&(f.method="next",f.arg=i),!!r}var f,e,t,o,s,h;if(this.done)throw n;for(f=this,e=this.tryEntries.length-1;e>=0;--e){if(t=this.tryEntries[e],o=t.completion,t.tryLoc==="root")return u("end");if(t.tryLoc<=this.prev)if(s=r.call(t,"catchLoc"),h=r.call(t,"finallyLoc"),s&&h){if(this.prev<t.catchLoc)return u(t.catchLoc,!0);if(this.prev<t.finallyLoc)return u(t.finallyLoc)}else if(s){if(this.prev<t.catchLoc)return u(t.catchLoc,!0)}else if(h){if(this.prev<t.finallyLoc)return u(t.finallyLoc)}else throw new Error("try statement without catch or finally");}},abrupt:function(n,i){for(var f,u,o,e=this.tryEntries.length-1;e>=0;--e)if(f=this.tryEntries[e],f.tryLoc<=this.prev&&r.call(f,"finallyLoc")&&this.prev<f.finallyLoc){u=f;break}return(u&&(n==="break"||n==="continue")&&u.tryLoc<=i&&i<=u.finallyLoc&&(u=null),o=u?u.completion:{},o.type=n,o.arg=i,u)?(this.method="next",this.next=u.finallyLoc,t):this.complete(o)},complete:function(n,i){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&i&&(this.next=i),t},finish:function(n){for(var i,r=this.tryEntries.length-1;r>=0;--r)if(i=this.tryEntries[r],i.finallyLoc===n)return this.complete(i.completion,i.afterLoc),b(i),t},"catch":function(n){for(var i,r,u,t=this.tryEntries.length-1;t>=0;--t)if(i=this.tryEntries[t],i.tryLoc===n)return r=i.completion,r.type==="throw"&&(u=r.arg,b(i)),u;throw new Error("illegal catch attempt");},delegateYield:function(n,r,u){return this.delegate={iterator:d(n),resultName:r,nextLoc:u},this.method==="next"&&(this.arg=i),t}},n}(n.exports);try{regeneratorRuntime=t}catch(i){Function("r","regeneratorRuntime = r")(t)}}),a=hr;ei=cr;oi=lr;si=ar;yt=vr;nt=yr;tt=pr;et=wr,function(n){n[n.Unknown=0]="Unknown";n[n.AddToCart=1]="AddToCart";n[n.RemoveFromCart=2]="RemoveFromCart";n[n.Checkout=3]="Checkout";n[n.CheckoutOption=4]="CheckoutOption";n[n.Click=5]="Click";n[n.ViewDetail=6]="ViewDetail";n[n.Purchase=7]="Purchase";n[n.Refund=8]="Refund";n[n.AddToWishlist=9]="AddToWishlist";n[n.RemoveFromWishlist=10]="RemoveFromWishlist"}(c||(c={}));ct=function(){function t(n,i){var u=this;tt(this,t);h(this,"uploadIntervalMillis",void 0);h(this,"pendingEvents",void 0);h(this,"pendingUploads",void 0);h(this,"mpInstance",void 0);h(this,"uploadUrl",void 0);h(this,"batchingEnabled",void 0);this.mpInstance=n;this.uploadIntervalMillis=i;this.batchingEnabled=i>=t.MINIMUM_INTERVAL_MILLIS;this.uploadIntervalMillis<t.MINIMUM_INTERVAL_MILLIS&&(this.uploadIntervalMillis=t.MINIMUM_INTERVAL_MILLIS);this.pendingEvents=[];this.pendingUploads=[];var r=this.mpInstance._Store,f=r.SDKConfig,e=r.devToken,o=this.mpInstance._Helpers.createServiceUrl(f.v3SecureServiceUrl,e);this.uploadUrl="".concat(o,"/events");setTimeout(function(){u.prepareAndUpload(!0,!1)},this.uploadIntervalMillis);this.addEventListeners()}return et(t,[{key:"addEventListeners",value:function(){var n=this;window.onbeforeunload=function(){n.prepareAndUpload(!1,n.isBeaconAvailable())};window.onpagehide=function(){n.prepareAndUpload(!1,n.isBeaconAvailable())}}},{key:"isBeaconAvailable",value:function(){return navigator.sendBeacon?!0:!1}},{key:"queueEvent",value:function(t){t&&(t.IsFirstRun=this.mpInstance._Store.isFirstRun,this.pendingEvents.push(t),this.mpInstance.Logger.verbose("Queuing event: ".concat(JSON.stringify(t))),this.mpInstance.Logger.verbose("Queued event count: ".concat(this.pendingEvents.length)),(!this.batchingEnabled||n.TriggerUploadType[t.EventDataType])&&this.prepareAndUpload(!1,!1))}},{key:"prepareAndUpload",value:function(){function r(){return n.apply(this,arguments)}var n=nt(a.mark(function i(n,r){var l=this,e,o,u,s,h,f,c;return a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.mpInstance.Identity.getCurrentUser(),o=this.pendingEvents,this.pendingEvents=[],u=t.createNewUploads(o,e,this.mpInstance),u&&u.length&&(s=this.pendingUploads).push.apply(s,yt(u)),h=this.pendingUploads,this.pendingUploads=[],i.next=9,this.upload(this.mpInstance.Logger,h,r);case 9:f=i.sent;f&&f.length&&(c=this.pendingUploads).unshift.apply(c,yt(f));n&&setTimeout(function(){l.prepareAndUpload(!0,!1)},this.uploadIntervalMillis);case 12:case"end":return i.stop()}},i,this)}));return r}()},{key:"upload",value:function(){function r(){return n.apply(this,arguments)}var n=nt(a.mark(function i(n,r,u){var o,f,s,h,e;return a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!r||r.length<1)){i.next=2;break}return i.abrupt("return",null);case 2:n.verbose("Uploading batches: ".concat(JSON.stringify(r)));n.verbose("Batch count: ".concat(r.length));f=0;case 5:if(!(f<r.length)){i.next=38;break}if(s={method:"POST",headers:{Accept:t.CONTENT_TYPE,"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(r[f])},!(u&&this.isBeaconAvailable())){i.next=12;break}h=new Blob([s.body],{type:"text/plain;charset=UTF-8"});navigator.sendBeacon(this.uploadUrl,h);i.next=35;break;case 12:return o||(o=window.fetch?new du(this.uploadUrl,n):new gu(this.uploadUrl,n)),i.prev=13,i.next=16,o.upload(s,r,f);case 16:if(e=i.sent,!(e.status>=200&&e.status<300)){i.next=21;break}n.verbose("Upload success for request ID: ".concat(r[f].source_request_id));i.next=29;break;case 21:if(!(e.status>=500||e.status===429)){i.next=26;break}return n.error("HTTP error status ".concat(e.status," received")),i.abrupt("return",r.slice(f,r.length));case 26:if(!(e.status>=401)){i.next=29;break}return n.error("HTTP error status ".concat(e.status," while uploading - please verify your API key.")),i.abrupt("return",null);case 29:i.next=35;break;case 31:return i.prev=31,i.t0=i["catch"](13),n.error("Error sending event to mParticle servers. ".concat(i.t0)),i.abrupt("return",r.slice(f,r.length));case 35:f++;i.next=5;break;case 38:return i.abrupt("return",null);case 39:case"end":return i.stop()}},i,this,[[13,31]])}));return r}()}],[{key:"createNewUploads",value:function(n,t,i){var e,nt,r,tt,u,o,v,s,et,h,f,c,w,ot,b;if(!t||!n||!n.length)return null;var k=[],l=new Map,a=!0,d=!1,g=undefined;try{for(e=n[Symbol.iterator]();!(a=(nt=e.next()).done);a=!0)r=nt.value,r.MPID||(tt=t.getMPID(),r.MPID=tt),u=l.get(r.MPID),u||(u=[]),u.push(r),l.set(r.MPID,u)}catch(it){d=!0;g=it}finally{try{a||e["return"]==null||e["return"]()}finally{if(d)throw g;}}for(o=0,v=Array.from(l.entries());o<v.length;o++){var rt=v[o],st=rt[0],ht=rt[1],y=new Map,p=!0,ut=!1,ft=undefined;try{for(s=ht[Symbol.iterator]();!(p=(et=s.next()).done);p=!0)h=et.value,f=y.get(h.SessionId),f||(f=[]),f.push(h),y.set(h.SessionId,f)}catch(it){ut=!0;ft=it}finally{try{p||s["return"]==null||s["return"]()}finally{if(ut)throw ft;}}for(c=0,w=Array.from(y.entries());c<w.length;c++)ot=w[c],b=ai(st,ot[1],i),b&&k.push(b)}return k}}]),t}();h(ct,"CONTENT_TYPE","text/plain;charset=UTF-8");h(ct,"MINIMUM_INTERVAL_MILLIS",500);var wt=function wt(n,t){tt(this,wt);h(this,"url",void 0);h(this,"logger",void 0);this.url=n;this.logger=t},du=function(n){function t(){return tt(this,t),ri(this,ui(t).apply(this,arguments))}return fi(t,n),et(t,[{key:"upload",value:function(){function i(){return n.apply(this,arguments)}var n=nt(a.mark(function t(n){var i;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.url,n);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},t,this)}));return i}()}]),t}(wt),gu=function(n){function t(){return tt(this,t),ri(this,ui(t).apply(this,arguments))}return fi(t,n),et(t,[{key:"upload",value:function(){function i(){return n.apply(this,arguments)}var n=nt(a.mark(function t(n){var i;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.makeRequest(this.url,this.logger,n.body);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},t,this)}));return i}()},{key:"makeRequest",value:function(){function i(){return n.apply(this,arguments)}var n=nt(a.mark(function t(n,i,r){var u;return a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=new XMLHttpRequest,t.abrupt("return",new Promise(function(t,i){u.onreadystatechange=function(){u.readyState===4&&(u.status>=200&&u.status<300?t(u):i(u))};u.open("post",n);u.send(r)}));case 2:case"end":return t.stop()}},t)}));return i}()}]),t}(wt),bt=t.HTTPCodes,it=t.Messages;var tf=ft(function(n){(function(t,i,r){n.exports=r();n.exports["default"]=r()})("slugify",ur,function(){function t(t,r){if(typeof t!="string")throw new Error("slugify: string argument expected");r=typeof r=="string"?{replacement:r}:r||{};var f=i[r.locale]||{},u=t.split("").reduce(function(t,i){return t+(f[i]||n[i]||i).replace(r.remove||/[^\w\s$*_+~.()'"!\-:@]/g,"")},"").trim().replace(/[-\s]+/g,r.replacement||"-");return r.lower?u.toLowerCase():u}var n=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","‘":"\'","’":"\'","“":"\\"","”":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial"}'),i=JSON.parse('{"vi":{"Đ":"D","đ":"d"}}');return t.extend=function(t){for(var i in t)n[i]=t[i]},t})}),lt=t.StorageNames,rf=/\+/g;var ot=t.Messages,vi="mParticleAndroid",kt="mParticle";yi=t.Messages;rt=t.Messages;st=t.Messages;var y=g.Base64,ut=t.Messages,at=t.Base64CookieKeys,ht=t.SDKv2NonMPIDCookieKeys,k=t.StorageNames;d=t.Messages;var e=t.StorageNames,dt=g.Base64,yf={das:1},pf={ui:1};return vt=n.MessageType,bi=n.ApplicationTransitionType,u=t.Messages,f=t.HTTPCodes,w=t.Messages,di=t.HTTPCodes,tr=function(){function n(){tt(this,n)}return et(n,[{key:"getMPInstance",value:function(){return{_Helpers:{sanitizeAttributes:window.mParticle.getInstance()._Helpers.sanitizeAttributes,generateUniqueId:function(){return"mockId"},extend:window.mParticle.getInstance()._Helpers.extend},_Store:{sessionId:"mockSessionId",SDKConfig:{}},Identity:{getCurrentUser:function(){return null}},getAppVersion:function(){return null},getAppName:function(){return null}}}},{key:"returnBatch",value:function(n){var t=this.getMPInstance(),i=new ki(t).createEventObject(n);return ai("0",[i],t)}}]),n}(),Array.prototype.forEach||(Array.prototype.forEach=g.forEach),Array.prototype.map||(Array.prototype.map=g.map),Array.prototype.filter||(Array.prototype.filter=g.filter),Array.isArray||(Array.prototype.isArray=g.isArray),gt=new ie,window.mParticle=gt,window.mParticle._BatchValidator=new tr,gt}() ;;

; var mpAppboyKit=function(n){function o(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs");}function s(n,t){return t={exports:{}},n(t,t.exports),t.exports}function a(){return c}function v(n){if(!n){window.console.log("You must pass a config object to register the kit "+t);return}if(!e(n)){window.console.log("'config' must be an object. You passed in a "+typeof n);return}e(n.kits)?n.kits[t]={constructor:r}:(n.kits={},n.kits[t]={constructor:r});window.console.log("Successfully registered "+t+" to your mParticle configuration")}function e(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1}var h=s(function(n,t){(function(){function c(n){function e(n,i,r,u,f,e){var c,l,a,h,o,v;if(0<n.buttons.length)for(c=document.createElement("div"),c.className="ab-message-buttons",n.imageStyle!==t.h.Sd.GRAPHIC&&(n.gb()||(l=n.backgroundColor),s(c,l)),u.insertBefore(c,u.firstChild),l=function(o){return function(s){return s=s||window.event,n.ga(e||u,function(){i.Ee(o,n);o.clickAction===t.h.Bb.URI?t.oa.openUri(o.uri,s,f||n.openTarget===t.h.jd.BLANK):o.clickAction===t.h.Bb.NEWS_FEED&&r()}),s.stopPropagation(),!1}},a=0;a<n.buttons.length;a++)h=n.buttons[a],o=document.createElement("button"),o.className="ab-message-button",o.setAttribute("type","button"),v=h.text,""===h.text&&(v=" "),o.appendChild(document.createTextNode(v)),n.gb()||(o.style.backgroundColor=t.Xa.vb(h.backgroundColor),o.style.color=t.Xa.vb(h.textColor)),o.onclick=l(h),c.appendChild(o)}function o(n){if(n=n.querySelectorAll(".ab-close-button, .ab-message-button"),0<n.length){var i=n[0],r=n[n.length-1];r.addEventListener("keydown",function(n){n=n||window.event;n.keyCode!==t.Ma.Ig||n.shiftKey||(n.preventDefault(),i.focus())});i.addEventListener("keydown",function(n){n=n||window.event;n.keyCode===t.Ma.Ig&&n.shiftKey&&(n.preventDefault(),r.focus())})}}function s(n,i){var r=document.createElement("div");r.className="ab-mask";n.appendChild(r);r=document.createElement("div");r.className="ab-background";null!=i&&(r.style.backgroundColor=t.Xa.vb(i));n.appendChild(r)}function f(n,r){var f;t.Fg=".ab-feed,.ab-feed .ab-card .ab-title,.ab-feed .ab-card .ab-url-area,.ab-in-app-message{font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-centering-div:focus,.ab-feed .ab-feed-buttons-wrapper:focus,.ab-in-app-message:focus{outline:0}@-webkit-keyframes animSlideIn{0%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,500,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,500,0,0,1)}1.3%{-webkit-transform:matrix3d(1.207,0,0,0,0,1,0,0,0,0,1,0,395.034,0,0,1);transform:matrix3d(1.207,0,0,0,0,1,0,0,0,0,1,0,395.034,0,0,1)}2.55%{-webkit-transform:matrix3d(1.254,0,0,0,0,1,0,0,0,0,1,0,304.663,0,0,1);transform:matrix3d(1.254,0,0,0,0,1,0,0,0,0,1,0,304.663,0,0,1)}4.1%{-webkit-transform:matrix3d(1.216,0,0,0,0,1,0,0,0,0,1,0,209.854,0,0,1);transform:matrix3d(1.216,0,0,0,0,1,0,0,0,0,1,0,209.854,0,0,1)}5.71%{-webkit-transform:matrix3d(1.146,0,0,0,0,1,0,0,0,0,1,0,132.66,0,0,1);transform:matrix3d(1.146,0,0,0,0,1,0,0,0,0,1,0,132.66,0,0,1)}8.11%{-webkit-transform:matrix3d(1.059,0,0,0,0,1,0,0,0,0,1,0,52.745,0,0,1);transform:matrix3d(1.059,0,0,0,0,1,0,0,0,0,1,0,52.745,0,0,1)}8.81%{-webkit-transform:matrix3d(1.041,0,0,0,0,1,0,0,0,0,1,0,36.4,0,0,1);transform:matrix3d(1.041,0,0,0,0,1,0,0,0,0,1,0,36.4,0,0,1)}11.96%{-webkit-transform:matrix3d(1.002,0,0,0,0,1,0,0,0,0,1,0,-8.042,0,0,1);transform:matrix3d(1.002,0,0,0,0,1,0,0,0,0,1,0,-8.042,0,0,1)}12.11%{-webkit-transform:matrix3d(1.002,0,0,0,0,1,0,0,0,0,1,0,-9.217,0,0,1);transform:matrix3d(1.002,0,0,0,0,1,0,0,0,0,1,0,-9.217,0,0,1)}15.07%{-webkit-transform:matrix3d(.996,0,0,0,0,1,0,0,0,0,1,0,-21.103,0,0,1);transform:matrix3d(.996,0,0,0,0,1,0,0,0,0,1,0,-21.103,0,0,1)}16.12%{-webkit-transform:matrix3d(.996,0,0,0,0,1,0,0,0,0,1,0,-21.678,0,0,1);transform:matrix3d(.996,0,0,0,0,1,0,0,0,0,1,0,-21.678,0,0,1)}27.23%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-3.919,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-3.919,0,0,1)}27.58%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-3.534,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-3.534,0,0,1)}38.34%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.518,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.518,0,0,1)}40.09%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.485,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.485,0,0,1)}50%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.08,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.08,0,0,1)}60.56%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-.012,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-.012,0,0,1)}100%,82.78%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}}@keyframes animSlideIn{0%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,500,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,500,0,0,1)}1.3%{-webkit-transform:matrix3d(1.207,0,0,0,0,1,0,0,0,0,1,0,395.034,0,0,1);transform:matrix3d(1.207,0,0,0,0,1,0,0,0,0,1,0,395.034,0,0,1)}2.55%{-webkit-transform:matrix3d(1.254,0,0,0,0,1,0,0,0,0,1,0,304.663,0,0,1);transform:matrix3d(1.254,0,0,0,0,1,0,0,0,0,1,0,304.663,0,0,1)}4.1%{-webkit-transform:matrix3d(1.216,0,0,0,0,1,0,0,0,0,1,0,209.854,0,0,1);transform:matrix3d(1.216,0,0,0,0,1,0,0,0,0,1,0,209.854,0,0,1)}5.71%{-webkit-transform:matrix3d(1.146,0,0,0,0,1,0,0,0,0,1,0,132.66,0,0,1);transform:matrix3d(1.146,0,0,0,0,1,0,0,0,0,1,0,132.66,0,0,1)}8.11%{-webkit-transform:matrix3d(1.059,0,0,0,0,1,0,0,0,0,1,0,52.745,0,0,1);transform:matrix3d(1.059,0,0,0,0,1,0,0,0,0,1,0,52.745,0,0,1)}8.81%{-webkit-transform:matrix3d(1.041,0,0,0,0,1,0,0,0,0,1,0,36.4,0,0,1);transform:matrix3d(1.041,0,0,0,0,1,0,0,0,0,1,0,36.4,0,0,1)}11.96%{-webkit-transform:matrix3d(1.002,0,0,0,0,1,0,0,0,0,1,0,-8.042,0,0,1);transform:matrix3d(1.002,0,0,0,0,1,0,0,0,0,1,0,-8.042,0,0,1)}12.11%{-webkit-transform:matrix3d(1.002,0,0,0,0,1,0,0,0,0,1,0,-9.217,0,0,1);transform:matrix3d(1.002,0,0,0,0,1,0,0,0,0,1,0,-9.217,0,0,1)}15.07%{-webkit-transform:matrix3d(.996,0,0,0,0,1,0,0,0,0,1,0,-21.103,0,0,1);transform:matrix3d(.996,0,0,0,0,1,0,0,0,0,1,0,-21.103,0,0,1)}16.12%{-webkit-transform:matrix3d(.996,0,0,0,0,1,0,0,0,0,1,0,-21.678,0,0,1);transform:matrix3d(.996,0,0,0,0,1,0,0,0,0,1,0,-21.678,0,0,1)}27.23%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-3.919,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-3.919,0,0,1)}27.58%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-3.534,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-3.534,0,0,1)}38.34%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.518,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.518,0,0,1)}40.09%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.485,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.485,0,0,1)}50%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.08,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,.08,0,0,1)}60.56%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-.012,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-.012,0,0,1)}100%,82.78%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}}@-webkit-keyframes animSlideOut{0%{-webkit-transform:translate3d(0,0,0)}100%{-webkit-transform:translate3d(300px,0,0) translate3d(100%,0,0)}}@keyframes animSlideOut{0%{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}100%{-webkit-transform:translate3d(300px,0,0) translate3d(100%,0,0);transform:translate3d(300px,0,0) translate3d(100%,0,0)}}@-webkit-keyframes animSlideLeft{0%{-webkit-transform:translate3d(0,0,0)}100%{-webkit-transform:translate3d(-300px,0,0) translate3d(-100%,0,0)}}@keyframes animSlideLeft{0%{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}100%{-webkit-transform:translate3d(-300px,0,0) translate3d(-100%,0,0);transform:translate3d(-300px,0,0) translate3d(-100%,0,0)}}@-webkit-keyframes animScale{0%{opacity:0;-webkit-transform:translate3d(0,40px,0) scale3d(.1,.6,1)}100%{opacity:1;-webkit-transform:translate3d(0,0,0) scale3d(1,1,1)}}@keyframes animScale{0%{opacity:0;-webkit-transform:translate3d(0,40px,0) scale3d(.1,.6,1);transform:translate3d(0,40px,0) scale3d(.1,.6,1)}100%{opacity:1;-webkit-transform:translate3d(0,0,0) scale3d(1,1,1);transform:translate3d(0,0,0) scale3d(1,1,1)}}@-webkit-keyframes animJelly{0%{-webkit-transform:matrix3d(.3,0,0,0,0,.3,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.3,0,0,0,0,.3,0,0,0,0,1,0,0,0,0,1)}4.5%{-webkit-transform:matrix3d(.606,0,0,0,0,.64,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.606,0,0,0,0,.64,0,0,0,0,1,0,0,0,0,1)}5.51%{-webkit-transform:matrix3d(.666,0,0,0,0,.711,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.666,0,0,0,0,.711,0,0,0,0,1,0,0,0,0,1)}9.01%{-webkit-transform:matrix3d(.843,0,0,0,0,.916,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.843,0,0,0,0,.916,0,0,0,0,1,0,0,0,0,1)}11.01%{-webkit-transform:matrix3d(.917,0,0,0,0,.997,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.917,0,0,0,0,.997,0,0,0,0,1,0,0,0,0,1)}13.51%{-webkit-transform:matrix3d(.984,0,0,0,0,1.061,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.984,0,0,0,0,1.061,0,0,0,0,1,0,0,0,0,1)}16.52%{-webkit-transform:matrix3d(1.033,0,0,0,0,1.094,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.033,0,0,0,0,1.094,0,0,0,0,1,0,0,0,0,1)}17.92%{-webkit-transform:matrix3d(1.046,0,0,0,0,1.097,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.046,0,0,0,0,1.097,0,0,0,0,1,0,0,0,0,1)}21.92%{-webkit-transform:matrix3d(1.059,0,0,0,0,1.08,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.059,0,0,0,0,1.08,0,0,0,0,1,0,0,0,0,1)}29.03%{-webkit-transform:matrix3d(1.039,0,0,0,0,1.023,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.039,0,0,0,0,1.023,0,0,0,0,1,0,0,0,0,1)}34.63%{-webkit-transform:matrix3d(1.018,0,0,0,0,.996,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.018,0,0,0,0,.996,0,0,0,0,1,0,0,0,0,1)}36.24%{-webkit-transform:matrix3d(1.013,0,0,0,0,.992,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.013,0,0,0,0,.992,0,0,0,0,1,0,0,0,0,1)}40.14%{-webkit-transform:matrix3d(1.004,0,0,0,0,.989,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.004,0,0,0,0,.989,0,0,0,0,1,0,0,0,0,1)}50.55%{-webkit-transform:matrix3d(.996,0,0,0,0,.997,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.996,0,0,0,0,.997,0,0,0,0,1,0,0,0,0,1)}62.36%{-webkit-transform:matrix3d(.999,0,0,0,0,1.001,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.999,0,0,0,0,1.001,0,0,0,0,1,0,0,0,0,1)}100%,79.08%,84.68%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}}@keyframes animJelly{0%{-webkit-transform:matrix3d(.3,0,0,0,0,.3,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.3,0,0,0,0,.3,0,0,0,0,1,0,0,0,0,1)}4.5%{-webkit-transform:matrix3d(.606,0,0,0,0,.64,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.606,0,0,0,0,.64,0,0,0,0,1,0,0,0,0,1)}5.51%{-webkit-transform:matrix3d(.666,0,0,0,0,.711,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.666,0,0,0,0,.711,0,0,0,0,1,0,0,0,0,1)}9.01%{-webkit-transform:matrix3d(.843,0,0,0,0,.916,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.843,0,0,0,0,.916,0,0,0,0,1,0,0,0,0,1)}11.01%{-webkit-transform:matrix3d(.917,0,0,0,0,.997,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.917,0,0,0,0,.997,0,0,0,0,1,0,0,0,0,1)}13.51%{-webkit-transform:matrix3d(.984,0,0,0,0,1.061,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.984,0,0,0,0,1.061,0,0,0,0,1,0,0,0,0,1)}16.52%{-webkit-transform:matrix3d(1.033,0,0,0,0,1.094,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.033,0,0,0,0,1.094,0,0,0,0,1,0,0,0,0,1)}17.92%{-webkit-transform:matrix3d(1.046,0,0,0,0,1.097,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.046,0,0,0,0,1.097,0,0,0,0,1,0,0,0,0,1)}21.92%{-webkit-transform:matrix3d(1.059,0,0,0,0,1.08,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.059,0,0,0,0,1.08,0,0,0,0,1,0,0,0,0,1)}29.03%{-webkit-transform:matrix3d(1.039,0,0,0,0,1.023,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.039,0,0,0,0,1.023,0,0,0,0,1,0,0,0,0,1)}34.63%{-webkit-transform:matrix3d(1.018,0,0,0,0,.996,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.018,0,0,0,0,.996,0,0,0,0,1,0,0,0,0,1)}36.24%{-webkit-transform:matrix3d(1.013,0,0,0,0,.992,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.013,0,0,0,0,.992,0,0,0,0,1,0,0,0,0,1)}40.14%{-webkit-transform:matrix3d(1.004,0,0,0,0,.989,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1.004,0,0,0,0,.989,0,0,0,0,1,0,0,0,0,1)}50.55%{-webkit-transform:matrix3d(.996,0,0,0,0,.997,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.996,0,0,0,0,.997,0,0,0,0,1,0,0,0,0,1)}62.36%{-webkit-transform:matrix3d(.999,0,0,0,0,1.001,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.999,0,0,0,0,1.001,0,0,0,0,1,0,0,0,0,1)}100%,79.08%,84.68%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}}@-webkit-keyframes animJellyThreeQuarterScale{0%{-webkit-transform:matrix3d(.2,0,0,0,0,.2,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.2,0,0,0,0,.2,0,0,0,0,1,0,0,0,0,1)}2.4%{-webkit-transform:matrix3d(.447,0,0,0,0,.478,0,0,0,0,1,0,0,-12.759,0,1);transform:matrix3d(.447,0,0,0,0,.478,0,0,0,0,1,0,0,-12.759,0,1)}3.28%{-webkit-transform:matrix3d(.519,0,0,0,0,.565,0,0,0,0,1,0,0,-20.381,0,1);transform:matrix3d(.519,0,0,0,0,.565,0,0,0,0,1,0,0,-20.381,0,1)}4.3%{-webkit-transform:matrix3d(.589,0,0,0,0,.649,0,0,0,0,1,0,0,-30.025,0,1);transform:matrix3d(.589,0,0,0,0,.649,0,0,0,0,1,0,0,-30.025,0,1)}4.8%{-webkit-transform:matrix3d(.618,0,0,0,0,.682,0,0,0,0,1,0,0,-34.797,0,1);transform:matrix3d(.618,0,0,0,0,.682,0,0,0,0,1,0,0,-34.797,0,1)}6.49%{-webkit-transform:matrix3d(.692,0,0,0,0,.762,0,0,0,0,1,0,0,-49.647,0,1);transform:matrix3d(.692,0,0,0,0,.762,0,0,0,0,1,0,0,-49.647,0,1)}7.21%{-webkit-transform:matrix3d(.715,0,0,0,0,.782,0,0,0,0,1,0,0,-55.053,0,1);transform:matrix3d(.715,0,0,0,0,.782,0,0,0,0,1,0,0,-55.053,0,1)}8.61%{-webkit-transform:matrix3d(.746,0,0,0,0,.803,0,0,0,0,1,0,0,-63.487,0,1);transform:matrix3d(.746,0,0,0,0,.803,0,0,0,0,1,0,0,-63.487,0,1)}9.61%{-webkit-transform:matrix3d(.759,0,0,0,0,.806,0,0,0,0,1,0,0,-67.836,0,1);transform:matrix3d(.759,0,0,0,0,.806,0,0,0,0,1,0,0,-67.836,0,1)}9.69%{-webkit-transform:matrix3d(.76,0,0,0,0,.806,0,0,0,0,1,0,0,-68.128,0,1);transform:matrix3d(.76,0,0,0,0,.806,0,0,0,0,1,0,0,-68.128,0,1)}12.89%{-webkit-transform:matrix3d(.774,0,0,0,0,.786,0,0,0,0,1,0,0,-74.433,0,1);transform:matrix3d(.774,0,0,0,0,.786,0,0,0,0,1,0,0,-74.433,0,1)}12.91%{-webkit-transform:matrix3d(.774,0,0,0,0,.786,0,0,0,0,1,0,0,-74.447,0,1);transform:matrix3d(.774,0,0,0,0,.786,0,0,0,0,1,0,0,-74.447,0,1)}15.78%{-webkit-transform:matrix3d(.769,0,0,0,0,.763,0,0,0,0,1,0,0,-74.797,0,1);transform:matrix3d(.769,0,0,0,0,.763,0,0,0,0,1,0,0,-74.797,0,1)}17.22%{-webkit-transform:matrix3d(.765,0,0,0,0,.755,0,0,0,0,1,0,0,-74.255,0,1);transform:matrix3d(.765,0,0,0,0,.755,0,0,0,0,1,0,0,-74.255,0,1)}21.78%{-webkit-transform:matrix3d(.754,0,0,0,0,.746,0,0,0,0,1,0,0,-71.836,0,1);transform:matrix3d(.754,0,0,0,0,.746,0,0,0,0,1,0,0,-71.836,0,1)}21.94%{-webkit-transform:matrix3d(.754,0,0,0,0,.746,0,0,0,0,1,0,0,-71.749,0,1);transform:matrix3d(.754,0,0,0,0,.746,0,0,0,0,1,0,0,-71.749,0,1)}28.33%{-webkit-transform:matrix3d(.75,0,0,0,0,.749,0,0,0,0,1,0,0,-68.815,0,1);transform:matrix3d(.75,0,0,0,0,.749,0,0,0,0,1,0,0,-68.815,0,1)}30.67%{-webkit-transform:matrix3d(.749,0,0,0,0,.75,0,0,0,0,1,0,0,-68.09,0,1);transform:matrix3d(.749,0,0,0,0,.75,0,0,0,0,1,0,0,-68.09,0,1)}34.27%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.391,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.391,0,1)}39.44%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.089,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.089,0,1)}46.61%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.277,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.277,0,1)}48.45%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.342,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.342,0,1)}58.94%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.524,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.524,0,1)}61.66%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.528,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.528,0,1)}66.23%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.521,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.521,0,1)}71.19%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.509,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.509,0,1)}80%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.499,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.499,0,1)}83.98%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.498,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.498,0,1)}100%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.5,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.5,0,1)}}@keyframes animJellyThreeQuarterScale{0%{-webkit-transform:matrix3d(.2,0,0,0,0,.2,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(.2,0,0,0,0,.2,0,0,0,0,1,0,0,0,0,1)}2.4%{-webkit-transform:matrix3d(.447,0,0,0,0,.478,0,0,0,0,1,0,0,-12.759,0,1);transform:matrix3d(.447,0,0,0,0,.478,0,0,0,0,1,0,0,-12.759,0,1)}3.28%{-webkit-transform:matrix3d(.519,0,0,0,0,.565,0,0,0,0,1,0,0,-20.381,0,1);transform:matrix3d(.519,0,0,0,0,.565,0,0,0,0,1,0,0,-20.381,0,1)}4.3%{-webkit-transform:matrix3d(.589,0,0,0,0,.649,0,0,0,0,1,0,0,-30.025,0,1);transform:matrix3d(.589,0,0,0,0,.649,0,0,0,0,1,0,0,-30.025,0,1)}4.8%{-webkit-transform:matrix3d(.618,0,0,0,0,.682,0,0,0,0,1,0,0,-34.797,0,1);transform:matrix3d(.618,0,0,0,0,.682,0,0,0,0,1,0,0,-34.797,0,1)}6.49%{-webkit-transform:matrix3d(.692,0,0,0,0,.762,0,0,0,0,1,0,0,-49.647,0,1);transform:matrix3d(.692,0,0,0,0,.762,0,0,0,0,1,0,0,-49.647,0,1)}7.21%{-webkit-transform:matrix3d(.715,0,0,0,0,.782,0,0,0,0,1,0,0,-55.053,0,1);transform:matrix3d(.715,0,0,0,0,.782,0,0,0,0,1,0,0,-55.053,0,1)}8.61%{-webkit-transform:matrix3d(.746,0,0,0,0,.803,0,0,0,0,1,0,0,-63.487,0,1);transform:matrix3d(.746,0,0,0,0,.803,0,0,0,0,1,0,0,-63.487,0,1)}9.61%{-webkit-transform:matrix3d(.759,0,0,0,0,.806,0,0,0,0,1,0,0,-67.836,0,1);transform:matrix3d(.759,0,0,0,0,.806,0,0,0,0,1,0,0,-67.836,0,1)}9.69%{-webkit-transform:matrix3d(.76,0,0,0,0,.806,0,0,0,0,1,0,0,-68.128,0,1);transform:matrix3d(.76,0,0,0,0,.806,0,0,0,0,1,0,0,-68.128,0,1)}12.89%{-webkit-transform:matrix3d(.774,0,0,0,0,.786,0,0,0,0,1,0,0,-74.433,0,1);transform:matrix3d(.774,0,0,0,0,.786,0,0,0,0,1,0,0,-74.433,0,1)}12.91%{-webkit-transform:matrix3d(.774,0,0,0,0,.786,0,0,0,0,1,0,0,-74.447,0,1);transform:matrix3d(.774,0,0,0,0,.786,0,0,0,0,1,0,0,-74.447,0,1)}15.78%{-webkit-transform:matrix3d(.769,0,0,0,0,.763,0,0,0,0,1,0,0,-74.797,0,1);transform:matrix3d(.769,0,0,0,0,.763,0,0,0,0,1,0,0,-74.797,0,1)}17.22%{-webkit-transform:matrix3d(.765,0,0,0,0,.755,0,0,0,0,1,0,0,-74.255,0,1);transform:matrix3d(.765,0,0,0,0,.755,0,0,0,0,1,0,0,-74.255,0,1)}21.78%{-webkit-transform:matrix3d(.754,0,0,0,0,.746,0,0,0,0,1,0,0,-71.836,0,1);transform:matrix3d(.754,0,0,0,0,.746,0,0,0,0,1,0,0,-71.836,0,1)}21.94%{-webkit-transform:matrix3d(.754,0,0,0,0,.746,0,0,0,0,1,0,0,-71.749,0,1);transform:matrix3d(.754,0,0,0,0,.746,0,0,0,0,1,0,0,-71.749,0,1)}28.33%{-webkit-transform:matrix3d(.75,0,0,0,0,.749,0,0,0,0,1,0,0,-68.815,0,1);transform:matrix3d(.75,0,0,0,0,.749,0,0,0,0,1,0,0,-68.815,0,1)}30.67%{-webkit-transform:matrix3d(.749,0,0,0,0,.75,0,0,0,0,1,0,0,-68.09,0,1);transform:matrix3d(.749,0,0,0,0,.75,0,0,0,0,1,0,0,-68.09,0,1)}34.27%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.391,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.391,0,1)}39.44%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.089,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.089,0,1)}46.61%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.277,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.277,0,1)}48.45%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.342,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.342,0,1)}58.94%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.524,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.524,0,1)}61.66%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.528,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.528,0,1)}66.23%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.521,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.521,0,1)}71.19%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.509,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.509,0,1)}80%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.499,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.499,0,1)}83.98%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.498,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.498,0,1)}100%{-webkit-transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.5,0,1);transform:matrix3d(.75,0,0,0,0,.75,0,0,0,0,1,0,0,-67.5,0,1)}}@-webkit-keyframes fadeToThreeQuarters{0%{opacity:0}100%{opacity:.75}}@keyframes fadeToThreeQuarters{0%{opacity:0}100%{opacity:.75}}@-webkit-keyframes fadeFromThreeQuarters{0%{opacity:.75}100%{opacity:0}}@keyframes fadeFromThreeQuarters{0%{opacity:.75}100%{opacity:0}}@-webkit-keyframes slideUp{0%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,3000,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,3000,0,1)}2.1%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,2097.078,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,2097.078,0,1)}4.2%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,1451.432,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,1451.432,0,1)}8.41%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,673.918,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,673.918,0,1)}12.61%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,298.665,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,298.665,0,1)}16.72%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,127.615,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,127.615,0,1)}25.03%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,17.095,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,17.095,0,1)}33.33%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}39.14%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,1.13,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,1.13,0,1)}100%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}}@keyframes slideUp{0%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,3000,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,3000,0,1)}2.1%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,2097.078,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,2097.078,0,1)}4.2%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,1451.432,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,1451.432,0,1)}8.41%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,673.918,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,673.918,0,1)}12.61%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,298.665,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,298.665,0,1)}16.72%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,127.615,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,127.615,0,1)}25.03%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,17.095,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,17.095,0,1)}33.33%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}39.14%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,1.13,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,1.13,0,1)}100%{-webkit-transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);transform:matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}}.ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.2);-moz-box-shadow:0 1px 3px rgba(0,0,0,.2);box-shadow:0 1px 3px rgba(0,0,0,.2);line-height:normal;letter-spacing:normal;z-index:1050}.ab-in-app-message.ab-clickable{cursor:pointer}.ab-in-app-message .ab-background,.ab-in-app-message .ab-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:-1}.ab-in-app-message .ab-mask{background-color:#cfcfcf}.ab-in-app-message .ab-background{background-color:#fff}.ab-in-app-message .ab-close-button{display:block;cursor:pointer;position:absolute;z-index:1060}.ab-in-app-message .ab-message-text{margin:20px;overflow:hidden;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;max-width:100%}.ab-in-app-message .ab-message-text.start-aligned{text-align:left;text-align:start}.ab-in-app-message .ab-message-text.end-aligned{text-align:right;text-align:end}.ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:9px}.ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;background-color:rgba(0,0,0,.4)}.ab-in-app-message .ab-message-header{display:block;font-weight:700;font-size:19px;margin-bottom:14px;line-height:23px}.ab-in-app-message .ab-message-header.start-aligned{text-align:left;text-align:start}.ab-in-app-message .ab-message-header.end-aligned{text-align:right;text-align:end}.ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-in-app-message.ab-slideup{cursor:pointer;margin:20px;padding:10px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;right:0;font-size:13px}.ab-in-app-message.ab-slideup .ab-close-button{right:8px;top:8px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-in-app-message.ab-slideup .ab-close-button:hover{font-size:18px;right:6px;top:6px}.ab-in-app-message.ab-slideup .ab-message-text{display:inline-block;margin:5px 15px 5px 10px;max-height:200px;max-width:440px}.ab-in-app-message.ab-slideup .ab-image-area{display:inline-block;width:60px;vertical-align:top;margin:5px 0 5px 5px}.ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-in-app-message.ab-slideup .ab-image-area~.ab-message-text{max-height:60px}.ab-in-app-message.ab-slideup .ab-image-area img{width:100%}.ab-in-app-message.ab-fullscreen,.ab-in-app-message.ab-modal{right:0;left:0;margin-right:auto;margin-left:auto;font-size:14px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.ab-in-app-message.ab-fullscreen .ab-background,.ab-in-app-message.ab-fullscreen .ab-mask,.ab-in-app-message.ab-modal .ab-background,.ab-in-app-message.ab-modal .ab-mask{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;overflow:hidden}.ab-in-app-message.ab-fullscreen .ab-message-text,.ab-in-app-message.ab-modal .ab-message-text{overflow-y:auto;line-height:normal}.ab-in-app-message.ab-fullscreen .ab-close-button,.ab-in-app-message.ab-modal .ab-close-button{right:10px;top:10px;font-size:20px;width:20px;height:20px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;text-align:center}.ab-in-app-message.ab-fullscreen .ab-close-button .fa,.ab-in-app-message.ab-modal .ab-close-button .fa{line-height:20px}.ab-in-app-message.ab-fullscreen .ab-image-area,.ab-in-app-message.ab-modal .ab-image-area{position:relative;display:block;-webkit-border-radius:10px 10px 0 0;-moz-border-radius:10px 10px 0 0;border-radius:10px 10px 0 0;overflow:hidden}.ab-in-app-message.ab-fullscreen .ab-image-area img,.ab-in-app-message.ab-modal .ab-image-area img{position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{background-size:cover;background-repeat:no-repeat;background-position:50% 50%;position:absolute;top:0;right:0;bottom:0;left:0}.ab-in-app-message.ab-fullscreen .ab-icon,.ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-in-app-message.ab-fullscreen.graphic,.ab-in-app-message.ab-modal.graphic{padding:0}.ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons .ab-background,.ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons .ab-mask,.ab-in-app-message.ab-modal.graphic .ab-message-buttons .ab-background,.ab-in-app-message.ab-modal.graphic .ab-message-buttons .ab-mask{background-color:transparent}.ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-in-app-message.ab-modal.graphic .ab-image-area{height:auto;margin:0;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.ab-in-app-message.ab-fullscreen .ab-message-buttons~.ab-message-text,.ab-in-app-message.ab-modal .ab-message-buttons~.ab-message-text{margin-bottom:80px}.ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-ms-transform:none;transform:none}.ab-in-app-message.ab-modal{padding-top:20px;top:20%;width:290px;max-width:290px;max-height:320px}.ab-in-app-message.ab-modal .ab-message-text{max-height:121px}.ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;height:100px}.ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:100%}.ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-in-app-message.ab-modal.graphic .ab-image-area img{max-height:320px;max-width:290px}.ab-in-app-message.ab-fullscreen{top:8%;-webkit-transition:top .4s;-moz-transition:top .4s;-o-transition:top .4s;transition:top .4s;width:400px;max-height:640px}.ab-in-app-message.ab-fullscreen.landscape{width:640px;max-height:400px}.ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:200px}.ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:400px}.ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:100px}.ab-in-app-message.ab-fullscreen .ab-message-text{max-height:220px}.ab-in-app-message.ab-fullscreen .ab-image-area{height:320px}.ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:640px}.ab-in-app-message.ab-html-message{background-color:transparent;border:none;top:0;right:0;bottom:0;left:0;width:100%;height:100%}.ab-in-app-message.ab-html-message.ab-show{-webkit-animation-name:slideUp;animation-name:slideUp;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-in-app-message.ab-html-message.ab-hide{-webkit-transition:.25s;-moz-transition:.25s;-o-transition:.25s;transition:.25s;-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0;animation-duration:0;-webkit-animation-timing-function:linear;animation-timing-function:linear;top:100%}.ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:15px 20px 20px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;border:none;display:inline-block;font-size:12px;font-weight:700;height:auto;line-height:normal;letter-spacing:normal;padding:14px 10px;text-transform:none;margin:0;width:48%;cursor:pointer;overflow:hidden;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-feed,.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box}.ab-in-app-message .ab-message-button:first-of-type{float:left}.ab-in-app-message .ab-message-button:last-of-type{float:right}.ab-in-app-message .ab-message-button:first-of-type:last-of-type{width:100%}.ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-in-app-message img{display:inline-block}.ab-in-app-message .ab-icon{display:inline-block;padding:10px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}.ab-in-app-message .ab-icon .fa{font-size:30px;width:30px}.ab-start-hidden{visibility:hidden}.ab-effect-slide.ab-show{-webkit-animation-name:animSlideIn;animation-name:animSlideIn;-webkit-animation-duration:1.25s;animation-duration:1.25s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-effect-slide.ab-hide{-webkit-animation-name:animSlideOut;animation-name:animSlideOut;-webkit-animation-duration:.25s;animation-duration:.25s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-effect-fullscreen.ab-show,.ab-effect-modal.ab-show{-webkit-animation-name:animJelly;animation-name:animJelly;-webkit-animation-duration:.8s;animation-duration:.8s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-effect-fullscreen.ab-hide,.ab-effect-modal.ab-hide{-webkit-animation-name:animScale;animation-name:animScale;-webkit-animation-duration:.25s;animation-duration:.25s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-direction:reverse;animation-direction:reverse;animation-fill-mode:forwards;-webkit-transition:.25s;-moz-transition:.25s;-o-transition:.25s;transition:.25s}.ab-centering-div{position:fixed;text-align:center;z-index:1050;top:0;right:0;bottom:0;left:0;pointer-events:none}.ab-centering-div .ab-in-app-message{display:inline-block;pointer-events:all}@media (max-width:750px){.ab-in-app-message.ab-slideup{width:90%;margin:5%}.ab-in-app-message.ab-slideup .ab-message-text{margin:2%;max-width:100%}.ab-in-app-message.ab-slideup .ab-image-area{width:20%;margin:2%}.ab-in-app-message.ab-slideup .ab-image-area~.ab-message-text{max-width:72%}.ab-in-app-message.ab-slideup .ab-image-area img{width:100%}.ab-in-app-message.ab-fullscreen,.ab-in-app-message.ab-fullscreen.landscape{top:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen .ab-background,.ab-in-app-message.ab-fullscreen .ab-mask,.ab-in-app-message.ab-fullscreen.landscape .ab-background,.ab-in-app-message.ab-fullscreen.landscape .ab-mask{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen.ab-effect-fullscreen.ab-show,.ab-in-app-message.ab-fullscreen.landscape.ab-effect-fullscreen.ab-show{-webkit-animation-name:slideUp;animation-name:slideUp;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-in-app-message.ab-fullscreen.ab-effect-fullscreen.ab-hide,.ab-in-app-message.ab-fullscreen.landscape.ab-effect-fullscreen.ab-hide{-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0;animation-duration:0;-webkit-animation-timing-function:linear;animation-timing-function:linear;top:100%}.ab-in-app-message.ab-fullscreen .ab-image-area,.ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:50%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen .ab-message-text,.ab-in-app-message.ab-fullscreen.landscape .ab-message-text{top:50%;right:0;bottom:0;left:0;position:absolute;height:auto;max-height:none}.ab-in-app-message.ab-fullscreen.graphic,.ab-in-app-message.ab-fullscreen.landscape.graphic{display:block}.ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen .ab-close-button,.ab-in-app-message.ab-fullscreen.landscape .ab-close-button{font-size:6vw;width:6vw;height:6vw;-webkit-border-radius:3vw;-moz-border-radius:3vw;border-radius:3vw;right:3vw;top:3vw}}@media (max-device-width:750px) and (orientation:landscape){.ab-in-app-message.ab-modal{top:0;margin:0}.ab-in-app-message.ab-fullscreen .ab-close-button,.ab-in-app-message.ab-fullscreen.landscape .ab-close-button{font-size:6vh;width:6vh;height:6vh;-webkit-border-radius:3vh;-moz-border-radius:3vh;border-radius:3vh;right:3vh;top:3vh}}@media (min-device-width:321px) and (max-device-width:750px) and (orientation:landscape){.ab-in-app-message.ab-modal{margin-top:20px}}@media (min-device-width:751px) and (max-device-width:1024px) and (orientation:landscape){.ab-in-app-message.ab-fullscreen:not(.landscape){top:0;margin-top:20px}}@media (min-width:751px){.ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:790px) and (min-width:751px){.ab-in-app-message.ab-fullscreen:not(.landscape){margin-top:2%;top:0}}@media (max-height:650px) and (min-width:751px){.ab-in-app-message.ab-fullscreen:not(.landscape).ab-effect-fullscreen.ab-show{-webkit-animation-name:animJellyThreeQuarterScale;animation-name:animJellyThreeQuarterScale;-webkit-animation-duration:.4s;animation-duration:.4s;-webkit-animation-timing-function:linear;animation-timing-function:linear;animation-fill-mode:both}.ab-in-app-message.ab-fullscreen:not(.landscape).ab-effect-fullscreen.ab-hide{-webkit-animation-name:animJellyThreeQuarterScale;animation-name:animJellyThreeQuarterScale;-webkit-animation-duration:.25s;animation-duration:.25s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-direction:reverse;animation-direction:reverse;animation-fill-mode:forwards;-webkit-transition:.25s;-moz-transition:.25s;-o-transition:.25s;transition:.25s}}@media (max-height:500px) and (min-width:751px){.ab-in-app-message.ab-fullscreen:not(.landscape){top:0;height:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;width:400px}.ab-in-app-message.ab-fullscreen:not(.landscape) .ab-background,.ab-in-app-message.ab-fullscreen:not(.landscape) .ab-mask{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen:not(.landscape).ab-effect-fullscreen.ab-show{-webkit-animation-name:slideUp;animation-name:slideUp;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-in-app-message.ab-fullscreen:not(.landscape).ab-effect-fullscreen.ab-hide{-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0;animation-duration:0;-webkit-animation-timing-function:linear;animation-timing-function:linear;top:100%}.ab-in-app-message.ab-fullscreen:not(.landscape) .ab-image-area{height:50%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen:not(.landscape) .ab-message-text{top:50%;right:0;bottom:0;left:0;position:absolute;height:auto;max-height:none}.ab-in-app-message.ab-fullscreen:not(.landscape).graphic{display:block}.ab-in-app-message.ab-fullscreen:not(.landscape).graphic .ab-image-area{height:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}}@media (max-height:430px){.ab-in-app-message.ab-fullscreen.landscape{top:0}}@media (max-height:400px){.ab-in-app-message.ab-fullscreen.landscape{top:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen.landscape .ab-background,.ab-in-app-message.ab-fullscreen.landscape .ab-mask{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen.landscape.ab-effect-fullscreen.ab-show{-webkit-animation-name:slideUp;animation-name:slideUp;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-in-app-message.ab-fullscreen.landscape.ab-effect-fullscreen.ab-hide{-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0;animation-duration:0;-webkit-animation-timing-function:linear;animation-timing-function:linear;top:100%}.ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:50%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-in-app-message.ab-fullscreen.landscape .ab-message-text{top:50%;right:0;bottom:0;left:0;position:absolute;height:auto;max-height:none}.ab-in-app-message.ab-fullscreen.landscape.graphic{display:block}.ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}}.ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1040}.ab-page-blocker.ab-show{-webkit-animation-name:fadeToThreeQuarters;animation-name:fadeToThreeQuarters;-webkit-animation-duration:.16666667s;animation-duration:.16666667s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-page-blocker.ab-hide{-webkit-animation-name:fadeFromThreeQuarters;animation-name:fadeFromThreeQuarters;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-feed.ab-hide,.ab-feed.ab-show{-webkit-animation-timing-function:linear}body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:58px;min-height:100%}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;-webkit-overflow-scrolling:touch;-webkit-transition:opacity .25s;-moz-transition:opacity .25s;-o-transition:opacity .25s;transition:opacity .25s}.ab-feed .ab-feed-body{box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0}.ab-feed.ab-show{-webkit-animation-name:animSlideIn;animation-name:animSlideIn;-webkit-animation-duration:1s;animation-duration:1s;animation-timing-function:linear}.ab-feed.ab-hide{opacity:0;-webkit-animation-name:animSlideOut;animation-name:animSlideOut;-webkit-animation-duration:.25s;animation-duration:.25s;animation-timing-function:linear}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-hide{-webkit-animation-name:animSlideLeft;animation-name:animSlideLeft;-webkit-animation-duration:.25s;animation-duration:.25s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.ab-feed .ab-card .ab-close-button{display:block;cursor:pointer;position:absolute;z-index:1060;right:10px;top:10px;font-size:20px;width:20px;height:20px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;text-align:center;visibility:hidden;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button .fa{line-height:20px}.ab-feed .ab-card:hover .ab-close-button{visibility:visible;opacity:1}.ab-feed .ab-card a{color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{height:auto;width:100%}.ab-feed .ab-card.ab-banner .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;font-weight:700;padding:20px 25px 0}.ab-feed .ab-card .ab-description{color:#545454;padding:15px 25px 20px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-url-area{color:#1676d0;margin-top:12px}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:95px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px;padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:25px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:60px;height:60px}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{position:relative;background-color:#282828;height:38px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{cursor:pointer;color:#fff;font-size:18px;margin:10px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right;margin-top:9px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{margin-top:6px;margin-right:9px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{margin-left:12px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{margin-top:8px;margin-left:10px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:750px){body>.ab-feed{width:100%;-webkit-transition:.25s;-moz-transition:.25s;-o-transition:.25s;transition:.25s}body>.ab-feed.ab-show{-webkit-animation-name:slideUp;animation-name:slideUp;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:linear;animation-timing-function:linear}body>.ab-feed.ab-hide{-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0;animation-duration:0;-webkit-animation-timing-function:linear;animation-timing-function:linear;top:100%;opacity:.5}}";var s=!1,u=!1,o=!1,h=!1,e=null;return n.Yh(function(n){s=n.openInAppMessagesInNewTab||!1;u=n.openCardsInNewTab||n.openNewsFeedCardsInNewTab||!1;o=n.requireExplicitInAppMessageDismissal||!1;h=n.enableHtmlInAppMessages||!1;e=null;n.doNotLoadFontAwesome||null!==document.querySelector('link[rel=stylesheet][href="https://use.fontawesome.com/7f85a56ba4.css"]')||(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("href","https://use.fontawesome.com/7f85a56ba4.css"),document.getElementsByTagName("head")[0].appendChild(n));null==document.getElementById("ab-css-definitions")&&(n=document.createElement("style"),n.innerHTML=t.Fg,n.id="ab-css-definitions",document.getElementsByTagName("head")[0].appendChild(n));o||document.addEventListener("keydown",function(n){var r,i,u;if(n=n||window.event,n.keyCode===t.Ma.Fi&&0<document.querySelectorAll(".ab-modal-interactions").length){for(n=document.getElementsByClassName("ab-html-message"),r=!1,i=0;i<n.length;i++)u=n[i].contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0],null!=u&&(t.ia.sh(u),r=!0);r||(n=document.querySelectorAll(".ab-page-blocker")[0],null!=n&&t.ia.sh(n))}},!1)}),f={Tj:function(){return null==e&&(e=n.Zh(function(n){return f.showInAppMessage(n[0]),n.slice(1)})),e},rl:function(u,f,e){var l,c,a;return null==u?!1:u instanceof t.$b?(i.f.info("User received control for a multivariate test, logging to Braze servers."),n.Gd(u),!0):(u instanceof t.h)?u instanceof t.Sa&&!h?(i.f.error('For security reasons, HTML in-app messages are disabled by default. Use the "enableHtmlInAppMessages" configuration option for appboy.initialize to enable these messages.'),n.ya(u,t.h.Ba.Mi),!1):(null==f&&(f=document.getElementsByTagName("body")[0]),u.Rc()&&0<f.querySelectorAll(".ab-modal-interactions").length)?(i.f.info("Cannot show in-app message '"+u.message+"' because another message is being shown."),n.ya(u,t.h.Ba.ii),!1):t.oa.Jk()&&(l=t.oa.yk(),l===t.oa.Ga.Xd&&u.orientation===t.h.Ga.LANDSCAPE||l===t.oa.Ga.bf&&u.orientation===t.h.Ga.PORTRAIT)?(i.f.info("Not showing "+(u.orientation===t.h.Ga.PORTRAIT?"portrait":"landscape")+" in-app message '"+u.message+"' because the screen is currently "+(l===t.oa.Ga.Xd?"portrait":"landscape")),n.ya(u,t.h.Ba.lj),!1):(c=document.createElement("div"),c.className="ab-iam-root",u.Re()&&(c.id=u.htmlId),f.appendChild(c),u.gb()&&(f=document.createElement("style"),f.innerHTML=u.css,f.id=u.Ne(),document.getElementsByTagName("head")[0].appendChild(f)),a=this,f=u.Pa(n,r,function(){a.Uh()},function(i){var r,h;if(u.Rc()&&u.bi())r=document.createElement("div"),r.className="ab-page-blocker",r.className+=u.xd(),u.gb()||(r.style.backgroundColor=t.Xa.vb(u.frameColor)),c.appendChild(r),o||(h=Date.now(),r.onclick=function(n){Date.now()-h>t.h.dj&&(n=n||window.event,u.ga(i),u.Sc(),n.stopPropagation())});else if(u instanceof t.pb){for(var f=document.querySelectorAll(".ab-slideup"),r=null,s=f.length-1;0<=s;s--)if(f[s]!==i){r=f[s];break}u.slideFrom===t.h.$d.TOP?(f=0,null!=r&&(f=r.offsetTop+r.offsetHeight),i.style.top=Math.max(f,0)+"px"):(f=0,null!=r&&(f=(window.innerHeight||document.documentElement.clientHeight)-r.offsetTop),i.style.bottom=Math.max(f,0)+"px")}n.Gd(u);u.dismissType===t.h.Bc.AUTO_DISMISS&&setTimeout(function(){c.contains(i)&&(u.ga(i),u.Sc())},u.duration);"function"==typeof e&&e()},s),c.appendChild(f),u.Rc()&&f.focus(),u.Nh(f),!0):!1},Uh:function(r,f,e){function l(i){for(var f=i.querySelectorAll(".ab-feed"),r=null,u=0;u<f.length;u++)f[u].parentNode===i&&(r=f[u]);null!=r?(t.J.ga(n,r),r.parentNode.replaceChild(s,r)):i.appendChild(s);s.getElementsByClassName("ab-feed-buttons-wrapper")[0].focus();n.Ih();o.xe(n,s)}function h(n,i){var r,f,u,e;if(null==i)return n;for(f=[],r=0;r<i.length;r++)f.push(i[r].toLowerCase());for(i=[],u=0;u<n.length;u++){for(e=[],r=0;r<n[u].categories.length;r++)e.push(n[u].categories[r].toLowerCase());0<t.G.Gk(e,f).length&&i.push(n[u])}return i}var c,o,s,a;null==r&&(r=document.getElementsByTagName("body")[0]);c=!1;o=null;null==f?(o=n.ye(),o.Qe(h(o.cards,e),o.lastUpdated,null,n,u),c=!0):o=new t.J(h(f,e),new Date);s=o.Pa(n,u);c&&((null==o.lastUpdated||Date.now()-o.lastUpdated.valueOf()>t.J.fd)&&(i.f.info("Cached feed was older than max TTL of "+t.J.fd+" ms, requesting an update from the server."),o.Yf(n,s)),a=Date.now(),f=n.Xh(function(i){var r=s.querySelectorAll(".ab-refresh-button")[0];if(null!=r){var f=500,c=parseInt(s.getAttribute(t.J.Ud)),f=isNaN(c)?f-(Date.now()-a):f-(Date.now()-c);setTimeout(function(){r.className=r.className.replace(/fa-spin/g,"")},Math.max(f,0))}o.Qe(h(i.cards,e),i.lastUpdated,s,n,u)}),o.Qh(f,s));null!=r?l(r):window.onload=function(n){return function(){"function"==typeof n&&n();l(document.getElementsByTagName("body")[0])}}(window.onload)},hk:function(){for(var r=document.querySelectorAll(".ab-feed"),i=0;i<r.length;i++)t.J.ga(n,r[i])},Al:function(n,t,i){0<document.querySelectorAll(".ab-feed").length?f.destroyFeed():f.showFeed(n,t,i)},ql:function(r,f){function s(i){for(var f=i.querySelectorAll(".ab-feed"),r=null,u=0;u<f.length;u++)f[u].parentNode===i&&(r=f[u]);null!=r?(t.ta.ga(n,r),r.parentNode.replaceChild(o,r)):i.appendChild(o);n.Hh();e.xe(n,o)}var e,o,h,c;null==r&&(r=document.getElementsByTagName("body")[0]);e=null;e=n.Pc();"function"==typeof f&&e.Qe(f(e.cards.slice()),e.lastUpdated,null,n,u);o=e.Pa(n,u);(null==e.lastUpdated||Date.now()-e.lastUpdated.valueOf()>t.ta.fd)&&(i.f.info("Cached content cards were older than max TTL of "+t.ta.fd+" ms, requesting a sync from the server."),e.Yf(n,o));h=Date.now();c=n.Vh(function(i){var s=o.querySelectorAll(".ab-refresh-button")[0];if(null!=s){var r=500,c=parseInt(o.getAttribute(t.J.Ud)),r=isNaN(c)?r-(Date.now()-h):r-(Date.now()-c);setTimeout(function(){s.className=s.className.replace(/fa-spin/g,"")},Math.max(r,0))}r=i.cards;"function"==typeof f&&(r=f(r.slice()));e.Qe(r,i.lastUpdated,o,n,u)});e.Qh(c,o);null!=r?s(r):window.onload=function(n){return function(){"function"==typeof n&&n();s(document.getElementsByTagName("body")[0])}}(window.onload)},Bk:function(){for(var r=document.querySelectorAll(".ab-feed"),i=0;i<r.length;i++)t.ta.ga(n,r[i])},zl:function(n,t){0<document.querySelectorAll(".ab-feed").length?f.hideContentCards():f.showContentCards(n,t)}}}function c(n,r){var f,e=[n];if(t.G.isArray(n)&&(e=n),null===r)return null;if(null==r)return r={},r[t.w.Ka]=e,r;if(u(r)&&(null!=r[t.w.Ja]||null!=r[t.w.Ka])){if(r[t.w.Ka]=(r[t.w.Ka]||[]).concat(e),null!=r[t.w.Ja]){for(f=0;f<e.length;f++)for(;-1!==(n=r[t.w.Ja].indexOf(e[f]));)r[t.w.Ja].splice(n,1);0===r[t.w.Ja].length&&(r[t.w.Ja]=void 0)}}else{if(!t.G.isArray(r))return i.f.error("Attempted to remove from custom attribute array but it is not an array."),!1;for(f=0;f<e.length;f++)for(;-1!==(n=r.indexOf(e[f]));)r.splice(n,1)}return r}function l(n,r){var f=[n],e;if(t.G.isArray(n)&&(f=n),null===r)return f;if(null==r)return r={},r[t.w.Ja]=f,r;if(u(r)&&(null!=r[t.w.Ja]||null!=r[t.w.Ka])){if(r[t.w.Ja]=(r[t.w.Ja]||[]).concat(f),null!=r[t.w.Ka]){for(n=0;n<f.length;n++)for(;-1!==(e=r[t.w.Ka].indexOf(f[n]));)r[t.w.Ka].splice(e,1);0===r[t.w.Ka].length&&(r[t.w.Ka]=void 0)}}else{if(!t.G.isArray(r))return i.f.error("Attempted to add to custom attribute array but it is not an array."),!1;r=r.concat(f)}return r}function a(n,r){return null===r?n:null==r?(r={},r[t.w.Yb]=n,r):u(r)&&null!=r[t.w.Yb]?(r[t.w.Yb]+=n,r):isNaN(parseInt(r))?(i.f.error("Attempted to increment attribute but it is not an integer."),!1):r+n}function u(n){return null!=n&&"object"==typeof n&&!t.G.isArray(n)}function h(n){function rt(n){var u={},r,i;for(r in n)i=n[r],null==i?delete n[r]:u[r]=t.G.ub(i)?t.N.$h(i):i;return u}function ut(n,r,u,f,e){if(null==n&&(n={}),"object"!=typeof n||t.G.isArray(n))return i.f.error(r+" requires that "+u+" be an object. Ignoring "+e+"."),!1;for(var o in n)if(!t.S.Wa(o,f,"the "+e+" property name")||(r=n[o],null!=r&&!t.S.Hl(r,f,"the "+e+' property "'+o+'"')))return!1;return!0}function nt(){i.f.Cd();a&&(c.clearData(!1),c=null,o.clearData(!1),o=null,v.va(),v=null,p.va(),p=null,y.va(),y=null,u.Cd(),s=u=null,g.ag(),b=f=g=null,h=[],tt=null);w=a=!1}function r(){if(w)return!1;if(!a)throw Error("Appboy must be initialized before calling methods.");return!0}var ft={Yj:function(n){return new t.Qd(t.Mc,n)},bk:function(n,i,r,u,f,o,s,h,c){null==f&&(f={});var l=new t.kc(c,s),a=new t.hc(s,l,c,f[e.uj]);return new t.M(n,r,u,f[e.ji],i,a,h,l,c,s,o)},Gf:function(){return new t.Ta},Zj:function(n,i){return new t.bc(n,i)},Xj:function(n,i,r){return new t.Ra(n,i,r)},ck:function(n,i,r,u){return new t.$a(n,i,r,u)},ak:function(n,i,r,u,f,e,o){return new t.PushManager(n,i,r,u+"/safari/"+i,f,e,o)},$j:function(n){return new t.Jb(n)}};null==n&&(n=ft);var e={gi:"allowCrawlerActivity",Ld:"baseUrl",jj:"noCookies",Di:"enableLogging",Oi:"minimumIntervalBetweenTriggerActionsInSeconds",uj:"sessionTimeoutInSeconds",ji:"appVersion",tj:"serviceWorkerLocation",rj:"safariWebsitePushId",xg:"localization",Dg:"sdkFlavor",ug:"language"},b,k,f,tt,u,d,v,c,y,l,o,p,s,g,it=new t.Ta,h=[],a=!1,w=!1;return t.Qa={},t.Qa.yg=100,t.Qa.Vd="inAppMessage must be an ab.InAppMessage object",t.Qa.ef="must be an ab.Card object",{Yh:function(n){return it.ib(n)},Kf:function(r,nt){var ft,rt,ut,et;return a?(i.f.info("Braze has already been initialized with an API key."),!0):(i.f.tc(null!=nt&&nt[e.Di]),null==r||""===r||"string"!=typeof r)?(i.f.error("Braze requires a valid API key to be initialized."),!1):(b=r,f=nt||{},t.Mc.tc(),t.Mc.Hk&&!f[e.gi])?(i.f.info("Ignoring activity from crawler bot "+navigator.userAgent),w=!0,!1):(k=nt=t.ae.fk(r,f[e.jj]||!1),new t.j.hb(null,!0).Oa(t.j.B.hf))?(i.f.info("Ignoring all activity due to previous opt out"),w=!0,!1):(ft=["mparticle","wordpress"],null!=f[e.Dg]&&(rt=f[e.Dg],-1!==ft.indexOf(rt)?tt=rt:i.f.error("Invalid sdk flavor passed: "+rt)),ut=[],v=n.Gf(),h.push(v),c=n.Zj(v,nt),ut.push(c),p=n.Gf(),h.push(p),ft=null!=f[e.Ld]?f[e.Ld]:"https://dev.appboy.com/api/v3",d=n.Yj(nt),rt=new t.ob(nt),u=n.bk(b,ft,"2.2.4",tt,f,function(n){if(a)for(var t=0;t<ut.length;t++)ut[t].Ed(n)},nt,d,rt),et=f[e.Oi],null==et&&(et=30),o=n.ck(et,p,nt,u),ut.push(o),y=n.Gf(),h.push(y),l=n.Xj(y,u,nt),ut.push(l),u.tl(function(){l.yc()}),u.Kf(),s=n.ak(u.Qc(),b,d,ft,f[e.tj],f[e.rj],rt),g=n.$j(u.Qc()),nt="Initialized ",f&&f[e.Ld]&&(nt+='for the Braze backend at "'+f[e.Ld]+'" '),i.f.info(nt+('with API key "'+r+'".')),r=t.Mc.language,nt=!1,f&&(f[e.ug]&&(r=f[e.ug],nt=!0),f[e.xg]&&(r=f[e.xg],nt=!0)),t.Nf.tc(r,nt),it.Da(f),a=!0)},Cd:function(){i.f.info("Destroying appboy instance");k=null;nt()},uk:function(n){r()&&(null==n&&i.f.error("getDeviceId must be supplied with a callback. e.g., appboy.getDeviceId(function(deviceId) {console.log('the device id is ' + deviceId)})"),"function"==typeof n&&n(d.Dd().id))},cg:function(){i.f.cg()},Zf:function(n){i.f.Zf(n)},He:function(n){if(r()){u.He(s,n);var f=i.Z.lb.fc,e=new i.Z(f,i.f);e.yh(f.na.Bg,function(n,r){function h(){o.Rb(t.la.Ec,[s],l)}var c=r.lastClick,s=r.trackingString,l;i.f.info("Firing push click trigger from "+s+" push click at "+c);l=u.ek(c,s);u.Yk(h,h);e.uh(f.na.Bg,n)});e.qk(f.na.li,function(n){l.Ak(n)})}},qc:function(n,t){r()&&(null==n||0===n.length?(i.f.error("changeUser requires a non-empty userId."),"function"==typeof t&&(i.f.info("messagingReadyCallback provided with an empty userId. Firing immediately."),t())):u.qc(n.toString(),[c,l,o],t,s))},Qc:function(){if(r())return u.Qc()},Id:function(){r()&&u.Id()},Ke:function(){r()&&u.Ke()},Xh:function(n){if(r())return v.ib(n)},ye:function(){if(r())return c.ye()},yc:function(){if(r())return l.yc()},Vh:function(n){if(r())return y.ib(n)},Pc:function(){if(r())return l.Pc()},Zh:function(n){if(r())return p.ib(n)},Gd:function(n){if(r())return n instanceof t.h||n instanceof t.$b?u.Gd(n).L:(i.f.error(t.Qa.Vd),!1)},Fe:function(n){var f,e;if(r()){if(!(n instanceof t.h))return i.f.error(t.Qa.Vd),!1;if(f=u.Fe(n),f.L)for(e=0;e<f.K.length;e++)o.Rb(t.la.Gb,[n.triggerId],f.K[e]);return f.L}},Ee:function(n,f){var e,s;if(r()){if(!(n instanceof t.h.Aa))return i.f.error("button must be an ab.InAppMessage.Button object"),!1;if(!(f instanceof t.h))return i.f.error(t.Qa.Vd),!1;if(e=u.Ee(n,f),e.L)for(s=0;s<e.K.length;s++)o.Rb(t.la.Gb,[f.triggerId,n.id],e.K[s]);return e.L}},Fd:function(n,f,e){if(r()){if(!(n instanceof t.Sa))return i.f.error("inAppMessage argument to logInAppMessageHtmlClick must be an ab.HtmlMessage object."),!1;if(e=u.Fd(n,f,e),e.L)for(var s=0;s<e.K.length;s++)o.Rb(t.la.Gb,[n.triggerId,f],e.K[s]);return e.L}},ya:function(n,f){if(r())return n instanceof t.h||n instanceof t.$b?t.G.wb(t.h.Ba,f,f+" is not a valid in-app message display failure","ab.InAppMessage.DisplayFailures")?u.ya(n.triggerId,f).L:!1:(i.f.error(t.Qa.Vd),!1)},Ub:function(n,f){if(r()){if(!t.G.isArray(n))return i.f.error("cards must be an array"),!1;for(var e=0;e<n.length;e++)if(!(n[e]instanceof t.b))return i.f.error("Each card in cards "+t.Qa.ef),!1;return u.Ub(n,f).L}},Tb:function(n,f){if(r())return n instanceof t.b?u.Tb(n,f).L:(i.f.error("card "+t.Qa.ef),!1)},De:function(n){if(r())return n instanceof t.b?u.De(n).L:(i.f.error("card "+t.Qa.ef),!1)},Ih:function(){if(r())return u.Jh(i.tg.Ji).L},Hh:function(){if(r())return u.Jh(i.tg.ui).L},Ea:function(n){if(r()){for(var t=0;t<h.length;t++)h[t].Ea(n);it.Ea(n)}},va:function(){if(r())for(var n=0;n<h.length;n++)h[n].va()},Pf:function(n,f){var e,s;if(r()){if(null==n||0>=n.length)return i.f.error('logCustomEvent requires a non-empty eventName, got "'+n+'". Ignoring event.'),!1;if(!t.S.Wa(n,"log custom event","the event name")||!ut(f,"logCustomEvent","eventProperties",'log custom event "'+n+'"',"event"))return!1;if(e=u.Pf(n,rt(f)),e.L)for(i.f.info('Logged custom event "'+n+'".'),s=0;s<e.K.length;s++)o.Rb(t.la.Zb,[n,f],e.K[s]);return e.L}},Qf:function(n,f,e,s,h){if(r()){if(null==e&&(e="USD"),null==s&&(s=1),null==n||0>=n.length)return i.f.error('logPurchase requires a non-empty productId, got "'+n+'", ignoring.'),!1;if(!t.S.Wa(n,"log purchase","the purchase name"))return!1;var c=parseFloat(f);if(isNaN(c))return i.f.error("logPurchase requires a numeric price, got "+f+", ignoring."),!1;if(c=c.toFixed(2),f=parseInt(s),isNaN(f))return i.f.error("logPurchase requires an integer quantity, got "+s+", ignoring."),!1;if(1>f||f>t.Qa.yg)return i.f.error("logPurchase requires a quantity >1 and <"+t.Qa.yg+", got "+f+", ignoring."),!1;if(e=e.toUpperCase(),-1==="AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BRL BSD BTC BTN BWP BYR BZD CAD CDF CHF CLF CLP CNY COP CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GGP GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS IMP INR IQD IRR ISK JEP JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MGA MKD MMK MNT MOP MRO MTL MUR MVR MWK MXN MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SVC SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX USD UYU UZS VEF VND VUV WST XAF XAG XAU XCD XDR XOF XPD XPF XPT YER ZAR ZMK ZMW ZWL".split(" ").indexOf(e))return i.f.error("logPurchase requires a valid currencyCode, got "+e+", ignoring."),!1;if(!ut(h,"logPurchase","purchaseProperties",'log purchase "'+n+'"',"purchase"))return!1;if(s=u.Qf(n,c,e,f,rt(h)),s.L)for(i.f.info("Logged "+f+" purchase"+(1<f?"s":"")+' of "'+n+'" for '+e+" "+c+"."),e=0;e<s.K.length;e++)o.Rb(t.la.ec,[n,h],s.K[e]);return s.L}},Sb:function(){if(r())return s.Sb()},uc:function(){if(r())return s.uc()},Mf:function(n,t,i){r()&&s.Mf(n,t,i)},Be:function(){if(r())return s.Be()},Uk:function(n,t,i){if(r())return s.subscribe(i,function(t,i,r){u.Id();"function"==typeof n&&n(t,i,r)},t)},El:function(n,t){if(r())return s.unsubscribe(n,t)},bg:function(n,i,f,e,o){if(r())return t.Rd.Gl(n,i)?(u.bg(n,i,f,e,o),!0):!1},Dl:function(){r()&&g.watchPosition()},sl:function(){null!=u&&u.Id();var n=new t.j.hb(null,!0);n.jb(t.j.B.hf,"This-cookie-will-expire-in-"+n.vk());n=i.Z.lb.fc;new i.Z(n,i.f).setItem(n.na.gf,n.Zd,!0);nt();w=!0},$k:function(){new t.j.hb(null,!0).remove(t.j.B.hf);var n=i.Z.lb.fc;new i.Z(n,i.f).uh(n.na.gf,n.Zd);nt()},Il:function(){if(null==k)throw Error("Appboy must be initialized before calling methods.");k.clearData();for(var r=t.G.keys(i.Z.lb),n=0;n<r.length;n++)new i.Z(i.Z.lb[r[n]],i.f).clearData();a&&(c.clearData(!0),o.clearData(!0))}}}var i={lg:{}},t,r;return i.lg.Fl=function(n){var i="=".repeat((4-n.length%4)%4),t;for(n=(n+i).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(n),i=new Uint8Array(n.length),t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i},i.$={CustomEvent:"ce",Si:"p",oj:"pc",Rl:"ca",Sl:"pd",Ui:"i",Ti:"ie",ti:"cci",wi:"ccic",ri:"ccc",si:"ccd",Hg:"ss",wj:"se",Ri:"si",sg:"sc",rg:"sbc",Qi:"sfe",xi:"iec",bj:"lr",ki:"uae",pi:"ci",oi:"cc",$i:"lcaa",aj:"lcar"},i.tg={Ji:"feed_displayed",ui:"content_cards_displayed"},i.dd=function(){},i.dd.ze=function(){function n(n){var t=(Math.random().toString(16)+"000000000").substr(2,8);return n?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return n()+n(!0)+n(!0)+n()},i.Z=function(n,t){this.Yg="undefined"==typeof window?self:window;this.O=n;this.P=t},i.Z.lb={fc:{aa:"AppboyServiceWorkerAsyncStorage",VERSION:5,na:{yi:"data",Bg:"pushClicks",kf:"pushSubscribed",Nl:"fallbackDevice",li:"cardUpdates",gf:"optOut"},Zd:1}},i.Z.prototype.Bf=function(){if("indexedDB"in this.Yg)return this.Yg.indexedDB},i.Z.prototype.Kc=function(){try{return null==this.Bf()?!1:(this.Bf().open("Braze IndexedDB Support Test"),!0)}catch(n){return this.P.info("Not using IndexedDB for storage due to following error: "+n),!1}},i.Z.prototype.Lc=function(n,t){var r=this.Bf().open(this.O.aa,this.O.VERSION),i;return null==r?("function"==typeof t&&t(),!1):(i=this,r.onupgradeneeded=function(n){i.P.info("Upgrading indexedDB "+i.O.aa+" to v"+i.O.VERSION+"...");n=n.target.result;for(var t in i.O.na)i.O.na.hasOwnProperty(t)&&!n.objectStoreNames.contains(i.O.na[t])&&n.createObjectStore(i.O.na[t])},r.onsuccess=function(r){i.P.debug("Opened indexedDB "+i.O.aa+" v"+i.O.VERSION);var u=r.target.result;u.onversionchange=function(){u.close();"function"==typeof t&&t();i.P.error("Needed to close the database unexpectedly because of an upgrade in another tab")};n(u)},r.onerror=function(n){return i.P.info("Could not open indexedDB "+i.O.aa+" v"+i.O.VERSION+": "+n.target.errorCode),"function"==typeof t&&t(),!0},!0)},i.Z.prototype.setItem=function(n,t,i,r,u){if(!this.Kc())return"function"==typeof u&&u(),!1;var f=this;return this.Lc(function(e){e.objectStoreNames.contains(n)?(e=e.transaction([n],"readwrite").objectStore(n).put(i,t),e.onerror=function(){f.P.error("Could not store object "+t+" in "+n+" on indexedDB "+f.O.aa);"function"==typeof u&&u()},e.onsuccess=function(){f.P.debug("Stored object "+t+" in "+n+" on indexedDB "+f.O.aa);"function"==typeof r&&r()}):(f.P.error("Could not store object "+t+" in "+n+" on indexedDB "+f.O.aa+" - "+n+" is not a valid objectStore"),"function"==typeof u&&u())},u)},i.Z.prototype.getItem=function(n,t,i){if(!this.Kc())return!1;var r=this;return this.Lc(function(u){u.objectStoreNames.contains(n)?(u=u.transaction([n],"readonly").objectStore(n).get(t),u.onerror=function(){r.P.error("Could not retrieve object "+t+" in "+n+" on indexedDB "+r.O.aa)},u.onsuccess=function(u){r.P.debug("Retrieved object "+t+" in "+n+" on indexedDB "+r.O.aa);u=u.target.result;null!=u&&i(u)}):r.P.error("Could not retrieve object "+t+" in "+n+" on indexedDB "+r.O.aa+" - "+n+" is not a valid objectStore")})},i.Z.prototype.yh=function(n,t,i){if(this.Kc()){var r=this;this.Lc(function(u){u.objectStoreNames.contains(n)?(u=u.transaction([n],"readonly").objectStore(n).openCursor(null,"prev"),u.onerror=function(){r.P.error("Could not open cursor for "+n+" on indexedDB "+r.O.aa);"function"==typeof i&&i()},u.onsuccess=function(u){u=u.target.result;null!=u&&null!=u.value&&null!=u.key?(r.P.debug("Retrieved last record "+u.key+" in "+n+" on indexedDB "+r.O.aa),t(u.key,u.value)):"function"==typeof i&&i()}):(r.P.error("Could not retrieve last record from "+n+" on indexedDB "+r.O.aa+" - "+n+" is not a valid objectStore"),"function"==typeof i&&i())},i)}else"function"==typeof i&&i()},i.Z.prototype.uh=function(n,t){if(this.Kc()){var i=this;this.Lc(function(r){r.objectStoreNames.contains(n)?(r=r.transaction([n],"readwrite").objectStore(n)["delete"](t),r.onerror=function(){i.P.error("Could not delete record "+t+" from "+n+" on indexedDB "+i.O.aa)},r.onsuccess=function(){i.P.debug("Deleted record "+t+" from "+n+" on indexedDB "+i.O.aa)}):i.P.error("Could not delete record "+t+" from "+n+" on indexedDB "+i.O.aa+" - "+n+" is not a valid objectStore")})}},i.Z.prototype.qk=function(n,t){if(this.Kc()){var i=this;this.Lc(function(r){var f,u;r.objectStoreNames.contains(n)?(f=r.transaction([n],"readwrite").objectStore(n),r=f.openCursor(),u=[],r.onerror=function(){0<u.length?(i.P.info("Cursor closed midway through for "+n+" on indexedDB "+i.O.aa),t(u)):i.P.error("Could not open cursor for "+n+" on indexedDB "+i.O.aa)},r.onsuccess=function(n){var i=n.target.result;null!=i?(null!=i.value&&null!=i.key&&(f["delete"](i.key).onsuccess=function(){u.push(i.value)}),i.continue()):0<u.length&&t(u)}):i.P.error("Could not retrieve objects from "+n+" on indexedDB "+i.O.aa+" - "+n+" is not a valid objectStore")})}},i.Z.prototype.clearData=function(){var t,i,n;if(!this.Kc())return!1;t=[];for(i in this.O.na)this.O.na.hasOwnProperty(i)&&this.O.na[i]!==this.O.na.gf&&t.push(this.O.na[i]);return n=this,this.Lc(function(i){var r,u;for(i=i.transaction(t,"readwrite"),r=0;r<t.length;r++)u=i.objectStore(t[r]).clear(),u.onsuccess=function(){n.P.debug("Cleared "+this.source.name+" on indexedDB "+n.O.aa)},u.onerror=function(){n.P.error("Could not clear "+this.source.name+" on indexedDB "+n.O.aa)};i.oncomplete=function(){n.P.debug("Cleared all object stores on indexedDB "+n.O.aa)};i.onerror=function(){n.P.error("Could not clear object stores on indexedDB "+n.O.aa)}})},i.f={tc:function(n){(void 0!==n||void 0===i.f.Mb)&&(i.f.Mb=!!n);i.f.Vg||(i.f.Vg=!0)},Cd:function(){i.f.Vg=!1;i.f.Mb=void 0;i.f.P=void 0},Zf:function(n){"function"!=typeof n?i.f.info("Ignoring setLogger call since logger is not a function"):(i.f.tc(),i.f.P=n)},cg:function(){i.f.tc();i.f.Mb?(console.log("Disabling Appboy logging"),i.f.Mb=!1):(console.log("Enabled Appboy logging"),i.f.Mb=!0)},debug:function(n){i.f.Mb&&null!=i.f.P&&i.f.P("Appboy: "+n)},info:function(n){i.f.Mb&&(null!=i.f.P?i.f.P("Appboy: "+n):console.log("Appboy: "+n))},error:function(n){i.f.Mb&&(null!=i.f.P?i.f.P("Appboy SDK Error: "+n):console.error("Appboy SDK Error: "+n))}},t={Va:function(n,t){n.prototype=Object.create(t.prototype);n.prototype.constructor=n}},"undefined"==typeof console&&(window.console={log:function(){}}),Function.prototype.bind||(Function.prototype.bind=function(n){function i(){return u.apply(this.prototype&&this instanceof t?this:n,r.concat(Array.prototype.slice.call(arguments)))}function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this;return t.prototype=this.prototype,i.prototype=new t,i}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(n){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),void 0===Object.create&&(Object.create=function(n){function t(){}return t.prototype=n,new t}),Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){var i=this.length>>>0;for(t=Number(t)||0,t=0>t?Math.ceil(t):Math.floor(t),0>t&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1}),Event.prototype.stopPropagation||(Event.prototype.stopPropagation=function(){this.cancelBubble=!0}),Date.now||(Date.now=function(){return(new Date).valueOf()}),window.atob||(window.atob=function(n){var o={},t,r=[],s="",h=String.fromCharCode,u=[[65,91],[97,123],[48,58],[43,44],[47,48]],i,f,e;for(i in u)for(t=u[i][0];t<u[i][1];t++)r.push(h(t));for(t=0;64>t;t++)o[r[t]]=t;for(t=0;t<n.length;t+=72)for(f=r=0,e=n.substring(t,t+72),i=0;i<e.length;i++)for(u=o[e.charAt(i)],r=(r<<6)+u,f+=6;8<=f;)s+=h((r>>>(f-=8))%256);return s}),t.Qd=function(n,t){this.rd=n;this.A=t},t.Qd.prototype.Dd=function(){var n=this.A.Uc(t.j.B.La.jg);return null==n&&(n=new t.Hb(i.dd.ze()),this.A.Me(t.j.B.La.jg,n)),new t.kg(n.tb,this.rd.yd,this.rd.version,this.rd.mj,screen.width+"x"+screen.height,this.rd.language,this.Gj(),this.rd.userAgent)},t.Qd.prototype.Gj=function(){var t=new Date,n;if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions&&(n=Intl.DateTimeFormat().resolvedOptions().timeZone,null!=n&&""!==n))return n}catch(r){i.f.info("Intl.DateTimeFormat threw an error, probably https://bugs.chromium.org/p/chromium/issues/detail?id=811403, falling back to GTM offset: "+r.message)}return this.Ej(t.getTimezoneOffset())},t.Qd.prototype.Ej=function(n){var i=parseInt(n/60),r=parseInt(n%60),t="GMT";return 0!==n&&(t=t+(0>n?"+":"-")+(("00"+Math.abs(i)).slice(-2)+":"+("00"+Math.abs(r)).slice(-2))),t},t.Jb=function(n){this.Pb=n;this.me=null;this.dh="geolocation"in navigator},t.Jb.gd="Location tracking is not supported in this browser.",t.Jb.prototype.Kj=function(n){if(document.hidden){this.ag();var i=this,t=function(){document.hidden||(document.removeEventListener("visibilitychange",t,!1),i.watchPosition())};document.addEventListener("visibilitychange",t,!1)}this.Pb.Le(n.coords.latitude,n.coords.longitude,n.coords.accuracy,n.coords.altitude,n.coords.altitudeAccuracy)},t.Jb.prototype.Jj=function(n){n.code===n.PERMISSION_DENIED?i.f.info(n.message):i.f.error("Could not detect user location: "+n.code+" - "+n.message)},t.Jb.prototype.watchPosition=function(){this.dh?(this.ag(),this.me=navigator.geolocation.watchPosition(this.Kj.bind(this),this.Jj.bind(this)),i.f.info("Requested Geolocation")):i.f.info(t.Jb.gd)},t.Jb.prototype.ag=function(){this.dh?null!=this.me&&(navigator.geolocation.clearWatch(this.me),this.me=null,i.f.info("Stopped watching Geolocation")):i.f.info(t.Jb.gd)},t.PushManager=function(n,t,i,r,u,f,e){this.Pb=n;this.cb=t;this.sd=i;this.Aj=r;this.vd=u||"/service-worker.js";this.$g=f;this.Na=e;this.le="serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window;this.xf="safari"in window&&"pushNotification"in window.safari},t.PushManager.gd="Push notifications are not supported in this browser.",t.PushManager.yb="catch",t.PushManager.prototype.Sb=function(){return this.le||this.xf},t.PushManager.prototype.uc=function(){return this.Sb()&&null!=Notification&&null!=Notification.permission&&"denied"===Notification.permission},t.PushManager.prototype.Be=function(){return this.Sb()&&null!=Notification&&null!=Notification.permission&&"granted"===Notification.permission},t.PushManager.prototype.Mf=function(n,r,u){if(u=this.$g||u,this.Sb())if(this.le){var f=this;navigator.serviceWorker.register(this.vd).then(function(){f.uc()?r():navigator.serviceWorker.ready.then(function(i){i.pushManager.getSubscription().then(function(t){t?n():r()})[t.PushManager.yb](function(){r()})})})[t.PushManager.yb](function(){r()})}else null==u||""===u?i.f.error("You must supply the safariWebsitePushId argument in order to use isPushGranted on Safari"):"granted"===window.safari.pushNotification.permission(u).permission?n():r();else r()},t.PushManager.prototype.Df=function(n,t){var i,r,u,f;if("string"==typeof n?i=n:0!==n.endpoint.indexOf("https://android.googleapis.com/gcm/send")?i=n.endpoint:(i=n.endpoint,n.subscriptionId&&-1===n.endpoint.indexOf(n.subscriptionId)&&(i=n.endpoint+"/"+n.subscriptionId)),r=null,u=null,null!=n.getKey)try{r=btoa(String.fromCharCode.apply(null,new Uint8Array(n.getKey("p256dh"))));u=btoa(String.fromCharCode.apply(null,new Uint8Array(n.getKey("auth"))))}catch(e){if("invalid arguments"!==e.message)throw e;}n=n.options&&(f=n.options.applicationServerKey)&&f.byteLength&&0<f.byteLength?btoa(String.fromCharCode.apply(null,new Uint8Array(f))).replace(/\+/g,"-").replace(/\//g,"_"):null;this.Pb.Xf(i,r,u,n);i&&"function"==typeof t&&t(i,r,u)},t.PushManager.prototype.nh=function(){this.Pb.Hd(!0)},t.PushManager.prototype.mh=function(n,r,u,f){if("default"===r.permission){var e=this;window.safari.pushNotification.requestPermission(this.Aj,n,{api_key:this.cb,device_id:this.sd.Dd().id},function(i){"granted"===i.permission&&e.Pb.$f(t.w.hd.OPTED_IN);e.mh(n,i,u,f)})}else"denied"===r.permission?(this.Pb.Hd(!1),i.f.info("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard."),"function"==typeof f&&f(!1)):"granted"===r.permission&&(i.f.info("Device successfully subscribed to push."),this.Df(r.deviceToken,u))},t.PushManager.prototype.gh=function(n,r,u,f){function s(r){switch(r){case"denied":i.f.info("Permission for push notifications was denied.");"function"==typeof f&&f(!1);break;case"default":r="Permission for push notifications was ignored.";e.uc()&&(r+=" The browser has automatically blocked further permission requests for a period (probably 1 week).");i.f.info(r);"function"==typeof f&&f(!0);break;case"granted":n.pushManager.subscribe(h).then(function(n){i.f.info("Device successfully subscribed to push.");c||e.Pb.$f(t.w.hd.OPTED_IN);e.Df(n,u)})[t.PushManager.yb](function(n){e.uc()?(i.f.info("Permission for push notifications was denied."),"function"==typeof f&&f(!1)):i.f.error("Push subscription failed. Be sure that your site is https and that your manifest file is correctly configured:"+n)});break;default:i.f.error("Received unexpected permission result "+r)}}var e=this,h={userVisibleOnly:!0},c,o;null!=r&&(h.applicationServerKey=r);c=this.Be();o=!1;(r=Notification.requestPermission(function(n){o&&s(n)}))?r.then(function(n){s(n)}):o=!0},t.PushManager.prototype.subscribe=function(n,r,u){var f,e;n=this.$g||n;this.Sb()?this.le?null!=window.location&&null!=window.location.pathname&&0!==window.location.pathname.indexOf(this.vd.substr(0,this.vd.lastIndexOf("/")+1))?i.f.error("Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from "+window.location.pathname+" but service worker is at "+this.vd+")"):(f=this,navigator.serviceWorker.register(this.vd).then(function(){f.uc()?(i.f.info("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial."),f.Pb.Hd(!1),"function"==typeof u&&u()):navigator.serviceWorker.ready.then(function(n){n&&"function"==typeof n.update&&n.update();n.pushManager.getSubscription().then(function(e){var o=null;f.Na&&null!=f.Na.Bh()&&(o=i.lg.Fl(f.Na.Bh()));e?null!=o&&e.options&&e.options.applicationServerKey&&e.options.applicationServerKey.byteLength&&0<e.options.applicationServerKey.byteLength&&!t.G.isEqual(o,new Uint8Array(e.options.applicationServerKey))?(12<e.options.applicationServerKey.byteLength?i.f.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):i.f.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),e.unsubscribe().then(function(t){t?f.gh(n,o,r,u):(i.f.error("Failed to unsubscribe device from push while unsubscribing token from different VAPID provider."),"function"==typeof u&&u(!1))})[t.PushManager.yb](function(n){i.f.error("Push unsubscription error while unsubscribing token from different VAPID provider: "+n);"function"==typeof u&&u(!1)})):(i.f.info("Device already subscribed to push, sending existing subscription to backend."),f.Df(e,r)):f.gh(n,o,r,u)})[t.PushManager.yb](function(n){i.f.error("Error checking current push subscriptions: "+n)})})})[t.PushManager.yb](function(n){i.f.error("ServiceWorker registration failed: "+n)})):this.xf&&(null==n||""===n?i.f.error("You must supply the safariWebsitePushId argument in order to use registerAppboyPushMessages on Safari"):(e=window.safari.pushNotification.permission(n),this.mh(n,e,r,u))):i.f.info(t.PushManager.gd)},t.PushManager.prototype.unsubscribe=function(n,r){if(this.Sb())if(this.le){var u=this;navigator.serviceWorker.getRegistration().then(function(f){f&&f.pushManager.getSubscription().then(function(e){e&&(u.nh(),e.unsubscribe().then(function(t){t?(i.f.info("Device successfully unsubscribed from push."),"function"==typeof n&&n()):(i.f.error("Failed to unsubscribe device from push."),"function"==typeof r&&r());f.unregister();i.f.info("Service worker successfully unregistered.")})[t.PushManager.yb](function(n){i.f.error("Push unsubscription error: "+n);"function"==typeof r&&r()}))})[t.PushManager.yb](function(n){i.f.error("Error unsubscribing from push: "+n);"function"==typeof r&&r()})})}else this.xf&&(this.nh(),i.f.info("Device unsubscribed from push."),"function"==typeof n&&n());else i.f.info(t.PushManager.gd)},t.ob=function(n){this.A=n;this.ke=null},t.ob.prototype.mc=function(){if(null==this.ke){var n=this.A.ma(t.j.B.C.Eg);this.ke=null!=n?t.Fc.qa(n):new t.Fc}return this.ke},t.ob.prototype.wk=function(){return this.mc().Of},t.ob.prototype.Tk=function(n){null!=n&&null!=n.config&&(n=n.config,n.time>this.mc().Of&&(this.ke=n=new t.Fc(n.time,n.events_blacklist,n.attributes_blacklist,n.purchases_blacklist,n.messaging_session_timeout,n.vapid_public_key),this.A.fa(t.j.B.C.Eg,n.X())))},t.ob.prototype.mk=function(n){return-1!==this.mc().wh.indexOf(n)},t.ob.prototype.qh=function(n){return-1!==this.mc().rh.indexOf(n)},t.ob.prototype.Rk=function(n){return-1!==this.mc().Ph.indexOf(n)},t.ob.prototype.xk=function(){return this.mc().Rf},t.ob.prototype.Bh=function(){return this.mc().ci},t.hc=function(n,t,r,u){this.A=n;this.H=t;this.Na=r;this.ud=1e3;u=parseFloat(u);isNaN(u)&&(u=1800);u<this.ud/1e3&&(i.f.info("Specified session timeout of "+u+"s is too small, using the minimum session timeout of "+this.ud/1e3+"s instead."),u=this.ud/1e3);this.Cj=u},t.hc.prototype.hh=function(n,r){return new t.Event(this.H.T(),i.$.wj,n,r.tb,{d:t.N.Ad(n-r.Bd)})},t.hc.prototype.tk=function(){var n=this.A.Uc(t.j.B.La.gc);return null==n?null:n.tb},t.hc.prototype.Nk=function(){var r=Date.now(),n=this.Na.xk(),i;return null==n?!1:(i=this.A.ma(t.j.B.C.zg),(n=null==i||r-i>1e3*n)&&this.A.fa(t.j.B.C.zg,r),n)},t.hc.prototype.Hj=function(n,t){return null==t?!0:n-t.Bd<this.ud?!1:t.If<n},t.hc.prototype.ha=function(){var u=Date.now(),r=u+1e3*this.Cj,n=this.A.Uc(t.j.B.La.gc),e,f;return this.Hj(u,n)?(e="Generating session start event with time "+u,null!=n&&(f=n.Ce,f-n.Bd<this.ud&&(f=n.Bd+this.Vl),this.A.Je(this.hh(f,n)),e+=" (old session ended "+f+")"),e+=". Will expire "+r.valueOf(),i.f.info(e),r=new t.Hb(i.dd.ze(),r),this.A.Je(new t.Event(this.H.T(),i.$.Hg,u,r.tb)),this.A.Me(t.j.B.La.gc,r),r.tb):(n.Ce=u,n.If=r,this.A.Me(t.j.B.La.gc,n),n.tb)},t.hc.prototype.dk=function(){var n=this.A.Uc(t.j.B.La.gc);null!=n&&(this.A.Wk(t.j.B.La.gc),this.A.Je(this.hh(Date.now(),n)))},t.ae=function(){},t.j=function(n,t){this.td=n;this.xa=t},t.ae.fk=function(n,r){var u=!1,e;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(t.j.B.C.qf,!0);localStorage.getItem(t.j.B.C.qf)&&(localStorage.removeItem(t.j.B.C.qf),u=!0)}catch(f){if(("QuotaExceededError"===f.name||"NS_ERROR_DOM_QUOTA_REACHED"===f.name)&&0<localStorage.length)u=!0;else throw f;}}catch(f){i.f.info("Local Storage not supported!")}return e=t.ae.Dj(),r=new t.j.Pd(n,e&&!r,u),new t.j(r,u?new t.j.Dc(n):new t.j.Cc)},t.ae.Dj=function(){return navigator.cookieEnabled||"cookie"in document&&(0<document.cookie.length||-1<(document.cookie="test").indexOf.call(document.cookie,"test"))},t.j.B={La:{Og:"ab.storage.userId",jg:"ab.storage.deviceId",gc:"ab.storage.sessionId"},C:{qf:"ab.test",Jd:"ab.storage.events",Xb:"ab.storage.attributes",$e:"ab.storage.device",lf:"ab.storage.pushToken",ff:"ab.storage.newsFeed",df:"ab.storage.lastNewsFeedRefresh",Wc:"ab.storage.cardImpressions",Vi:"ab.storage.lastInAppMessageRefresh",Eg:"ab.storage.serverConfig",rf:"ab.storage.triggers",Xi:"ab.storage.lastTriggeredTime",Wi:"ab.storage.lastTriggeredTimesById",Yi:"ab.storage.lastTriggerEventDataById",zg:"ab.storage.messagingSessionStart",We:"ab.storage.cc",Ve:"ab.storage.ccLastFullSync",Ue:"ab.storage.ccLastCardUpdated",Yc:"ab.storage.ccImpressions",Xc:"ab.storage.ccDismissals",Td:"ab.storage.lastDisplayedTriggerTimesById",cf:"ab.storage.lastDisplayedTriggerTime",od:"ab.storage.triggerFireInstancesById"},hf:"ab.optOut"},t.j.prototype.Me=function(n,i){var r=i;null!=i&&i instanceof t.Hb&&(r=i.X());this.td.remove(n);this.td.jb(n,r)},t.j.prototype.Uc=function(n){return t.Hb.qa(this.td.Oa(n))},t.j.prototype.Wk=function(n){this.td.remove(n)},t.j.prototype.za=function(n){var i,r;if(null==n||0===n.length)return!1;for(t.G.isArray(n)||(n=[n]),i=this.xa.Oa(t.j.B.C.Jd),null!=i&&t.G.isArray(i)||(i=[]),r=0;r<n.length;r++)i.push(n[r].X());return this.xa.jb(t.j.B.C.Jd,i)},t.j.prototype.Je=function(n){null==n||this.za([n])},t.j.prototype.vh=function(){var r=this.xa.Oa(t.j.B.C.Jd),n;this.xa.remove(t.j.B.C.Jd);null==r&&(r=[]);var f=[],e=!1,u=null;if(t.G.isArray(r))for(n=0;n<r.length;n++)t.Event.Gh(r[n])?f.push(t.Event.qa(r[n])):u=n;else e=!0;return(e||null!=u)&&(n="Stored events could not be deserialized as ab.Events",e&&(n+=", was "+Object.prototype.toString.call(r)+" not an array"),null!=u&&(n+=", value at index "+u+" does not look like an event"),n+=", serialized values were of type "+typeof r+": "+JSON.stringify(r),f.push(new t.Event(null,i.$.Ti,Date.now(),null,{e:n}))),f},t.j.prototype.fa=function(n,i){t.G.wb(t.j.B.C,n,"StorageManager cannot store object.","ab.StorageManager.KEYS.OBJECTS")&&this.xa.jb(n,i)},t.j.prototype.ma=function(n){return t.G.wb(t.j.B.C,n,"StorageManager cannot retrieve object.","ab.StorageManager.KEYS.OBJECTS")?this.xa.Oa(n):!1},t.j.prototype.ra=function(n){t.G.wb(t.j.B.C,n,"StorageManager cannot remove object.","ab.StorageManager.KEYS.OBJECTS")&&this.xa.remove(n)},t.j.prototype.clearData=function(){for(var n=t.G.keys(t.j.B.La),r=t.G.keys(t.j.B.C),i=0;i<n.length;i++)this.td.remove(t.j.B.La[n[i]]);for(n=0;n<r.length;n++)this.xa.remove(t.j.B.C[r[n]])},t.j.prototype.Af=function(n){return n||"ab.storage.attributes.anonymous_user"},t.j.prototype.Lh=function(n){var r=this.xa.Oa(t.j.B.C.Xb),u,i;null==r&&(r={});u=this.Af(n[t.w.qd]);for(i in n)i===t.w.qd||null!=r[u]&&null!=r[u][i]||this.Th(n[t.w.qd],i,n[i])},t.j.prototype.Th=function(n,i,r){var s=this.xa.Oa(t.j.B.C.Xb),v,e,h,o,f;if(null==s&&(s={}),v=this.Af(n),e=s[v],null==e&&(e={},null!=n&&(e[t.w.qd]=n)),i===t.w.fg){null==e[i]&&(e[i]={});for(h in r){if(n=r[h],o=e[i][h],f=null,u(n)){if(void 0!==n[t.w.Yb]){if(f=a(n[t.w.Yb],o),!f&&null!==f)return!1;o=f}if(void 0!==n[t.w.Ja]){if(f=l(n[t.w.Ja],o),!f&&null!==f)return!1;o=f}if(void 0!==n[t.w.Ka]&&(f=c(n[t.w.Ka],o),!f&&null!==f))return!1}else f=r[h];e[i][h]=f}}else e[i]=r;return s[v]=e,this.xa.jb(t.j.B.C.Xb,s)},t.j.prototype.lk=function(){var n=this.xa.Oa(t.j.B.C.Xb),i,r;this.xa.remove(t.j.B.C.Xb);i=[];for(r in n)null!=n[r]&&i.push(n[r]);return i},t.j.prototype.Sj=function(n){var u=this.xa.Oa(t.j.B.C.Xb),i,r,f;if(null!=u&&(i=this.Af(null),r=u[i],null!=r&&(u[i]=void 0,this.xa.jb(t.j.B.C.Xb,u),r[t.w.qd]=n,this.Lh(r))),i=this.Uc(t.j.B.La.gc),u=null,null!=i&&(u=i.tb),i=this.vh(),null!=i)for(r=0;r<i.length;r++)f=i[r],null==f.Vb&&f.sessionId==u&&(f.Vb=n),this.Je(f)},t.j.Dc=function(n){this.cb=n;this.xh=10},t.j.Dc.prototype.nc=function(n){return n+"."+this.cb},t.j.Dc.prototype.jb=function(n,t){t={v:t};try{return localStorage.setItem(this.nc(n),JSON.stringify(t)),!0}catch(r){return i.f.info("Storage failure: "+r.message),!1}},t.j.Dc.prototype.Oa=function(n){try{var t=JSON.parse(localStorage.getItem(this.nc(n)));return null==t?null:t.v}catch(r){return i.f.info("Storage retrieval failure: "+r.message),null}},t.j.Dc.prototype.remove=function(n){try{localStorage.removeItem(this.nc(n))}catch(t){return i.f.info("Storage removal failure: "+t.message),!1}},t.j.hb=function(n,t){this.cb=n;this.Zg=this.Fj();this.Sg=10518980;this.bh=!!t},t.j.hb.prototype.nc=function(n){return null!=this.cb?n+"."+this.cb:n},t.j.hb.prototype.Fj=function(){for(var i=0,n=document.domain,r=n.split("."),t="ab._gd"+Date.now();i<r.length-1&&-1===document.cookie.indexOf(t+"="+t);)i++,n="."+r.slice(-1-i).join("."),document.cookie=t+"="+t+";domain="+n+";";return document.cookie=t+"=;expires="+new Date(0).toGMTString()+";domain="+n+";",n},t.j.hb.prototype.vk=function(){var n=new Date;return n.setTime(n.getTime()+6e4*this.Sg),n.getFullYear()},t.j.hb.prototype.jb=function(n,t){var r=new Date,u;return(r.setTime(r.getTime()+6e4*this.Sg),r="expires="+r.toUTCString(),u="domain="+this.Zg,t=this.bh?t:encodeURIComponent(JSON.stringify(t)),n=this.nc(n)+"="+t+";"+r+";"+u+";path=/",4093<=n.length)?(i.f.info("Storage failure: string is "+n.length+" chars which is too large to store as a cookie."),!1):(document.cookie=n,!0)},t.j.hb.prototype.Oa=function(n){for(var t,o,r=[],u=this.nc(n)+"=",e=document.cookie.split(";"),f=0;f<e.length;f++){for(t=e[f];" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(u))try{o=this.bh?t.substring(u.length,t.length):JSON.parse(decodeURIComponent(t.substring(u.length,t.length)));r.push(o)}catch(s){return i.f.info("Storage retrieval failure: "+s.message),this.remove(n),null}}return 0<r.length?r[r.length-1]:null},t.j.hb.prototype.remove=function(n){n=this.nc(n)+"=;expires="+new Date(0).toGMTString();document.cookie=n;document.cookie=n+";path=/";document.cookie=n+";path="+document.location.pathname;n=n+";domain="+this.Zg;document.cookie=n;document.cookie=n+";path=/";document.cookie=n+";path="+document.location.pathname},t.j.Cc=function(){this.wf={};this.Xg=5242880;this.xh=3},t.j.Cc.prototype.jb=function(n,t){var r={value:t};return(t=this.Oj(t),t>this.Xg)?(i.f.info("Storage failure: object is ≈"+t+" bytes which is greater than the max of "+this.Xg),!1):(this.wf[n]=r,!0)},t.j.Cc.prototype.Oj=function(n){var r=[],i,t,u;for(n=[n],i=0;n.length;)if(t=n.pop(),"boolean"==typeof t)i+=4;else if("string"==typeof t)i+=2*t.length;else if("number"==typeof t)i+=8;else if("object"==typeof t&&-1===r.indexOf(t)){r.push(t);for(u in t)n.push(t[u])}return i},t.j.Cc.prototype.Oa=function(n){return n=this.wf[n],null==n?null:n.value},t.j.Cc.prototype.remove=function(n){this.wf[n]=null},t.j.Pd=function(n,i,r){this.rb=[];i&&this.rb.push(new t.j.hb(n));r&&this.rb.push(new t.j.Dc(n));this.rb.push(new t.j.Cc)},t.j.Pd.prototype.jb=function(n,t){for(var i=!0,r=0;r<this.rb.length;r++)i=this.rb[r].jb(n,t)&&i;return i},t.j.Pd.prototype.Oa=function(n){for(var i,t=0;t<this.rb.length;t++)if(i=this.rb[t].Oa(n),null!=i)return i;return null},t.j.Pd.prototype.remove=function(n){for(var t=0;t<this.rb.length;t++)this.rb[t].remove(n)},t.Ta=function(){this.wd={}},t.Ta.prototype.ib=function(n){if("function"!=typeof n)return null;var t=i.dd.ze();return this.wd[t]=n,t},t.Ta.prototype.Ea=function(n){delete this.wd[n]},t.Ta.prototype.va=function(){this.wd={}},t.Ta.prototype.Da=function(n){var t=[];for(var i in this.wd)t.push(this.wd[i](n))},t.kc=function(n,t){this.Na=n;this.A=t},t.kc.prototype.T=function(){var n=this.A.Uc(t.j.B.La.Og);return null!=n?n.tb:null},t.kc.prototype.Ck=function(n){var i=null==this.T();this.A.Me(t.j.B.La.Og,new t.Hb(n));i&&this.A.Sj(n)},t.kc.prototype.Vc=function(n,r){if(this.Na.qh(n))return i.f.info('Custom Attribute "'+n+'" is blacklisted, ignoring.'),!1;var u={};return u[n]=r,this.ca(t.w.fg,u)},t.kc.prototype.ca=function(n,t){return this.A.Th(this.T(),n,t)},t.kc.prototype.Xf=function(n,r,u,f){this.ca("push_token",n);this.ca("custom_push_public_key",r);this.ca("custom_push_user_auth",u);this.ca("custom_push_vapid_public_key",f);var e=i.Z.lb.fc,o=new i.Z(e,i.f);this.A.fa(t.j.B.C.lf,[n,r,u,f]);o.setItem(e.na.kf,e.Zd,!0)},t.kc.prototype.Hd=function(n){if(this.ca("push_token",null),this.ca("custom_push_public_key",null),this.ca("custom_push_user_auth",null),this.ca("custom_push_vapid_public_key",null),n){n=i.Z.lb.fc;var r=new i.Z(n,i.f);this.A.ra(t.j.B.C.lf);r.setItem(n.na.kf,n.Zd,!1)}},t.Te={Pi:"invalid_api_key",mi:"blacklisted",kj:"no_device_identifier"},t.b=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){this.id=n;this.viewed=t||!1;this.title=i||"";this.imageUrl=r;this.description=u||"";this.created=f||null;this.updated=e||null;this.categories=o||[];this.expiresAt=s||null;this.url=h;this.linkText=c;l=parseFloat(l);this.aspectRatio=isNaN(l)?null:l;this.extras=a;this.pinned=v||!1;this.dismissible=y||!1;this.dismissed=!1;this.tf=this.Ia=null},t.b.Ag=-1,t.b.prototype.qe=function(){return null==this.Ia&&(this.Ia=new t.Ta),this.Ia},t.b.prototype.re=function(){return null==this.tf&&(this.tf=new t.Ta),this.tf},t.b.prototype.Oe=function(n){return this.qe().ib(n)},t.b.prototype.Wh=function(n){return this.re().ib(n)},t.b.prototype.Ea=function(n){this.qe().Ea(n);this.re().Ea(n)},t.b.prototype.va=function(){this.qe().va();this.re().va()},t.b.prototype.Wf=function(){this.viewed=!0},t.b.prototype.xc=function(){this.qe().Da();this.viewed=!0},t.b.prototype.Sc=function(){return this.dismissible&&!this.dismissed?(this.dismissed=!0,this.re().Da(),!0):!1},t.b.R={Md:"captioned_image",Kg:"text_announcement",Wd:"short_news",Kd:"banner_image",Xe:"control"},t.b.I={Eb:"id",Lb:"v",Cb:"db",Cg:"r",bb:"ca",nb:"p",Za:"ea",mb:"e",jc:"tp",Fb:"i",ic:"tt",ac:"ds",URL:"u",Ib:"dm",xb:"ar"},t.b.D={Eb:"id",Lb:"v",Cb:"db",Od:"cr",bb:"ca",nb:"p",Nd:"t",Za:"ea",mb:"e",jc:"tp",Fb:"i",ic:"tt",ac:"ds",URL:"u",Ib:"dm",xb:"ar"},t.b.Ml={Jl:"ADVERTISING",Kl:"ANNOUNCEMENTS",Pl:"NEWS",Tl:"SOCIAL"},t.zb=function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p){t.b.call(this,n,i,r,u,f,e,o,s,h,c,l,a,v,y,p)},t.Va(t.zb,t.b),t.zb.prototype.X=function(){var n={};return n[t.b.D.jc]=t.b.R.Md,n[t.b.D.Eb]=this.id,n[t.b.D.Lb]=this.viewed,n[t.b.D.ic]=this.title,n[t.b.D.Fb]=this.imageUrl,n[t.b.D.ac]=this.description,n[t.b.D.bb]=this.updated,n[t.b.D.Od]=this.created,n[t.b.D.Nd]=this.categories,n[t.b.D.Za]=this.expiresAt,n[t.b.D.URL]=this.url,n[t.b.D.Ib]=this.linkText,n[t.b.D.xb]=this.aspectRatio,n[t.b.D.mb]=this.extras,n[t.b.D.nb]=this.pinned,n[t.b.D.Cb]=this.dismissible,n},t.Ab=function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p){t.b.call(this,n,i,r,u,f,e,o,s,h,c,l,a,v,y,p)},t.Va(t.Ab,t.b),t.Ab.prototype.X=function(){var n={};return n[t.b.D.jc]=t.b.R.Wd,n[t.b.D.Eb]=this.id,n[t.b.D.Lb]=this.viewed,n[t.b.D.ic]=this.title,n[t.b.D.Fb]=this.imageUrl,n[t.b.D.ac]=this.description,n[t.b.D.bb]=this.updated,n[t.b.D.Od]=this.created,n[t.b.D.Nd]=this.categories,n[t.b.D.Za]=this.expiresAt,n[t.b.D.URL]=this.url,n[t.b.D.Ib]=this.linkText,n[t.b.D.xb]=this.aspectRatio,n[t.b.D.mb]=this.extras,n[t.b.D.nb]=this.pinned,n[t.b.D.Cb]=this.dismissible,n},t.Banner=function(n,i,r,u,f,e,o,s,h,c,l,a,v){t.b.call(this,n,i,null,r,null,u,f,e,o,s,h,c,l,a,v)},t.Va(t.Banner,t.b),t.Banner.prototype.X=function(){var n={};return n[t.b.D.jc]=t.b.R.Kd,n[t.b.D.Eb]=this.id,n[t.b.D.Lb]=this.viewed,n[t.b.D.Fb]=this.imageUrl,n[t.b.D.bb]=this.updated,n[t.b.D.Od]=this.created,n[t.b.D.Nd]=this.categories,n[t.b.D.Za]=this.expiresAt,n[t.b.D.URL]=this.url,n[t.b.D.Ib]=this.linkText,n[t.b.D.xb]=this.aspectRatio,n[t.b.D.mb]=this.extras,n[t.b.D.nb]=this.pinned,n[t.b.D.Cb]=this.dismissible,n},t.kb=function(n,i,r,u,f,e){t.b.call(this,n,i,null,null,null,null,r,null,u,null,null,null,f,e,null)},t.Va(t.kb,t.b),t.kb.prototype.X=function(){var n={};return n[t.b.D.jc]=t.b.R.Xe,n[t.b.D.Eb]=this.id,n[t.b.D.Lb]=this.viewed,n[t.b.D.bb]=this.updated,n[t.b.D.Za]=this.expiresAt,n[t.b.D.mb]=this.extras,n[t.b.D.nb]=this.pinned,n},t.b.prototype.Ch=function(n){if(null==n||n[t.b.I.Eb]!==this.id)return!0;if(n[t.b.I.Cg])return!1;if(null!=n[t.b.I.bb]&&null!=this.updated&&n[t.b.I.bb]<t.N.Ad(this.updated.valueOf()))return!0;if(n[t.b.I.Lb]&&!this.viewed&&(this.viewed=!0),null!=n[t.b.I.ic]&&(this.title=n[t.b.I.ic]),null!=n[t.b.I.Fb]&&(this.imageUrl=n[t.b.I.Fb]),null!=n[t.b.I.ac]&&(this.description=n[t.b.I.ac]),null!=n[t.b.I.bb]){var i=t.N.eb(n[t.b.I.bb]);null!=i&&(this.updated=i)}return null!=n[t.b.I.Za]&&(this.expiresAt=n[t.b.I.Za]===t.b.Ag?null:t.N.eb(n[t.b.I.Za])),null!=n[t.b.I.URL]&&(this.url=n[t.b.I.URL]),null!=n[t.b.I.Ib]&&(this.linkText=n[t.b.I.Ib]),null!=n[t.b.I.xb]&&(i=parseFloat(n[t.b.I.xb]),this.aspectRatio=isNaN(i)?null:i),null!=n[t.b.I.mb]&&(this.extras=n[t.b.I.mb]),null!=n[t.b.I.nb]&&(this.pinned=n[t.b.I.nb]),null!=n[t.b.I.Cb]&&(this.dismissible=n[t.b.I.Cb]),!0},t.b.Jf=function(n){if(n[t.b.I.Cg])return null;var r=n[t.b.I.Eb],i=n[t.b.I.jc],u=n[t.b.I.Lb],v=n[t.b.I.ic],h=n[t.b.I.Fb],y=n[t.b.I.ac],f=t.N.eb(n[t.b.I.bb]),e=n[t.b.I.Za]===t.b.Ag?null:t.N.eb(n[t.b.I.Za]);var c=n[t.b.I.URL],l=n[t.b.I.Ib],a=n[t.b.I.xb],o=n[t.b.I.mb],s=n[t.b.I.nb];return n=n[t.b.I.Cb],i===t.b.R.Kg||i===t.b.R.Wd?new t.Ab(r,u,v,h,y,null,f,null,e,c,l,a,o,s,n):i===t.b.R.Md?new t.zb(r,u,v,h,y,null,f,null,e,c,l,a,o,s,n):i===t.b.R.Kd?new t.Banner(r,u,h,null,f,null,e,c,l,a,o,s,n):i===t.b.R.Xe?new t.kb(r,u,f,e,o,s):null},t.b.pk=function(n){var r=n.id,i=n.type,u=n.viewed,v=n.title,f=n.image,y=n.description,e=t.N.eb(n.created),o=t.N.eb(n.updated),s=n.categories,h=t.N.eb(n.expires_at),c=n.url,l=n.domain,a=n.aspect_ratio;return n=n.extras,i===t.b.R.Kg||i===t.b.R.Wd?new t.Ab(r,u,v,f,y,e,o,s,h,c,l,a,n,!1,!1):i===t.b.R.Md?new t.zb(r,u,v,f,y,e,o,s,h,c,l,a,n,!1,!1):i===t.b.R.Kd?new t.Banner(r,u,f,e,o,s,h,c,l,a,n,!1,!1):null},t.b.qa=function(n){var i=n[t.b.D.Eb],r=n[t.b.D.jc],u=n[t.b.D.Lb],p=n[t.b.D.ic],h=n[t.b.D.Fb],w=n[t.b.D.ac],c=t.N.Tc(n[t.b.D.Od]),f=t.N.Tc(n[t.b.D.bb]),l=n[t.b.D.Nd],e=t.N.Tc(n[t.b.D.Za]),a=n[t.b.D.URL],v=n[t.b.D.Ib],y=n[t.b.D.xb],o=n[t.b.D.mb],s=n[t.b.D.nb];return(n=n[t.b.D.Cb],r===t.b.R.Wd)?new t.Ab(i,u,p,h,w,c,f,l,e,a,v,y,o,s,n):r===t.b.R.Md?new t.zb(i,u,p,h,w,c,f,l,e,a,v,y,o,s,n):r===t.b.R.Kd?new t.Banner(i,u,h,c,f,l,e,a,v,y,o,s,n):r===t.b.R.Xe?new t.kb(i,u,f,e,o,s):void 0},t.$b=function(n){this.triggerId=n},t.$b.V=function(n){return new this(n.trigger_id)},t.kg=function(n,t,i,r,u,f,e,o){this.id=n;this.yd=t;this.Wj=i;this.Pk=r;this.Zk=u;this.locale=f;this.wl=e;this.userAgent=o},t.kg.prototype.oc=function(){return{browser:this.yd,browser_version:this.Wj,os_version:this.Pk,resolution:this.Zk,locale:this.locale,time_zone:this.wl,user_agent:this.userAgent}},t.Event=function(n,i,r,u,f){this.Vb=n;this.type=i;this.time=t.N.yl(r);this.sessionId=u;this.data=f},t.Event.prototype.oc=function(){var n={name:this.type,time:t.N.Ad(this.time),data:this.data||{},session_id:this.sessionId};return null!=this.Vb&&(n.user_id=this.Vb),n},t.Event.prototype.X=function(){return{u:this.Vb,t:this.type,ts:this.time,s:this.sessionId,d:this.data}},t.Event.Gh=function(n){return null!=n&&t.G.Ik(n)&&null!=n.t&&""!==n.t},t.Event.qa=function(n){return new t.Event(n.u,n.t,n.ts,n.s,n.d)},t.J=function(n,t){this.cards=n;this.lastUpdated=t},t.J.prototype.Ah=function(){for(var t=0,n=0;n<this.cards.length;n++)this.cards[n].viewed||t++;return t},t.ta=function(n,i){t.J.call(this,n,i)},t.Va(t.ta,t.J),t.ta.prototype.zk=t.J.prototype.Ah,t.Rd=function(n,t,i,r,u,f){this.Vb=n;this.Xk=t;this.message=i;this.Kk=r;this.kk=u;this.appVersion=f},t.Rd.prototype.oc=function(){var n={message:this.message,is_bug:!!this.Kk,reply_to:this.Xk,device:this.kk,app_version:this.appVersion};return null!=this.Vb&&(n.user_id=this.Vb),n},t.Rd.Gl=function(n,r){return t.S.Fh(n)?null==r||""===r.trim()?(i.f.error("Feedback requires a non-empty message."),!1):!0:(i.f.error('Feedback requires a valid RFC-5322 email address - "'+n+'" is not valid.'),!1)},t.Hb=function(n,t,r){null==n&&(n=i.dd.ze());r=parseInt(r);(isNaN(r)||0===r)&&(r=Date.now());this.tb=n;this.Bd=r;this.Ce=Date.now();this.If=t},t.Hb.prototype.X=function(){return{g:this.tb,e:this.If,c:this.Bd,l:this.Ce}},t.Hb.qa=function(n){if(null==n||null==n.g)return null;var i=new t.Hb(n.g,n.e,n.c);return i.Ce=n.l,i},t.h=function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct){this.message=n;this.messageAlignment=i||t.h.sf.CENTER;this.duration=a||5e3;this.slideFrom=r||t.h.$d.BOTTOM;this.extras=u||[];this.campaignId=f;this.cardId=e;this.triggerId=o;this.clickAction=s||t.h.Bb.NONE;this.uri=h;this.openTarget=c||t.h.jd.NONE;this.dismissType=l||t.h.Bc.AUTO_DISMISS;this.icon=v;this.imageUrl=y;this.imageStyle=p||t.h.Sd.TOP;this.iconColor=w||t.h.Ya.ce;this.iconBackgroundColor=b||t.h.Ya.dg;this.backgroundColor=k||t.h.Ya.ce;this.textColor=d||t.h.Ya.Se;this.closeButtonColor=g||t.h.Ya.Se;this.animateIn=nt;null==this.animateIn&&(this.animateIn=!0);this.animateOut=tt;null==this.animateOut&&(this.animateOut=!0);this.header=it;this.headerAlignment=rt||t.h.sf.CENTER;this.headerTextColor=ut||t.h.Ya.Se;this.frameColor=ft||t.h.Ya.sj;this.buttons=et||[];this.cropType=ot||t.h.$c.Ol;this.orientation=st;this.htmlId=ht;this.css=ct;this.Tg=this.lc=this.Ug=!1;this.Ia=new t.Ta;this.fe=new t.Ta},t.h.prototype.Rc=function(){return!0},t.h.prototype.bi=function(){return this.Rc()},t.h.prototype.Re=function(){return null!=this.htmlId&&4<this.htmlId.length},t.h.prototype.gb=function(){return this.Re()&&null!=this.css&&0<this.css.length},t.h.prototype.Ne=function(){if(this.Re()&&this.gb())return this.htmlId+"-css"},t.h.prototype.Oe=function(n){return this.Ia.ib(n)},t.h.prototype.Wh=function(n){return this.fe.ib(n)},t.h.prototype.Ea=function(n){this.Ia.Ea(n);this.fe.Ea(n)},t.h.prototype.va=function(){this.Ia.va();this.fe.va()},t.h.prototype.Wf=function(){return this.Ug?!1:this.Ug=!0},t.h.prototype.xc=function(){return this.lc?!1:(this.lc=!0,this.Ia.Da(),!0)},t.h.prototype.Sc=function(){return this.Tg?!1:(this.Tg=!0,this.fe.Da(),!0)},t.h.Ya={Se:4278190080,ce:4294967295,dg:4278219733,gj:3858759680,sj:3224580915},t.h.Ba={Mi:"hd",ii:"ias",lj:"of",zi:"do",pd:"umt",be:"tf",Ni:"te"},t.h.Aa=function(n,i,r,u,f,e){this.text=n||"";this.backgroundColor=i||t.h.Ya.dg;this.textColor=r||t.h.Ya.ce;this.clickAction=u||t.h.Bb.NEWS_FEED;this.uri=f;null==e&&(e=t.h.Aa.ig);this.id=e;this.lc=!1;this.Ia=new t.Ta},t.h.Aa.ig=-1,t.h.Aa.prototype.Oe=function(n){return this.Ia.ib(n)},t.h.Aa.prototype.Ea=function(n){this.Ia.Ea(n)},t.h.Aa.prototype.va=function(){this.Ia.va()},t.h.Aa.prototype.xc=function(){return this.lc?!1:(this.lc=!0,this.Ia.Da(),!0)},t.h.Aa.V=function(n){return new t.h.Aa(n.text,n.bg_color,n.text_color,n.click_action,n.uri,n.id)},t.h.$d={TOP:"TOP",BOTTOM:"BOTTOM"},t.h.Bb={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},t.h.Bc={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},t.h.jd={NONE:"NONE",BLANK:"BLANK"},t.h.Sd={TOP:"TOP",GRAPHIC:"GRAPHIC"},t.h.Ga={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},t.h.sf={START:"START",CENTER:"CENTER",END:"END"},t.h.$c={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},t.h.R={vj:"SLIDEUP",ej:"MODAL",fj:"MODAL_STYLED",Ii:"FULL",Li:"WEB_HTML"},t.pb=function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){k=k||t.h.Ya.ce;b=b||t.h.Ya.gj;t.h.call(this,n,i,r,u,f,e,o,s,h,c,l,a,v,y,null,p,w,b,k,k,d,g,void 0,void 0,void 0,void 0,void 0,void 0,void 0,nt,tt)},t.Va(t.pb,t.h),t.pb.prototype.R=t.h.R.vj,t.pb.prototype.Rc=function(){return!1},t.dc=function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st){c=c||t.h.Bc.MANUAL;et=et||t.h.$c.FIT_CENTER;t.h.call(this,n,i,null,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,void 0,ot,st)},t.Va(t.dc,t.h),t.dc.prototype.R=t.h.R.ej,t.cc=function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht){c=c||t.h.Bc.MANUAL;ot=ot||t.h.Ga.PORTRAIT;et=et||t.h.$c.CENTER_CROP;t.h.call(this,n,i,null,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht)},t.Va(t.cc,t.h),t.cc.prototype.R=t.h.R.Ii,t.Sa=function(n,i,r,u,f,e,o,s,h,c,l,a){e=e||t.h.Bc.MANUAL;t.h.call(this,n,null,null,i,r,u,f,null,null,null,e,o,null,null,null,null,null,null,null,null,s,h,null,null,null,c,void 0,void 0,void 0,l,a)},t.Va(t.Sa,t.h),t.Sa.prototype.R=t.h.R.Li,t.Sa.prototype.bi=function(){return!1},t.Sa.prototype.xc=function(n){return this.lc?!1:(this.lc=!0,this.Ia.Da(n),!0)},t.h.V=function(n){var r,e;if(n.is_control)return t.$b.V(n);r=n.type;null!=r&&(r=r.toUpperCase());var o=n.message,w=n.text_align_message,at=n.slide_from,s=n.extras,h=n.campaign_id,c=n.card_id,l=n.trigger_id,b=n.click_action,k=n.uri,d=n.open_target,a=n.message_close,v=n.duration,g=n.icon,nt=n.image_url,ot=n.image_style,tt=n.icon_color,it=n.icon_bg_color,rt=n.bg_color,ut=n.text_color,st=n.close_btn_color,ht=n.header,ct=n.text_align_header,lt=n.header_text_color,ft=n.frame_color,et=[],f=n.btns;for(null==f&&(f=[]),e=0;e<f.length;e++)et.push(t.h.Aa.V(f[e]));var f=n.crop_type,e=n.orientation,y=n.animate_in,p=n.animate_out,u=n.html_id;if(n=n.css,(null==u||""===u||null==n||""===n)&&(n=u=void 0),r===t.dc.prototype.R||r===t.h.R.fj)return new t.dc(o,w,s,h,c,l,b,k,d,a,v,g,nt,ot,tt,it,rt,ut,st,y,p,ht,ct,lt,ft,et,f,u,n);if(r===t.cc.prototype.R)return new t.cc(o,w,s,h,c,l,b,k,d,a,v,g,nt,ot,tt,it,rt,ut,st,y,p,ht,ct,lt,ft,et,f,e,u,n);if(r===t.pb.prototype.R)return new t.pb(o,w,at,s,h,c,l,b,k,d,a,v,g,nt,tt,it,rt,ut,y,p,u,n);if(r===t.Sa.prototype.R)return new t.Sa(o,s,h,c,l,a,v,y,p,ft,u,n);i.f.error("Ignoring message with unknown type "+r)},t.Ha=function(){this.L=!1;this.K=[]},t.Fc=function(n,t,i,r,u,f){this.Of=n||0;this.wh=t||[];this.rh=i||[];this.Ph=r||[];this.Rf=u;(null==u||""===u)&&(this.Rf=null);this.ci=f||null},t.Fc.prototype.X=function(){return{s:"2.2.4",l:this.Of,e:this.wh,a:this.rh,p:this.Ph,m:this.Rf,v:this.ci}},t.Fc.qa=function(n){var i=n.l;return"2.2.4"!==n.s&&(i=0),new t.Fc(i,n.e,n.a,n.p,n.m,n.v)},t.Ng=function(n,t){this.zc=n;this.di=t},t.Ng.V=function(n,t){return null==n||null==n.trigger_id?null:new this(n.trigger_id,t)},t.o=function(n,t){this.type=n;this.data=t},t.o.prototype.Eh=function(n,i){return t.qb[this.type]===n&&(null==this.data||this.data.fb(i))},t.o.oh=function(n,t){var r=null;try{r=window.atob(n)}catch(u){return i.f.info("Failed to unencode analytics id "+n+": "+u.message),!1}return t===r.split("_")[0]},t.o.V=function(n){var r=n.type,i;switch(r){case t.o.U.OPEN:i=null;break;case t.o.U.ec:i=t.o.kd.V(n.data);break;case t.o.U.jf:i=t.o.md.V(n.data);break;case t.o.U.Ec:i=t.o.nd.V(n.data);break;case t.o.U.Zb:i=t.o.ad.V(n.data);break;case t.o.U.Ye:i=t.o.bd.V(n.data);break;case t.o.U.Gb:i=t.o.ed.V(n.data);break;case t.o.U.Kb:i=null}return new this(r,i)},t.o.U={OPEN:"open",ec:"purchase",jf:"purchase_property",Ec:"push_click",Zb:"custom_event",Ye:"custom_event_property",Gb:"iam_click",Kb:"test"},t.la={OPEN:"open",ec:"purchase",Ec:"push_click",Zb:"custom_event",Gb:"iam_click",Kb:"test"},t.qb={},t.qb[t.o.U.OPEN]=t.la.OPEN,t.qb[t.o.U.ec]=t.la.ec,t.qb[t.o.U.jf]=t.la.ec,t.qb[t.o.U.Ec]=t.la.Ec,t.qb[t.o.U.Zb]=t.la.Zb,t.qb[t.o.U.Ye]=t.la.Zb,t.qb[t.o.U.Gb]=t.la.Gb,t.qb[t.o.U.Kb]=t.la.Kb,t.o.Y=function(n,i,r,u){this.Oh=n;this.Ie=i;this.Nc=r;this.ea=u;this.Ie===t.o.Y.mf.Ze&&this.Nc!==t.o.Y.wa.og&&this.Nc!==t.o.Y.wa.wg&&this.Nc!==t.o.Y.wa.gg&&this.Nc!==t.o.Y.wa.hg&&(this.ea=t.N.eb(this.ea))},t.o.Y.V=function(n){return new this(n.property_key,n.property_type,n.comparator,n.property_value)},t.o.Y.prototype.fb=function(n){var i=null;null!=n&&(i=n[this.Oh]);switch(this.Nc){case t.o.Y.wa.Ei:return null!=i&&i.valueOf()===this.ea.valueOf();case t.o.Y.wa.hj:return null==i||i.valueOf()!==this.ea.valueOf();case t.o.Y.wa.Ki:return typeof i==typeof this.ea&&i>this.ea;case t.o.Y.wa.og:return this.Ie===t.o.Y.mf.Ze?null!=i&&t.G.ub(i)&&t.N.Rh(i)<=this.ea:typeof i==typeof this.ea&&i>=this.ea;case t.o.Y.wa.Zi:return typeof i==typeof this.ea&&i<this.ea;case t.o.Y.wa.wg:return this.Ie===t.o.Y.mf.Ze?null!=i&&t.G.ub(i)&&t.N.Rh(i)>=this.ea:typeof i==typeof this.ea&&i<=this.ea;case t.o.Y.wa.cj:return null!=i&&"string"==typeof i&&typeof i==typeof this.ea&&null!=i.match(this.ea);case t.o.Y.wa.Gi:return null!=i;case t.o.Y.wa.Ai:return null==i;case t.o.Y.wa.gg:return null!=i&&t.G.ub(i)&&t.N.Sh(i)<this.ea;case t.o.Y.wa.hg:return null!=i&&t.G.ub(i)&&t.N.Sh(i)>this.ea;case t.o.Y.wa.ij:return null==i||typeof i!=typeof this.ea||"string"!=typeof i||null==i.match(this.ea)}return!1},t.o.Y.prototype.X=function(){var n=this.ea;return t.G.ub(this.ea)&&(n=t.N.Ad(n.valueOf())),{k:this.Oh,t:this.Ie,c:this.Nc,v:n}},t.o.Y.qa=function(n){return new this(n.k,n.t,n.c,n.v)},t.o.Y.wa={Ei:1,hj:2,Ki:3,og:4,Zi:5,wg:6,cj:10,Gi:11,Ai:12,gg:15,hg:16,ij:17},t.o.Y.mf={Ll:"boolean",Ql:"number",Ul:"string",Ze:"date"},t.o.Db=function(n){this.filters=n},t.o.Db.V=function(n){var r,i;if(null==n||!t.G.isArray(n))return null;for(r=[],i=0;i<n.length;i++){for(var f=[],e=n[i],u=0;u<e.length;u++)f.push(t.o.Y.V(e[u]));r.push(f)}return new this(r)},t.o.Db.prototype.fb=function(n){for(var i=!0,t=0;t<this.filters.length;t++){for(var u=this.filters[t],f=!1,r=0;r<u.length;r++)if(u[r].fb(n)){f=!0;break}if(!f){i=!1;break}}return i},t.o.Db.prototype.X=function(){for(var t=[],n=0;n<this.filters.length;n++){for(var r=this.filters[n],u=[],i=0;i<r.length;i++)u.push(r[i].X());t.push(u)}return t},t.o.Db.qa=function(n){for(var r=[],i=0;i<n.length;i++){for(var f=[],e=n[i],u=0;u<e.length;u++)f.push(t.o.Y.qa(e[u]));r.push(f)}return new this(r)},t.o.kd=function(n){this.vc=n},t.o.kd.prototype.fb=function(n){return null==this.vc||n[0]===this.vc},t.o.kd.V=function(n){return new this(n?n.product_id:null)},t.o.md=function(n,t){this.vc=n;this.wc=t},t.o.md.prototype.fb=function(n){if(null==this.vc||null==this.wc)return!1;var t=n[1];return n[0]===this.vc&&this.wc.fb(t)},t.o.md.V=function(n){return new this(n?n.product_id:null,n?t.o.Db.V(n.property_filters):null)},t.o.nd=function(n){this.pc=n},t.o.nd.prototype.fb=function(n){return null==this.pc?!0:t.o.oh(n[0],this.pc)},t.o.nd.V=function(n){return new this(n?n.campaign_id:null)},t.o.ad=function(n){this.sc=n},t.o.ad.prototype.fb=function(n){return null==this.sc||this.sc===n[0]},t.o.ad.V=function(n){return new this(n?n.event_name:null)},t.o.bd=function(n,t){this.sc=n;this.wc=t},t.o.bd.prototype.fb=function(n){if(null==this.sc||null==this.wc)return!1;var t=n[1];return n[0]===this.sc&&this.wc.fb(t)},t.o.bd.V=function(n){return new this(n?n.event_name:null,n?t.o.Db.V(n.property_filters):null)},t.o.ed=function(n,t){this.pc=n;this.zd=t},t.o.ed.prototype.fb=function(n){var r,u,i;if(null==this.pc||(r=t.o.oh(n[0],this.pc),!r))return!1;if(u=null==this.zd||0===this.zd.length,null!=this.zd)for(i=0;i<this.zd.length;i++)if(this.zd[i]===n[1]){u=!0;break}return r&&u},t.o.ed.V=function(n){return new this(n?n.id:null,n?n.buttons:null)},t.o.prototype.X=function(){return{t:this.type,d:this.data?this.data.X():null}},t.o.kd.prototype.X=function(){return this.vc},t.o.md.prototype.X=function(){return{id:this.vc,pf:this.wc.X()}},t.o.nd.prototype.X=function(){return this.pc},t.o.ad.prototype.X=function(){return this.sc},t.o.bd.prototype.X=function(){return{e:this.sc,pf:this.wc.X()}},t.o.ed.prototype.X=function(){return this.pc},t.o.qa=function(n){var i;switch(n.t){case t.o.U.OPEN:i=null;break;case t.o.U.ec:i=new t.o.kd(n.d);break;case t.o.U.jf:i=n.d||{};i=new t.o.md(i.id,t.o.Db.qa(i.pf||[]));break;case t.o.U.Ec:i=new t.o.nd(n.d);break;case t.o.U.Zb:i=new t.o.ad(n.d);break;case t.o.U.Ye:i=n.d||{};i=new t.o.bd(i.e,t.o.Db.qa(i.pf||[]));break;case t.o.U.Gb:i=new t.o.ed(n.d);break;case t.o.U.Kb:i=null}return new this(n.t,i)},t.ka=function(n,i,r,u,f,e,o,s,h,c,l,a){this.id=n;this.Oc=i||[];void 0===r&&(r=null);this.startTime=r;void 0===u&&(u=null);this.endTime=u;this.Tf=f||0;this.type=e;void 0===c&&(c=null);this.Pe=c;this.data=o;this.rc=s||0;null==h&&(h=t.ka.Mg);this.Vf=h;this.Mh=l;this.je=a||null},t.ka.prototype.Dh=function(n){return null==this.je||this.Vf!==t.ka.Mg&&n-this.je>=1e3*this.Vf},t.ka.prototype.Uf=function(n){this.je=n},t.ka.prototype.Ok=function(n){return Math.max(n+1e3*this.rc-Date.now(),0)},t.ka.prototype.xl=function(n){var t=Date.now()-n;return(n=null==n||isNaN(t)||null==this.Pe||t<this.Pe)||i.f.info("Trigger action "+this.type+" is no longer eligible for display - fired "+t+"ms ago and has a timeout of "+this.Pe+"ms"),!n},t.ka.Mg=-1,t.ka.U={qg:"inapp",Jg:"templated_iam"},t.ka.V=function(n){for(var f=n.id,r=[],i=0;i<n.trigger_condition.length;i++)r.push(t.o.V(n.trigger_condition[i]));var i=t.N.eb(n.start_time),e=t.N.eb(n.end_time),o=n.priority,u=n.type,s=n.delay,h=n.re_eligibility,c=n.timeout,l=n.data;return n=n.min_seconds_since_last_trigger,t.G.wb(t.ka.U,u,"Could not construct Trigger from server data","ab.Trigger.Types")?new this(f,r,i,e,o,u,l,s,h,c,n):null},t.ka.prototype.X=function(){for(var t=[],n=0;n<this.Oc.length;n++)t.push(this.Oc[n].X());return{i:this.id,c:t,s:this.startTime,e:this.endTime,p:this.Tf,t:this.type,da:this.data,d:this.rc,r:this.Vf,tm:this.Pe,ss:this.Mh,ld:this.je}},t.ka.qa=function(n){for(var r=[],i=0;i<n.c.length;i++)r.push(t.o.qa(n.c[i]));return new t.ka(n.i,r,t.N.Tc(n.s),t.N.Tc(n.e),n.p,n.t,n.da,n.d,n.r,n.tm,n.ss,n.ld)},t.w=function(n,t){this.H=n;this.Ca=t},t.w.nj=/^[0-9 .\\(\\)\\+\\-]+$/,t.w.pg={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},t.w.hd={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},t.w.qd="user_id",t.w.fg="custom",t.w.Yb="inc",t.w.Ja="add",t.w.Ka="remove",t.w.prototype.T=function(n){null==n&&i.f.error("getUserId must be supplied with a callback. e.g., appboy.getUser().getUserId(function(userId) {console.log('the user id is ' + userId)})");"function"==typeof n&&n(this.H.T())},t.w.prototype.Qj=function(n,r){return!t.S.Wb(n,"add alias","the alias",!1)||0>=n.length?(i.f.error("addAlias requires a non-empty alias"),!1):!t.S.Wb(r,"add alias","the label",!1)||0>=r.length?(i.f.error("addAlias requires a non-empty label"),!1):this.Ca.Lk(n,r).L},t.w.prototype.hl=function(n){return t.S.Wb(n,"set first name","the firstName",!0)?this.H.ca("first_name",n):!1},t.w.prototype.ll=function(n){return t.S.Wb(n,"set last name","the lastName",!0)?this.H.ca("last_name",n):!1},t.w.prototype.fl=function(n){return null===n||t.S.Fh(n)?this.H.ca("email",n):(i.f.error('Cannot set email address - "'+n+'" did not pass RFC-5322 validation.'),!1)},t.w.prototype.il=function(n){return"string"==typeof n&&(n=n.toLowerCase()),null===n||t.G.wb(t.w.pg,n,'Gender "'+n+'" is not a valid gender.',"ab.User.Genders")?this.H.ca("gender",n):!1},t.w.prototype.el=function(n,t,r){return null===n&&null===t&&null===r?this.H.ca("dob",null):(n=parseInt(n),t=parseInt(t),r=parseInt(r),isNaN(n)||isNaN(t)||isNaN(r)||12<t||1>t||31<r||1>r?(i.f.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.H.ca("dob",""+n+"-"+t+"-"+r))},t.w.prototype.cl=function(n){return t.S.Wb(n,"set country","the country",!0)?this.H.ca("country",n):!1},t.w.prototype.jl=function(n){return t.S.Wb(n,"set home city","the homeCity",!0)?this.H.ca("home_city",n):!1},t.w.prototype.kl=function(n){return t.S.Wb(n,"set language","the language",!0)?this.H.ca("language",n):!1},t.w.prototype.gl=function(n){return t.G.wb(t.w.hd,n,'Email notification setting "'+n+'" is not a valid subscription type.',"ab.User.NotificationSubscriptionTypes")?this.H.ca("email_subscribe",n):!1},t.w.prototype.$f=function(n){return t.G.wb(t.w.hd,n,'Push notification setting "'+n+'" is not a valid subscription type.',"ab.User.NotificationSubscriptionTypes")?this.H.ca("push_subscribe",n):!1},t.w.prototype.ml=function(n){return t.S.Wb(n,"set phone number","the phoneNumber",!0)?null===n||n.match(t.w.nj)?this.H.ca("phone",n):(i.f.error('Cannot set phone number - "'+n+'" did not pass validation.'),!1):!1},t.w.prototype.bl=function(n){return this.H.ca("image_url",n)},t.w.prototype.Le=function(n,t,r,u,f){return null==n||null==t?(i.f.error("Cannot set last-known location - latitude and longitude are required."),!1):(n=parseFloat(n),t=parseFloat(t),null!=r&&(r=parseFloat(r)),null!=u&&(u=parseFloat(u)),null!=f&&(f=parseFloat(f)),isNaN(n)||isNaN(t)||null!=r&&isNaN(r)||null!=u&&isNaN(u)||null!=f&&isNaN(f)?(i.f.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):90<n||-90>n||180<t||-180>t?(i.f.error("Cannot set last-known location - latitude and longitude are bounded by ±90 and ±180 respectively."),!1):null!=r&&0>r||null!=f&&0>f?(i.f.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.Ca.Le(this.H.T(),n,t,u,r,f).L)},t.w.prototype.Vc=function(n,i){if(!t.S.Wa(n,"set custom user attribute","the given key"))return!1;var r=typeof i,u=t.G.ub(i),f=t.G.isArray(i);if("number"!==r&&"boolean"!==r&&!u&&!f&&null!==i&&!t.S.Wa(i,'set custom user attribute "'+n+'"',"the given value"))return!1;if(u&&(i=t.N.$h(i)),f)for(r=0;r<i.length;r++)if(!t.S.Wa(i[r],'set custom user attribute "'+n+'"',"the element in the given array"))return!1;return this.H.Vc(n,i)},t.w.prototype.Rj=function(n,i){if(!t.S.Wa(n,"add to custom user attribute array","the given key")||null!=i&&!t.S.Wa(i,"add to custom user attribute array","the given value"))return!1;var r={};return r[t.w.Ja]=i,this.H.Vc(n,r)},t.w.prototype.Vk=function(n,i){if(!t.S.Wa(n,"remove from custom user attribute array","the given key")||null!=i&&!t.S.Wa(i,"remove from custom user attribute array","the given value"))return!1;var r={};return r[t.w.Ka]=i,this.H.Vc(n,r)},t.w.prototype.Fk=function(n,r){if(!t.S.Wa(n,"increment custom user attribute","the given key"))return!1;null==r&&(r=1);var u=parseInt(r);return isNaN(u)||u!==parseFloat(r)?(i.f.error('Cannot increment custom user attribute because the given incrementValue "'+r+'" is not an integer.'),!1):(r={},r[t.w.Yb]=u,this.H.Vc(n,r))},t.w.prototype.Xf=function(n,t,i,r){this.H.Xf(n,t,i,r);this.Ca.ei()},t.w.prototype.Hd=function(n){this.H.Hd(n)},t.w.prototype.dl=function(n,r,u){return t.S.Wa(n,"set custom location attribute","the given key")?(null!==r||null!==u)&&(r=parseFloat(r),u=parseFloat(u),isNaN(r)||90<r||-90>r||isNaN(u)||180<u||-180>u)?(i.f.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by ±90 and ±180 respectively, or must both be null for removal."),!1):this.Ca.Mk(n,r,u).L:!1},t.Ac=function(){},t.Ac.prototype.Ed=function(){},t.Ac.prototype.qc=function(){},t.Ac.prototype.clearData=function(){},t.Ra=function(n,i,r){for(this.sb=n,this.Ca=i,this.A=r,n=this.A.ma(t.j.B.C.We)||[],i=[],r=0;r<n.length;r++){var u=t.b.qa(n[r]);null!=u&&i.push(u)}this.W=this.se(this.Cf(i));this.Ic=this.A.ma(t.j.B.C.Ve)||0;this.Gc=this.A.ma(t.j.B.C.Ue)||0},t.Va(t.Ra,t.Ac),t.Ra.prototype.Ij=function(n,i,r,u){for(var s=i?[]:this.W.slice(),h=0;h<n.length;h++){for(var f=n[h],o=null,e=0;e<this.W.length;e++)if(f.id===this.W[e].id){o=this.W[e];break}if(i)f=t.b.Jf(f),null!=o&&o.viewed&&(f.viewed=!0),null!=f&&s.push(f);else if(null==o)o=t.b.Jf(f),null!=o&&s.push(o);else if(!o.Ch(f))for(e=0;e<s.length;e++)if(f.id===s[e].id){s.splice(e,1);break}}this.W=this.se(this.Cf(s));this.ue();this.Ic=r||0;this.A.fa(t.j.B.C.Ve,this.Ic);this.Gc=u||0;this.A.fa(t.j.B.C.Ue,this.Gc)},t.Ra.prototype.Ed=function(n){null!=n&&n.cards&&(this.Ij(n.cards,n.full_sync,n.last_full_sync_at,n.last_card_updated_at),this.sb.Da(this.Pc()))},t.Ra.prototype.Ak=function(n){var i=this.W.slice();this.Ca.Qc().T(function(r){for(var e=0;e<n.length;e++)if(r===n[e].userId||null==r&&null==n[e].userId){for(var f=n[e].card,o=null,u=0;u<this.W.length;u++)if(f.id===this.W[u].id){o=this.W[u];break}if(null==o)f=t.b.Jf(f),null!=f&&i.push(f);else if(!o.Ch(f))for(u=0;u<i.length;u++)if(f.id===i[u].id){i.splice(u,1);break}}this.W=this.se(this.Cf(i));this.ue();this.sb.Da(this.Pc())}.bind(this))},t.Ra.prototype.Cf=function(n){for(var f=this.A.ma(t.j.B.C.Yc)||{},e=this.A.ma(t.j.B.C.Xc)||{},r={},u={},i=0;i<n.length;i++)f[n[i].id]&&(n[i].viewed=!0,r[n[i].id]=!0),e[n[i].id]&&(n[i].dismissed=!0,u[n[i].id]=!0);return this.A.fa(t.j.B.C.Yc,r),this.A.fa(t.j.B.C.Xc,u),n},t.Ra.prototype.se=function(n){for(var i=[],r=new Date,t=0;t<n.length;t++)(null==n[t].expiresAt||n[t].expiresAt>=r)&&!n[t].dismissed&&i.push(n[t]);return i},t.Ra.prototype.ue=function(){for(var i=[],n=0;n<this.W.length;n++)i.push(this.W[n].X());this.A.fa(t.j.B.C.We,i)},t.Ra.prototype.yc=function(){return this.Ca.yc(this.Ic,this.Gc,this.Ed.bind(this))},t.Ra.prototype.Pc=function(){var i=this.se(this.W),n;return i.sort(function(n,t){return n.pinned&&!t.pinned?-1:t.pinned&&!n.pinned?1:n.updated>t.updated?-1:t.updated>n.updated?1:0}),n=Math.max(this.Gc||0,this.Ic||0),0===n&&(n=void 0),new t.ta(i,t.N.eb(n))},t.Ra.prototype.qc=function(n){n||(this.W=[],this.sb.Da(new t.ta(this.W.slice(),null)),this.A.ra(t.j.B.C.We),this.A.ra(t.j.B.C.Yc),this.A.ra(t.j.B.C.Xc));this.Gc=this.Ic=0;this.A.ra(t.j.B.C.Ve);this.A.ra(t.j.B.C.Ue)},t.Ra.prototype.clearData=function(){this.Gc=this.Ic=0;this.W=[];this.sb.Da(new t.ta(this.W.slice(),null))},t.bc=function(n,i){var r,u;for(this.sb=n,this.A=i,n=this.A.ma(t.j.B.C.ff)||[],i=[],r=0;r<n.length;r++)u=t.b.qa(n[r]),null!=u&&i.push(u);this.W=i;this.Jc=t.N.Tc(this.A.ma(t.j.B.C.df))},t.Va(t.bc,t.Ac),t.bc.prototype.Lj=function(n){for(var u=[],i,e=this.A.ma(t.j.B.C.Wc)||{},f={},r=0;r<n.length;r++)i=n[r],i=t.b.pk(i),null!=i&&(e[i.id]&&(i.viewed=!0,f[i.id]=!0),u.push(i));this.A.fa(t.j.B.C.Wc,f);this.W=u;this.ue();this.Jc=new Date;this.A.fa(t.j.B.C.df,this.Jc)},t.bc.prototype.ue=function(){for(var i=[],n=0;n<this.W.length;n++)i.push(this.W[n].X());this.A.fa(t.j.B.C.ff,i)},t.bc.prototype.Ed=function(n){null!=n&&n.feed&&(this.Lj(n.feed),this.sb.Da(new t.J(this.W.slice(),this.Jc)))},t.bc.prototype.ye=function(){for(var i=[],r=new Date,n=0;n<this.W.length;n++)(null==this.W[n].expiresAt||this.W[n].expiresAt>=r)&&i.push(this.W[n]);return new t.J(i,this.Jc)},t.bc.prototype.clearData=function(n){null==n&&(n=!1);this.W=[];this.Jc=null;n&&(this.A.ra(t.j.B.C.ff),this.A.ra(t.j.B.C.df));this.sb.Da(new t.J(this.W.slice(),this.Jc))},t.$a=function(n,i,r,u){function y(n,t,i){return function(){c.zf(n,t,i)}}var c,f,e,h,a,v;for(this.zj=n,this.sb=i,this.A=r,this.Ca=u,this.Hc=this.A.ma(t.j.B.C.cf)||null,this.pa=this.A.ma(t.j.B.C.od)||{},this.Ua=this.A.ma(t.j.B.C.Td)||{},this.Nb=[],n=this.A.ma(t.j.B.C.rf)||[],i=[],c=this,r=!1,u=0;u<n.length;u++){if(f=t.ka.qa(n[u]),null!=this.Ua[f.id]&&f.Uf(this.Ua[f.id]),null!=this.pa[f.id]){for(var l=this.pa[f.id],o=[],s=0;s<l.length;s++)e=l[s],h=f.Ok(e.nk),0<h&&(o.push(e),null!=e.ai&&(a=e.ai),null!=e.Ff&&t.Event.Gh(e.Ff)&&(v=t.Event.qa(e.Ff)),this.Nb.push(setTimeout(y(f,a,v),h)));this.pa[f.id].length>o.length&&(this.pa[f.id]=o,r=!0,0===this.pa[f.id].length&&delete this.pa[f.id])}i.push(f)}this.Ob=i;r&&this.A.fa(t.j.B.C.od,this.pa)},t.Va(t.$a,t.Ac),t.$a.prototype.Pj=function(){for(var i=[],n=0;n<this.Ob.length;n++)i.push(this.Ob[n].X());this.A.fa(t.j.B.C.rf,i)},t.$a.prototype.Ed=function(n){var s=!1,u,f,e,r,o;if(null!=n&&n.triggers){for(u={},f={},this.Ob=[],e=0;e<n.triggers.length;e++){for(r=t.ka.V(n.triggers[e]),null!=this.Ua[r.id]&&(r.Uf(this.Ua[r.id]),u[r.id]=this.Ua[r.id]),null!=this.pa[r.id]&&(f[r.id]=this.pa[r.id]),o=0;o<r.Oc.length;o++)if(r.Oc[o].Eh(t.la.Kb,null)){s=!0;break}null!=r&&this.Ob.push(r)}t.G.isEqual(this.Ua,u)||(this.Ua=u,this.A.fa(t.j.B.C.Td,this.Ua));t.G.isEqual(this.pa,f)||(this.pa=f,this.A.fa(t.j.B.C.od,this.pa));this.Pj();s&&(i.f.info("Trigger with test condition found, firing test."),this.Rb(t.la.Kb));this.Rb(t.la.OPEN)}},t.$a.prototype.zf=function(n,r,u){function o(u){var e=Date.now();n.xl(s)?n.type===t.ka.U.Jg?f.Ca.ya(n.id,t.h.Ba.be):f.Ca.ya(n.id,t.h.Ba.Ni):n.Dh(e)&&f.ih(n,e,r)?(f.sb.Da([u]),f.Mj(n,e)):i.f.info("Not displaying trigger "+n.id+" because display time fell outside of the acceptable time window.")}var s=Date.now()-1e3*n.rc,f=this,e;switch(n.type){case t.ka.U.qg:if(u=t.h.V(n.data),null==u){i.f.error("Could not parse trigger data for trigger "+n.id+", ignoring.");this.Ca.ya(n.id,t.h.Ba.pd);break}o(u);break;case t.ka.U.Jg:if(e=t.Ng.V(n.data,o),null==e){i.f.error("Could not parse trigger data for trigger "+n.id+", ignoring.");this.Ca.ya(n.id,t.h.Ba.pd);break}this.Ca.vl(e,r,u);break;default:i.f.error("Trigger "+n.id+" was of unexpected type "+n.type+", ignoring.");this.Ca.ya(n.id,t.h.Ba.pd)}},t.$a.prototype.Rb=function(n,r,u){var e,c,l,s,p,a;if(t.G.wb(t.la,n,"Cannot fire trigger action.","ab.TriggerEvents")){for(var o=Date.now(),w=o-this.Hc,v=!0,y=!0,f=null,h=0;h<this.Ob.length;h++)if(e=this.Ob[h],c=o+1e3*e.rc,e.Dh(c)&&(null==e.startTime||e.startTime<=o)&&(null==e.endTime||e.endTime>=o)&&(null==f||e.Tf>f.Tf)){for(l=!1,s=0;s<e.Oc.length;s++)if(e.Oc[s].Eh(n,r)){l=!0;break}l&&(v=!1,this.ih(e,c,n)&&(y=!1,f=e))}v?i.f.info("Trigger event "+n+" did not match any trigger conditions."):y?i.f.info("Ignoring "+n+" trigger event because a trigger was displayed "+w/1e3+"s ago."):null!=f&&(!1===navigator.onLine&&0===f.rc?(i.f.info("Not firing "+f.type+" trigger action "+f.id+" due to offline state."),this.Ca.ya(f.id,t.h.Ba.zi)):(i.f.info("Firing "+f.type+" trigger action "+f.id),null!=u&&(p=u.X()),this.Nj(f,o,n,p),a=this,0===f.rc?a.zf(f,n,u):this.Nb.push(setTimeout(function(){a.zf(f,n,u)},1e3*f.rc))))}},t.$a.prototype.qc=function(n){if(this.Ob=[],this.A.ra(t.j.B.C.rf),!n){for(this.Hc=null,this.Ua={},this.pa={},n=0;n<this.Nb.length;n++)clearTimeout(this.Nb[n]);this.Nb=[];this.A.ra(t.j.B.C.cf);this.A.ra(t.j.B.C.Td);this.A.ra(t.j.B.C.od);this.A.ra(t.j.B.C.Xi);this.A.ra(t.j.B.C.Wi);this.A.ra(t.j.B.C.Yi)}},t.$a.prototype.clearData=function(){this.Ob=[];this.Hc=null;this.Ua={};this.pa={};for(var n=0;n<this.Nb.length;n++)clearTimeout(this.Nb[n]);this.Nb=[]},t.$a.prototype.ih=function(n,r,u){return null==this.Hc?!0:u===t.la.Kb?(i.f.info("Ignoring minimum interval between trigger because it is a test type."),!0):(n=n.Mh,null==n&&(n=this.zj),r-this.Hc>=1e3*n)},t.$a.prototype.Nj=function(n,i,r,u){this.pa[n.id]=this.pa[n.id]||[];var f={};f.nk=i;f.ai=r;f.Ff=u;this.pa[n.id].push(f);this.A.fa(t.j.B.C.od,this.pa)},t.$a.prototype.Mj=function(n,i){n.Uf(i);this.Hc=i;this.A.fa(t.j.B.C.cf,i);this.Ua[n.id]=i;this.A.fa(t.j.B.C.Td,this.Ua)},t.M=function(n,i,r,u,f,e,o,s,h,c,l){this.cb=n;this.Bj=i;this.ah=r;this.Qg=u;this.ee=f;this.ge=c.xa.xh;this.Wg=null;this.ba=e;this.sd=o;this.H=s;this.Na=h;this.A=c;this.yj=l;this.uf=new t.Ta;this.vf=[]},t.M.prototype.yf=function(n){var i=this.sd.Dd(),r=i.oc(),u=this.A.ma(t.j.B.C.$e);return t.G.isEqual(u,r)||(n.device=r),n.api_key=this.cb,n.time=t.N.Ad(Date.now(),!0),n.sdk_version=this.Bj,this.ah&&(n.sdk_flavor=this.ah),n.app_version=this.Qg,n.device_id=i.id,n},t.M.prototype.Ef=function(n,r){if(r.error){var u=r.error;return r.error===t.Te.Pi?u='The given API key "'+n.api_key+'" is invalid.':r.error===t.Te.mi?u="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.":r.error===t.Te.kj&&(u="No device identifier. This should never happen. Please contact support@braze.com"),i.f.error("Backend error: "+u),!1}return!0},t.M.prototype.Qb=function(n,r,u,f,e,o){var p,v,c,h;null==u&&(u=!0);u&&this.pe();var s,l=this.A.vh(),a=this.A.lk(),y=this.vf;if(this.vf=[],p=this.ba.Nk(),0<l.length)for(s=0;s<l.length;s++)l[s].type===i.$.Hg&&(p=!0);if(v=r||p,"function"!=typeof o||v||o(),!u||0!==l.length||0!==a.length||0!==y.length||n||v){if(c=this.fh(n,v),0<l.length){for(n=[],s=0;s<l.length;s++)n.push(l[s].oc());c.events=n}if(0<a.length&&(c.attributes=a),0<y.length){for(n=[],s=0;s<y.length;s++)n.push(y[s].oc());c.feedback=n}c=this.yf(c);s=this.eh(c);h=this;t.Ge.Sf({url:""+this.ee+"/data/",data:c,headers:s,L:function(n){h.Ef(c,n)&&(h.Na.Tk(n),null==c.respond_with||c.respond_with.user_id==h.H.T())&&(null!=c.device&&h.A.fa(t.j.B.C.$e,c.device),h.yj(n),"function"==typeof f&&f())},error:function(){h.A.za(l);for(var n=0;n<a.length;n++)h.A.Lh(a[n]);"function"==typeof e&&e()},ve:function(n){"function"==typeof o&&v&&o();u&&(n?h.te():(n=h.Wg,(null==n||n<1e3*h.ge)&&(n=1e3*h.ge),h.te(Math.min(3e5,t.Math.Sk(1e3*h.ge,3*n)))))}});p&&this.uf.Da()}else this.te()},t.M.prototype.lh=function(n,t){var r="HTTP error ";null!=n&&(r+=n+" ");i.f.error(r+t)},t.M.prototype.vl=function(n,i,r){var f=this.fh(!1,!1),f=this.yf(f),u;f.template={trigger_id:n.zc,trigger_event_type:i};null!=r&&(f.template.data=r.oc());i=this.eh(f);u=this;t.Ge.Sf({url:""+this.ee+"/template/",data:f,headers:i,L:function(i){u.Ef(f,i)&&null!=i&&null!=i.templated_message?(i=i.templated_message,i.type!==t.ka.U.qg?u.ya(n.zc,t.h.Ba.pd):(i=t.h.V(i.data),null==i?u.ya(n.zc,t.h.Ba.pd):"function"==typeof n.di?n.di(i):u.ya(n.zc,t.h.Ba.be))):u.ya(n.zc,t.h.Ba.be)},error:function(i){u.lh(i,"retrieving user personalization for message "+n.zc);u.ya(n.zc,t.h.Ba.be)}})},t.M.prototype.yc=function(n,i,r){var u=this.yf({}),f;u.last_full_sync_at=n;u.last_card_updated_at=i;n=this.H.T();null!=n&&(u.user_id=n);f=this;t.Ge.Sf({url:""+this.ee+"/content_cards/sync",data:u,headers:[["X-Braze-Api-Key",this.cb],["X-Braze-DataRequest",!0],["X-Braze-ContentCardsRequest",!0]],L:function(n){f.Ef(u,n)&&r(n)},error:function(n){f.lh(n,"retrieving content cards")}})},t.M.prototype.fh=function(n,t){var i={};return n&&(i.feed=!0),t&&(i.triggers=!0),n=this.H.T(),null!=n&&(i.user_id=n),i.config={config_time:this.Na.wk()},{respond_with:i}},t.M.prototype.eh=function(n){var t=[["X-Braze-Api-Key",this.cb]],i=!1;return null!=n.respond_with&&n.respond_with.triggers&&(t.push(["X-Braze-TriggersRequest",!0]),i=!0),null!=n.respond_with&&n.respond_with.feed&&(t.push(["X-Braze-FeedRequest",!0]),i=!0),i&&t.push(["X-Braze-DataRequest",!0]),t},t.M.prototype.oe=function(n){if(null==n.campaignId&&null==n.cardId&&null==n.triggerId)return i.f.info("The in-app message has no campaignId, cardId, or triggerId - not sending event info to Braze servers."),null;var t={};return null!=n.cardId&&(t.card_ids=[n.cardId]),null!=n.campaignId&&(t.campaign_ids=[n.campaignId]),null!=n.triggerId&&(t.trigger_ids=[n.triggerId]),t},t.M.prototype.ne=function(n){for(var t=null,i=0;i<n.length;i++)null!=n[i].id&&""!==n[i].id&&(t=t||{},t.ids=t.ids||[],t.ids.push(n[i].id));return t},t.M.prototype.te=function(n){if(!this.Rg){null==n&&(n=1e3*this.ge);this.pe();var t=this;this.ie=setTimeout(function(){if(document.hidden){var n=function(){document.hidden||(document.removeEventListener("visibilitychange",n,!1),t.Qb())};document.addEventListener("visibilitychange",n,!1)}else t.Qb()},n);this.Wg=n}},t.M.prototype.pe=function(){null!=this.ie&&(clearTimeout(this.ie),this.ie=null)},t.M.prototype.Kf=function(){this.Rg=!1;this.te()},t.M.prototype.Cd=function(){this.uf.va();this.pe();this.Rg=!0;this.Qb(null,null,!1);this.ie=null},t.M.prototype.tl=function(n){this.uf.ib(n)},t.M.prototype.He=function(n,r){var e=this.ba.tk(),o=this.ba.ha(),u,f;this.A.ra(t.j.B.C.Vi);u=this;this.ei();f=e!==o;u.Qb(null,!1,null,null,null,r);r=i.Z.lb.fc;new i.Z(r,i.f).yh(r.na.kf,function(t,i){f&&null!=n&&i&&n.subscribe()},function(){var i=u.A.ma(t.j.B.C.lf);f&&null!=n&&null!=i&&n.subscribe()})},t.M.prototype.qc=function(n,r,u,f){var o=this.H.T(),e;if(o!==n){for(this.ba.dk(),this.H.Ck(n),e=0;e<r.length;e++)r[e].qc(null==o);null!=o&&this.A.ra(t.j.B.C.Wc);this.A.ra(t.j.B.C.$e);this.He(f,u);i.f.info('Changed user to "'+n+'".')}else"function"==typeof u?(i.f.info('Current user is already "'+n+'". Executing networkCallCompleteCallback.'),u()):i.f.info('Current user is already "'+n+'". Doing nothing.')},t.M.prototype.Qc=function(){return new t.w(this.H,this)},t.M.prototype.Id=function(){this.pe();this.ba.ha();this.Qb()},t.M.prototype.Ke=function(){this.ba.ha();this.Qb(!0)},t.M.prototype.Yk=function(n,t){this.ba.ha();i.f.info("Requesting explicit trigger refresh.");this.Qb(null,!0,null,n,t)},t.M.prototype.Lk=function(n,r){var u=new t.Ha,f=this.ba.ha(),e=i.$.ki;return u.K.push(new t.Event(this.H.T(),e,Date.now(),f,{a:n,l:r})),u.L=this.A.za(u.K),u},t.M.prototype.Pf=function(n,r){var u=new t.Ha,f=this.ba.ha();return this.Na.mk(n)?(i.f.info('Custom Event "'+n+'" is blacklisted, ignoring.'),u):(u.K.push(new t.Event(this.H.T(),i.$.CustomEvent,Date.now(),f,{n:n,p:r})),u.L=this.A.za(u.K),u)},t.M.prototype.Qf=function(n,r,u,f,e){var o=new t.Ha,s=this.ba.ha();return this.Na.Rk(n)?(i.f.info('Purchase "'+n+'" is blacklisted, ignoring.'),o):(o.K.push(new t.Event(this.H.T(),i.$.Si,Date.now(),s,{pid:n,c:u,p:r,q:f,pr:e})),o.L=this.A.za(o.K),o)},t.M.prototype.Le=function(n,r,u,f,e,o){var s=new t.Ha,h=this.ba.ha();return r={latitude:r,longitude:u},null!=f&&(r.altitude=f),null!=e&&(r.ll_accuracy=e),null!=o&&(r.alt_accuracy=o),s.K.push(new t.Event(n,i.$.bj,Date.now(),h,r)),s.L=this.A.za(s.K),s},t.M.prototype.Gd=function(n){var r=new t.Ha,u=this.ba.ha();if(n instanceof t.$b)r.K.push(new t.Event(this.H.T(),i.$.xi,Date.now(),u,{trigger_ids:[n.triggerId]}));else{if(!n.Wf())return i.f.info("This in-app message has already received an impression. Ignoring analytics event."),r;if(n=this.oe(n),null==n)return r;r.K.push(new t.Event(this.H.T(),i.$.Ri,Date.now(),u,n))}return r.L=this.A.za(r.K),r},t.M.prototype.Fe=function(n){var r=new t.Ha,u=this.ba.ha();return n.xc()?(n=this.oe(n),null==n)?r:(r.K.push(new t.Event(this.H.T(),i.$.sg,Date.now(),u,n)),r.L=this.A.za(r.K),r):(i.f.info("This in-app message has already received a click. Ignoring analytics event."),r)},t.M.prototype.Ee=function(n,r){var u=new t.Ha,f=this.ba.ha();return n.xc()?(r=this.oe(r),null==r)?u:n.id===t.h.Aa.ig?(i.f.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),u):(null!=n.id&&(r.bid=n.id),u.K.push(new t.Event(this.H.T(),i.$.rg,Date.now(),f,r)),u.L=this.A.za(u.K),u):(i.f.info("This in-app message button has already received a click. Ignoring analytics event."),u)},t.M.prototype.Fd=function(n,r,u){var f=new t.Ha,e=this.ba.ha();return n.xc(u)?(n=this.oe(n),null==n)?f:(u=i.$.sg,null!=r&&(n.bid=r,u=i.$.rg),f.K.push(new t.Event(this.H.T(),u,Date.now(),e,n)),f.L=this.A.za(f.K),f):(i.f.info("This in-app message has already received a click. Ignoring analytics event."),f)},t.M.prototype.ya=function(n,r){var u=new t.Ha,f=this.ba.ha();return n={trigger_ids:[n],error_code:r},u.K.push(new t.Event(this.H.T(),i.$.Qi,Date.now(),f,n)),u.L=this.A.za(u.K),u},t.M.prototype.Ub=function(n,r){for(var f=new t.Ha,s=this.ba.ha(),h=[],e=[],o=r?this.A.ma(t.j.B.C.Yc)||{}:this.A.ma(t.j.B.C.Wc)||{},u=0;u<n.length;u++)n[u].Wf(),n[u]instanceof t.kb?e.push(n[u]):h.push(n[u]),o[n[u].id]=!0;return(n=this.ne(h),e=this.ne(e),null==n&&null==e)?f:(r?this.A.fa(t.j.B.C.Yc,o):this.A.fa(t.j.B.C.Wc,o),null!=n&&f.K.push(new t.Event(this.H.T(),r?i.$.ti:i.$.pi,Date.now(),s,n)),null!=e&&r&&f.K.push(new t.Event(this.H.T(),i.$.wi,Date.now(),s,e)),f.L=this.A.za(f.K),f)},t.M.prototype.Tb=function(n,r){var u=new t.Ha,f=this.ba.ha();return(n.xc(),null==n.url||""===n.url)?(i.f.info("Card "+n.id+" has no url. Not logging click to Braze servers."),u):(n=this.ne([n]),null==n)?u:(u.K.push(new t.Event(this.H.T(),r?i.$.ri:i.$.oi,Date.now(),f,n)),u.L=this.A.za(u.K),u)},t.M.prototype.De=function(n){var r=new t.Ha,f=this.ba.ha(),u;return n.Sc()?(u=this.A.ma(t.j.B.C.Xc)||{},u[n.id]=!0,this.A.fa(t.j.B.C.Xc,u),n=this.ne([n]),null==n)?r:(r.K.push(new t.Event(this.H.T(),i.$.si,Date.now(),f,n)),r.L=this.A.za(r.K),r):(i.f.info("Card "+n.id+" refused this dismissal. Ignoring analytics event."),r)},t.M.prototype.Jh=function(n){var r=new t.Ha,u=this.ba.ha();return r.K.push(new t.Event(this.H.T(),i.$.Ui,Date.now(),u,{n:n})),r.L=this.A.za(r.K),r},t.M.prototype.ek=function(n,r){var u=this.ba.ha();return new t.Event(this.H.T(),i.$.oj,n,u,{cid:r})},t.M.prototype.ei=function(){var n=i.Z.lb.fc;new i.Z(n,i.f).setItem(n.na.yi,1,{baseUrl:this.ee,data:{api_key:this.cb,device_id:this.sd.Dd().id},userId:this.H.T()})},t.M.prototype.bg=function(n,i,r,u,f){this.ba.ha();var e=new t.Rd(this.H.T(),n,i,r,this.sd.Dd().oc(),this.Qg);this.vf.push(e);this.Qb(null,null,null,function(){"function"==typeof u&&u(n,i,r)},function(){"function"==typeof f&&f(n,i,r)})},t.M.prototype.Mk=function(n,r,u){var f=new t.Ha,o,e;return this.Na.qh(n)?(i.f.info('Custom Attribute "'+n+'" is blacklisted, ignoring.'),f.L=!1,f):(o=this.ba.ha(),null===r&&null===u?(e=i.$.aj,n={key:n}):(e=i.$.$i,n={key:n,latitude:r,longitude:u}),f.K.push(new t.Event(this.H.T(),e,Date.now(),o,n)),f.L=this.A.za(f.K),f)},t.Mc={tc:function(){var n=this.rk(navigator.userAgent||"");this.yd=n[0]||"Unknown Browser";this.version=n[1]||"Unknown Version";this.mj=this.al(this.gk)||navigator.platform;this.language=(navigator.am||navigator.language||navigator.browserLanguage||navigator.Zl||"").toLowerCase();this.Hk=this.ik(navigator.userAgent);this.userAgent=navigator.userAgent},al:function(n){for(var r,u,i=0;i<n.length;i++)if(r=n[i].Fa,u=n[i].Yl,r){if(r=r.toLowerCase(),t.G.isArray(n[i].sa)){for(u=0;u<n[i].sa.length;u++)if(-1!==r.indexOf(n[i].sa[u].toLowerCase()))return n[i].ua}else if(-1!==r.indexOf(n[i].sa.toLowerCase()))return n[i].ua}else if(u)return n[i].ua},rk:function(n){var t,i=n.match(/(konqueror|icab|crios|opera|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];return/trident/i.test(i[1])?(t=/\brv[ :]+(\.?\d+(\.\d+)*)/g.exec(n)||[],["Internet Explorer",t[1]||""]):"Chrome"===i[1]&&(t=n.match(/\b(OPR|Edge|EdgA)\/(\.?\d+(\.\d+)*)/),null!=t)?(t=t.slice(1),t[0]=t[0].replace("OPR","Opera"),t[0]=t[0].replace("EdgA","Edge"),[t[0],t[1]]):"Safari"===i[1]&&(t=n.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=t)?(t=t.slice(1),t[0]=t[0].replace("EdgiOS","Edge"),[t[0],t[1]]):(i=i[2]?[i[1],i[2]]:[null,null],null!=(t=n.match(/version\/(\.?\d+(\.\d+)*)/i))&&i.splice(1,1,t[1]),"Opera"===i[0]&&null!=(t=n.match(/mini\/(\.?\d+(\.\d+)*)/i)))?["Opera Mini",t[1]||""]:("MSIE"===i[0]&&(i[0]="Internet Explorer"),"CriOS"===i[0]&&(i[0]="Chrome"),i)},ul:function(){return"Internet Explorer"===this.yd?8<this.version:!0},ik:function(n){return n=n.toLowerCase(),-1!==n.indexOf("googlebot")||-1!==n.indexOf("bingbot")||-1!==n.indexOf("slurp")||-1!==n.indexOf("duckduckbot")||-1!==n.indexOf("baiduspider")||-1!==n.indexOf("yandexbot")||-1!==n.indexOf("facebookexternalhit")||-1!==n.indexOf("sogou")||-1!==n.indexOf("ia_archiver")||-1!==n.indexOf("+https://github.com/prerender/prerender")},gk:[{Fa:navigator.platform,sa:"Win",ua:"Windows"},{Fa:navigator.platform,sa:"Mac",ua:"Mac"},{Fa:navigator.platform,sa:"BlackBerry",ua:"BlackBerry"},{Fa:navigator.platform,sa:"FreeBSD",ua:"FreeBSD"},{Fa:navigator.platform,sa:"OpenBSD",ua:"OpenBSD"},{Fa:navigator.platform,sa:"Nintendo",ua:"Nintendo"},{Fa:navigator.platform,sa:"SunOS",ua:"SunOS"},{Fa:navigator.platform,sa:"PlayStation",ua:"PlayStation"},{Fa:navigator.platform,sa:"X11",ua:"X11"},{Fa:navigator.userAgent,sa:"iPhone",ua:"iOS"},{Fa:navigator.userAgent,sa:"iPad",ua:"iOS"},{Fa:navigator.platform,sa:"Pike v",ua:"iOS"},{Fa:navigator.platform,sa:["Linux armv7l","Android"],ua:"Android"},{Fa:navigator.userAgent,sa:["Android"],ua:"Android"},{Fa:navigator.platform,sa:"Linux",ua:"Linux"}]},t.G={},t.G.wb=function(n,t,r,u){var f=[];for(var e in n)f.push(n[e]);return-1===f.indexOf(t)?(i.f.error(r+" Valid values from "+u+' are "'+f.join('"/"')+'".'),!1):!0},t.G.isArray=function(n){return Array.isArray?Array.isArray(n):"[object Array]"===Object.prototype.toString.call(n)},t.G.ub=function(n){return"[object Date]"===Object.prototype.toString.call(n)},t.G.Ik=function(n){return"[object Object]"===Object.prototype.toString.call(n)},t.G.Gk=function(n){var i,t;null==n&&(n=[]);for(var r=[],f=arguments.length,u=0,e=n.length;u<e;u++)if(i=n[u],-1===r.indexOf(i)){for(t=1;t<f&&-1!==arguments[t].indexOf(i);t++);t===f&&r.push(i)}return r},t.G.keys=function(n){var i=[],t;if(null!=n)for(t in n)n.hasOwnProperty(t)&&i.push(t);return i},t.G.isEqual=function(n,i){var u,e,f,o,r;if(n===i)return 0!==n||1/n==1/i;if(null==n||null==i)return n===i;if(f=n.toString(),f!==i.toString())return!1;switch(f){case"[object RegExp]":case"[object String]":return""+n==""+i;case"[object Number]":return+n!=+n?+i!=+i:0==+n?1/+n==1/i:+n==+i;case"[object Date]":case"[object Boolean]":return+n==+i}if(f="[object Array]"===f,!f&&("object"!=typeof n||"object"!=typeof i||(u=n.constructor,e=i.constructor,u!==e&&!("function"==typeof u&&u instanceof u&&"function"==typeof e&&e instanceof e)&&"constructor"in n&&"constructor"in i)))return!1;for(var u=[],e=[],r=u.length;r--;)if(u[r]===n)return e[r]===i;if(u.push(n),e.push(i),f){if(r=n.length,r!==i.length)return!1;for(;r--;)if(!t.G.isEqual(n[r],i[r],u,e))return!1}else{if(f=t.G.keys(n),r=f.length,t.G.keys(i).length!==r)return!1;for(;r--;)if(o=f[r],!i.hasOwnProperty(o)||!t.G.isEqual(n[o],i[o],u,e))return!1}return u.pop(),e.pop(),!0},t.N={},t.N.Ad=function(n,t){return n/=1e3,t&&(n=Math.floor(n)),n},t.N.eb=function(n){var t=parseInt(n);return null==n||isNaN(t)?null:new Date(1e3*t)},t.N.$h=function(n){return null!=n&&t.G.ub(n)?n.toISOString().replace(/\.[0-9]{3}Z$/,""):n},t.N.Tc=function(n){return null==n||""===n?null:new Date(n)},t.N.yl=function(n){return null==n||""===n?Date.now():n},t.N.Rh=function(n){return(Date.now()-n.valueOf())/1e3},t.N.Sh=function(n){return(n.valueOf()-Date.now())/1e3},t.Ma={},t.Ma.nf=32,t.Ma.Ig=9,t.Ma.af=13,t.Ma.Fi=27,t.Nf={tc:function(n,t){if(this.data={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"ليس لدينا أي تحديث. يرجى التحقق مرة أخرى لاحقاً",FEED_TIMEOUT_MESSAGE:"يرجى تكرار المحاولة لاحقا"},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Prøv venligst senere.",FEED_TIMEOUT_MESSAGE:"Prøv venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verfügbar.<br/>Bitte später noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte später noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor compruébelo más tarde.",FEED_TIMEOUT_MESSAGE:"Por favor inténtelo más tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualización.<br/>Vuelva a verificar más tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo más tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"Päivityksiä ei ole saatavilla.<br/>Tarkista myöhemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yritä myöhemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise à jour disponible.<br/>Veuillez vérifier ultérieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez réessayer ultérieurement."},he:{NO_CARDS_MESSAGE:".אין לנו עדכונים. בבקשה בדוק שוב בקרוב",FEED_TIMEOUT_MESSAGE:".בבקשה נסה שוב בקרוב"},hi:{NO_CARDS_MESSAGE:"हमारे पास कोई अपडेट नहीं हैं। कृपया बाद में फिर से जाँच करें.।",FEED_TIMEOUT_MESSAGE:"कृपया बाद में दोबारा प्रयास करें।."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare più tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare più tardi."},ja:{NO_CARDS_MESSAGE:"アップデートはありません。<br/>後でもう一度確認してください。",FEED_TIMEOUT_MESSAGE:"後でもう一度試してください。"},ko:{NO_CARDS_MESSAGE:"업데이트가 없습니다. 다음에 다시 확인해 주십시오.",FEED_TIMEOUT_MESSAGE:"나중에 다시 시도해 주십시오."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst prøv igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Proszę sprawdzić ponownie później.",FEED_TIMEOUT_MESSAGE:"Proszę spróbować ponownie później."},pt:{NO_CARDS_MESSAGE:"Não temos atualizações.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"Não temos nenhuma atualização.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:"Обновления недоступны.<br/>Пожалуйста, проверьте снова позже.",FEED_TIMEOUT_MESSAGE:"Пожалуйста, повторите попытку позже."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>Försök igen senare.",FEED_TIMEOUT_MESSAGE:"Försök igen senare."},th:{NO_CARDS_MESSAGE:"เราไม่มีการอัพเดต กรุณาตรวจสอบภายหลัง.",FEED_TIMEOUT_MESSAGE:"กรุณาลองใหม่ภายหลัง."},vi:{NO_CARDS_MESSAGE:"Chúng tôi không có cập nhật nào.<br/>Vui lòng kiểm tra lại sau.",FEED_TIMEOUT_MESSAGE:"Vui lòng thử lại sau."},"zh-hk":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},"zh-hans":{NO_CARDS_MESSAGE:"暂时没有更新.<br/>请稍后再试.",FEED_TIMEOUT_MESSAGE:"请稍候再试."},"zh-hant":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},"zh-tw":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},zh:{NO_CARDS_MESSAGE:"暂时没有更新.<br/>请稍后再试.",FEED_TIMEOUT_MESSAGE:"请稍候再试."}},null!=n&&(n=n.toLowerCase()),null!=n&&null==this.data[n]){var r=n.indexOf("-");0<r&&(n=n.substring(0,r))}null==this.data[n]&&(n="Braze does not yet have a localization for language "+n+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.",t?i.f.error(n):i.f.info(n),n="en");this.language=n},get:function(n){return this.data[this.language][n]}},t.Math={},t.Math.Sk=function(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n+1))+n},t.Ge=function(){},t.Ge.Sf=function(n){var t,o,e=!1,u,f,r;try{if(window.XMLHttpRequest&&(t=new XMLHttpRequest)&&"undefined"!=typeof t.withCredentials||("undefined"!=typeof XDomainRequest?(t=new XDomainRequest,e=t.async=!0):i.f.error("This browser does not have any supported ajax options!")),null!=t){if(u=function(t){"function"==typeof n.error&&n.error(t);"function"==typeof n.ve&&n.ve(!1)},t.onload=function(){var i;if(e)i=!0;else{if(4!==t.readyState)return;i=200<=t.status&&300>t.status||304===t.status}i?("function"==typeof n.L&&n.L(JSON.parse(t.responseText)),"function"==typeof n.ve&&n.ve(!0)):u(t.status)},t.onerror=function(){u()},t.ontimeout=function(){u()},o=JSON.stringify(n.data),e)t.onprogress=function(){},t.open("post",n.url);else for(t.open("POST",n.url,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),f=n.headers||[],r=0;r<f.length;r++)t.setRequestHeader(f[r][0],f[r][1]);t.send(o)}}catch(s){i.f.error("Network request error: "+s.message)}},t.S=function(){},t.S.ni=/^[^\x00-\x1F\x22]+$/,t.S.Ci=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,t.S.Wb=function(n,t,r,u){return(u="string"==typeof n||null===n&&u)||i.f.error("Cannot "+t+" because "+r+' "'+n+'" is invalid.'),u},t.S.Wa=function(n,r,u){var f=null!=n&&"string"==typeof n&&(""===n||n.match(t.S.ni));return f||i.f.error("Cannot "+r+" because "+u+' "'+n+'" is invalid.'),f},t.S.Hl=function(n,r,u){var f=typeof n,e=t.G.ub(n);return(f=null!=n&&("number"===f||"boolean"===f||e||"string"===f))||i.f.error("Cannot "+r+" because "+u+' "'+n+'" is invalid.'),f},t.S.Fh=function(n){return"string"==typeof n&&null!=n.match(t.S.Ci)},t.Xa={},t.Xa.vb=function(n){if(n=parseInt(n),isNaN(n))return"";n>>>=0;var i=n&255,r=(n&65280)>>>8,u=(n&16711680)>>>16;return t.Mc.ul()?"rgba("+[u,r,i,((n&4278190080)>>>24)/255].join()+")":"rgb("+[u,r,i].join()+")"},t.Xa.$l=function(n){return(n=parseInt(n),isNaN(n))?"":(n>>>=0,"rgb("+[(n&16711680)>>>16,(n&65280)>>>8,n&255].join()+")")},t.ia={},t.ia.cd={xj:"up",Bi:"down",vg:"left",qj:"right"},t.ia.Lf=function(n,t,i,r){return null==n?!1:(t=t||!1,i=i||!1,n=n.getBoundingClientRect(),null==n?!1:(0<=n.top&&n.top<=(window.innerHeight||document.documentElement.clientHeight)||!t)&&(0<=n.left||!r)&&(0<=n.bottom&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!i)&&(n.right<=(window.innerWidth||document.documentElement.clientWidth)||!r))},t.ia.Cl=function(n){return t.ia.Lf(n,!0,!1,!1)},t.ia.Vj=function(n){return t.ia.Lf(n,!1,!0,!1)},t.ia.sh=function(n){if(n.onclick){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0);n.onclick.apply(n,[t])}},t.ia.jk=function(n,i,r){var u=null,f=null;n.addEventListener("touchstart",function(n){u=n.touches[0].clientX;f=n.touches[0].clientY},!1);n.addEventListener("touchmove",function(n){if(null!=u&&null!=f){var e=u-n.touches[0].clientX,o=f-n.touches[0].clientY;Math.abs(e)>Math.abs(o)&&25<=Math.abs(e)?(0<e&&i===t.ia.cd.vg?r(n):i===t.ia.cd.qj&&r(n),f=u=null):25<=Math.abs(o)&&(0<o&&i===t.ia.cd.xj?r(n):i===t.ia.cd.Bi&&r(n),f=u=null)}},!1)},t.Ab.prototype.we="ab-classic-card",t.zb.prototype.we="ab-captioned-image",t.Banner.prototype.we="ab-banner",t.kb.prototype.we="ab-control-card",t.Ab.prototype.Ae=!0,t.zb.prototype.Ae=!0,t.Banner.prototype.Ae=!1,t.kb.prototype.Ae=!1,t.b.Lg="data-ab-had-top-impression",t.b.eg="data-ab-had-bottom-impression",t.b.Bl=function(n){return null!=n&&!!n.getAttribute(t.b.Lg)},t.b.Ek=function(n){null!=n&&n.setAttribute(t.b.Lg,!0)},t.b.Uj=function(n){return null!=n&&!!n.getAttribute(t.b.eg)},t.b.Dk=function(n){null!=n&&n.setAttribute(t.b.eg,!0)},t.b.Kh=function(n){null!=n&&(n=n.querySelectorAll(".ab-unread-indicator")[0],null!=n&&(n.className+=" read"))},t.b.sk=function(n){return n.getAttribute("data-ab-card-id")},t.b.prototype.Pa=function(n,i,r){function l(i){return i=i||window.event,t.b.Kh(e),s&&(n(c),t.oa.openUri(c.url,i,r)),!1}var e=document.createElement("div"),s,c,f,u,o,h;return e.className="ab-card "+this.constructor.prototype.we,e.setAttribute("data-ab-card-id",this.id),s=this.url&&""!==this.url,c=this,this.pinned&&(f=document.createElement("div"),f.className="ab-pinned-indicator",u=document.createElement("i"),u.className="fa fa-star",f.appendChild(u),e.appendChild(f)),this.imageUrl&&""!==this.imageUrl&&(f=document.createElement("div"),f.className="ab-image-area",u=document.createElement("img"),u.setAttribute("src",this.imageUrl),f.appendChild(u),e.className+=" with-image",s&&!this.constructor.prototype.Ae?(u=document.createElement("a"),u.setAttribute("href",this.url),u.onclick=l,u.appendChild(f),e.appendChild(u)):e.appendChild(f)),f=document.createElement("div"),f.className="ab-card-body",this.dismissible&&(u=document.createElement("i"),u.className="fa fa-times ab-close-button fa-times-circle",o=function(n){n=n||window.event;i(c);e.className+=" ab-hide";setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},t.J.Yd);n.stopPropagation()},u.onclick=o,e.appendChild(u),t.ia.jk(f,t.ia.cd.vg,o)),u=document.createElement("div"),u.className="ab-title",s?(o=document.createElement("a"),o.setAttribute("href",this.url),o.onclick=l,o.appendChild(document.createTextNode(this.title)),u.appendChild(o)):u.appendChild(document.createTextNode(this.title)),f.appendChild(u),u=document.createElement("div"),u.className="ab-description",u.appendChild(document.createTextNode(this.description)),s&&(o=document.createElement("div"),o.className="ab-url-area",h=document.createElement("a"),h.setAttribute("href",this.url),h.appendChild(document.createTextNode(this.linkText)),h.onclick=l,o.appendChild(h),u.appendChild(o)),f.appendChild(u),e.appendChild(f),f=document.createElement("div"),f.className="ab-unread-indicator",this.viewed&&(f.className+=" read"),e.appendChild(f),e},t.J.Yd=240,t.J.fd=6e4,t.ta.fd=6e4,t.J.Gg="data-update-subscription-id",t.J.Ud="data-last-requested-refresh",t.J.pj=1e4,t.J.ga=function(n,i){i&&(i.className=i.className.replace("ab-show","ab-hide"),setTimeout(function(){i&&i.parentNode&&i.parentNode.removeChild(i)},t.J.Yd));var r=i.getAttribute(t.J.Gg);null!=r&&n.Ea(r)},t.J.prototype.Ub=function(n,t){n.Ub(t)},t.J.prototype.Tb=function(n,t){n.Tb(t)},t.J.prototype.kh=function(n,r){var f=document.createElement("div"),u,o;if(f.className="ab-feed-body",null==this.lastUpdated)r=document.createElement("div"),r.className="ab-no-cards-message",u=document.createElement("i"),u.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",r.appendChild(u),f.appendChild(r);else{for(var u=!1,s=this,h=function(t){s.Tb(n,t)},c=function(t){n.De(t)},e=0;e<this.cards.length;e++)o=this.cards[e]instanceof t.kb,!o||this instanceof t.ta?(f.appendChild(this.cards[e].Pa(h,c,r)),u=u||!o):i.f.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.");u||(r=document.createElement("div"),r.className="ab-no-cards-message",r.innerHTML=t.Nf.get("NO_CARDS_MESSAGE"),f.appendChild(r))}return f},t.J.prototype.xe=function(n,i){var e,r;if(null!=i){for(e=[],i=i.querySelectorAll(".ab-card"),r=0;r<i.length;r++){var f=t.b.Bl(i[r]),u=t.b.Uj(i[r]),h=f,c=u,o=t.ia.Cl(i[r]),s=t.ia.Vj(i[r]);if(!f&&o&&(f=!0,t.b.Ek(i[r])),!u&&s&&(u=!0,t.b.Dk(i[r])),f&&u&&(o||s||t.b.Kh(i[r]),!h||!c))for(f=t.b.sk(i[r]),u=0;u<this.cards.length;u++)if(this.cards[r].id===f){e.push(this.cards[r]);break}}0<e.length&&this.Ub(n,e)}},t.J.prototype.jh=function(n){n.Ke()},t.J.prototype.Yf=function(n,i){var u=i.querySelectorAll(".ab-refresh-button")[0],r;null!=u&&(u.className+=" fa-spin");r=Date.now().toString();i.setAttribute(t.J.Ud,r);setTimeout(function(){if(i.getAttribute(t.J.Ud)===r){for(var n=i.querySelectorAll(".fa-spin"),u=0;u<n.length;u++)n[u].className=n[u].className.replace(/fa-spin/g,"");n=i.querySelectorAll(".ab-initial-spinner")[0];null!=n&&(u=document.createElement("span"),u.innerHTML=t.Nf.get("FEED_TIMEOUT_MESSAGE"),n.parentNode.appendChild(u),n.parentNode.removeChild(n))}},t.J.pj);this.jh(n)},t.J.prototype.Pa=function(n,i){function o(t){t=t||window.event;h.Yf(n,u);t.stopPropagation()}function s(i){i=i||window.event;t.J.ga(n,u);i.stopPropagation()}var h=this,u=document.createElement("div"),e,f,r;return u.className="ab-feed ab-show",e=document.createElement("div"),e.className="ab-feed-buttons-wrapper",e.setAttribute("tabindex","-1"),u.appendChild(e),f=document.createElement("i"),f.className="fa fa-times ab-close-button",f.setAttribute("aria-label","Close Feed"),f.setAttribute("tabindex","0"),f.setAttribute("role","button"),f.addEventListener("keydown",function(n){n=n||window.event;n.keyCode!==t.Ma.nf&&n.keyCode!==t.Ma.af||s(n)}),f.onclick=s,r=document.createElement("i"),r.className="fa fa-refresh ab-refresh-button",null==this.lastUpdated&&(r.className+=" fa-spin"),r.setAttribute("aria-label","Refresh Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),r.addEventListener("keydown",function(n){n=n||window.event;n.keyCode!==t.Ma.nf&&n.keyCode!==t.Ma.af||o(n)}),r.onclick=o,e.appendChild(r),e.appendChild(f),u.appendChild(this.kh(n,i)),u.onscroll=function(){h.xe(n,u)},u},t.J.prototype.Qh=function(n,i){i.setAttribute(t.J.Gg,n)},t.J.prototype.Qe=function(n,i,r,u,f){if(t.G.isArray(n)){for(var o=[],e=0;e<n.length;e++)n[e]instanceof t.b&&o.push(n[e]);this.cards=o;this.lastUpdated=i;null!=r&&(null==this.lastUpdated?t.J.ga(u,r):(n=r.querySelectorAll(".ab-feed-body")[0],null!=n&&(f=this.kh(u,f),n.parentNode.replaceChild(f,n),this.xe(u,f.parentNode))))}},t.ta.ga=t.J.ga,t.ta.prototype.Ub=function(n,t){n.Ub(t,!0)},t.ta.prototype.Tb=function(n,t){n.Tb(t,!0)},t.ta.prototype.jh=function(n){n.yc()},t.h.Yd=240,t.h.Hi=480,t.h.dj=200,t.h.Zc={NONE:0,mg:1,ng:2},t.h.prototype.xd=function(){return this.animateIn?" ab-show ":" "},t.h.prototype.ph=function(){return this.animateOut?" ab-hide ":" "},t.h.prototype.Hf=function(n){return n.className=n.className.replace(this.xd(),this.ph()),this.animateOut},t.h.prototype.ga=function(n,i){var r,f,u,o,e;n&&(r=-1===n.className.indexOf("ab-in-app-message")?n.getElementsByClassName("ab-in-app-message")[0]:n,f=!1,r&&(f=this.Hf(r)),u=document.getElementsByTagName("body")[0],null!=u&&(o=u.scrollTop),e=this,r=function(){if(n&&n.parentNode){var r=n.closest(".ab-iam-root");null==r&&(r=n);r.parentNode&&r.parentNode.removeChild(r)}null!=e.Ne()&&(r=document.getElementById(e.Ne()))&&r.parentNode&&r.parentNode.removeChild(r);null!=u&&"Safari"===t.Mc.yd&&(u.scrollTop=o);i&&i()},f?setTimeout(r,t.h.Yd):r())},t.h.prototype.Pa=function(n,i,r,u,f,e){function v(){-1!==c.className.indexOf("ab-start-hidden")&&(c.className=c.className.replace("ab-start-hidden",l.xd()),r(e))}var l=this,c=document.createElement("div"),o,y,h,a;return c.className="ab-in-app-message ab-start-hidden",this.Rc()&&(c.className+=" ab-modal-interactions"),this.gb()||(c.style.color=t.Xa.vb(this.textColor)),null!=e?e.appendChild(c):e=c,this.imageStyle===t.h.Sd.GRAPHIC&&(c.className+=" graphic"),this.orientation===t.h.Ga.LANDSCAPE&&(c.className+=" landscape"),0===this.buttons.length&&(l.clickAction!==t.h.Bb.NONE&&(c.className+=" ab-clickable"),c.onclick=function(r){return r=r||window.event,l.ga(e,function(){n.Fe(l);l.clickAction===t.h.Bb.URI?t.oa.openUri(l.uri,r,u||l.openTarget===t.h.jd.BLANK):l.clickAction===t.h.Bb.NEWS_FEED&&i()}),r.stopPropagation(),!1}),this.gb()||(o=this.backgroundColor),s(c,o),f!==t.h.Zc.NONE&&(o=document.createElement("i"),o.setAttribute("aria-label","Close Message"),o.setAttribute("tabindex","0"),o.setAttribute("role","button"),o.className="fa fa-times ab-close-button",o.className=f===t.h.Zc.mg?o.className+" fa-times":o.className+" fa-times-circle",y=function(n){n=n||window.event;l.ga(e);l.Sc();n.stopPropagation()},o.addEventListener("keydown",function(n){n=n||window.event;n.keyCode!==t.Ma.nf&&n.keyCode!==t.Ma.af||y(n)}),o.onclick=y,l.gb()||(o.style.color=t.Xa.vb(this.closeButtonColor)),c.appendChild(o)),f=!1,o=document.createElement("div"),o.className="ab-image-area",this.imageUrl?(this.cropType===t.h.$c.CENTER_CROP?(h=document.createElement("span"),h.className="ab-center-cropped-img",h.style.backgroundImage="url("+this.imageUrl+")"):(h=document.createElement("img"),h.setAttribute("src",this.imageUrl),f=!0,h.onload=v,setTimeout(v,1e3)),o.appendChild(h),c.appendChild(o)):this.icon&&(o.className+=" ab-icon-area",h=document.createElement("span"),h.className="ab-icon",this.gb()||(h.style.backgroundColor=t.Xa.vb(this.iconBackgroundColor),h.style.color=t.Xa.vb(this.iconColor)),a=document.createElement("i"),a.className="fa",a.appendChild(document.createTextNode(this.icon)),h.appendChild(a),o.appendChild(h),c.appendChild(o)),o=document.createElement("div"),o.className="ab-message-text",o.className+=" "+this.messageAlignment.toLowerCase()+"-aligned",o.addEventListener("touchstart",function(){},{passive:!0}),this.header&&0<this.header.length&&(h=document.createElement("span"),h.className="ab-message-header",h.className+=" "+this.headerAlignment.toLowerCase()+"-aligned",this.gb()||(h.style.color=t.Xa.vb(this.headerTextColor)),h.appendChild(document.createTextNode(this.header)),o.appendChild(h)),o.appendChild(document.createTextNode(this.message)),c.appendChild(o),f||v(),c},t.h.prototype.Nh=function(){},t.pb.prototype.Pa=function(n,i,r,u,f){return n=t.h.prototype.Pa.call(this,n,r,u,f,t.h.Zc.mg),n.className+=" ab-slideup ab-effect-slide",n},t.pb.prototype.Nh=function(n){t.ia.Lf(n,!0,!0)||(this.slideFrom===t.h.$d.TOP?n.style.top="0px":n.style.bottom="0px")},t.dc.prototype.Pa=function(n,i,r,u,f){return i=document.createElement("div"),i.className="ab-centering-div ab-modal ab-modal-interactions",u=t.h.prototype.Pa.call(this,n,r,u,f,t.h.Zc.ng,i),u.className+=" ab-modal ab-effect-modal",i.setAttribute("tabindex","-1"),e(this,n,r,u,f,i),o(u),i},t.cc.prototype.Pa=function(n,i,r,u,f){return i=t.h.prototype.Pa.call(this,n,r,u,f,t.h.Zc.ng),i.className+=" ab-fullscreen ab-effect-fullscreen",i.setAttribute("tabindex","-1"),e(this,n,r,i,f),o(i),i},t.Sa.prototype.Pa=function(n,i,r,u,f){function s(i){var r=i.getAttribute("href"),u=i.onclick;return function(s){var h;if(s=s||window.event,null==u||"function"!=typeof u||!1!==u()){if(h=t.Pg.Qk(r).abButtonId,(null==h||""===h)&&(h=i.getAttribute("id")),null!=r&&""!==r&&0!==r.indexOf("#")){var c="blank"===(i.getAttribute("target")||"").toLowerCase().replace("_",""),l=f||o.openTarget===t.h.jd.BLANK||c,c=function(){n.Fd(o,h,r);t.oa.openUri(r,s,l)};l?c():o.ga(e,c)}else n.Fd(o,h,r);return s.stopPropagation(),!1}}}var o=this,e=document.createElement("iframe");return e.onload=function(){function l(n){return function(){o.ga(e);i.display[n].apply(i.display,Array.prototype.slice.call(arguments))}}function a(n){return function(){var t=i.getUser();t[n].apply(t,Array.prototype.slice.call(arguments))}}function h(n){return function(){i[n].apply(i,Array.prototype.slice.call(arguments))}}var f,n;e.contentWindow.document.write(o.message);f=e.contentWindow.document.getElementsByTagName("head")[0];null!=f&&(n=document.createElement("style"),n.innerHTML=t.Fg,f.appendChild(n),o.gb()&&(n=document.createElement("style"),n.innerHTML=o.css,n.id=o.Ne(),f.appendChild(n)),n=e.contentWindow.document.createElement("base"),n.setAttribute("target","_parent"),f.appendChild(n));for(var f={closeMessage:function(){o.ga(e);o.Sc()},display:{},web:{}},r=["requestImmediateDataFlush","logCustomEvent","logPurchase","unregisterAppboyPushMessages"],n=0;n<r.length;n++)f[r[n]]=h(r[n]);for(var r="setFirstName setLastName setEmail setGender setDateOfBirth setCountry setHomeCity setEmailNotificationSubscriptionType setPushNotificationSubscriptionType setPhoneNumber setCustomUserAttribute addToCustomAttributeArray removeFromCustomAttributeArray incrementCustomUserAttribute setCustomLocationAttribute".split(" "),c={},n=0;n<r.length;n++)c[r[n]]=a(r[n]);for(f.getUser=function(){return c},r=["showFeed"],n=0;n<r.length;n++)f.display[r[n]]=l(r[n]);for(r=["registerAppboyPushMessages","trackLocation"],n=0;n<r.length;n++)f.web[r[n]]=h(r[n]);for(e.contentWindow.appboyBridge=f,r=e.contentWindow.document.getElementsByTagName("a"),n=0;n<r.length;n++)r[n].onclick=s(r[n]);for(r=e.contentWindow.document.getElementsByTagName("button"),n=0;n<r.length;n++)r[n].onclick=s(r[n]);n=e.contentWindow.document.body;null!=n&&(o.Re()&&(n.id=o.htmlId),r=document.createElement("hidden"),r.onclick=f.closeMessage,r.className="ab-programmatic-close-button",n.appendChild(r));-1!==e.className.indexOf("ab-start-hidden")&&(e.className=e.className.replace("ab-start-hidden",o.xd()),u(e))},e.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",e},t.Sa.prototype.Hf=function(n){var r=t.h.prototype.Hf.call(this,n),i;if(!this.animateIn&&!this.animateOut)for(n=Array.prototype.slice.call(n.contentWindow.document.body.getElementsByClassName("ab-show")),i=0;i<n.length;i++)r=!0,n[i].className=n[i].className.replace("ab-show","ab-hide");return r},t.dc.prototype.ga=t.cc.prototype.ga=t.Sa.prototype.ga=function(n,i){for(var u=(n?n.parentNode:document).querySelectorAll(".ab-page-blocker"),r=null,f=0;f<u.length;f++)-1===u[f].className.indexOf("ab-hide")&&(r=u[f]);r&&(r.className=r.className.replace(this.xd(),this.ph()),u=function(){r.parentNode&&r.parentNode.removeChild(r)},this.animateOut?setTimeout(u,t.h.Hi):u());t.h.prototype.ga.call(this,n,i)},t.Pg={},t.Pg.Qk=function(n){var t,i,r;if(null==n&&(n=""),t=n.split("?").slice(1).join("?"),n={},null!=t)for(t=t.split("&"),i=0;i<t.length;i++)r=t[i].split("="),""!==r[0]&&(n[r[0]]=r[1]);return n},t.oa={},t.oa.openUri=function(n,t,i){i||null!=t&&t.metaKey?window.open(n):window.location=n},t.oa.Jk=function(){return 750>=screen.width},t.oa.Ga={Xd:0,bf:1},t.oa.yk=function(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?t.oa.Ga.bf:t.oa.Ga.Xd;if("screen"in window){var n=window.screen.orientation||screen.Wl||screen.Xl;if(null!=n&&"object"==typeof n&&(n=n.type),"landscape-primary"===n||"landscape-secondary"===n)return t.oa.Ga.bf}return t.oa.Ga.Xd},r=new h,r.F=t,r.ol=i,n.AF=h,n.initialize=r.Kf,n.destroy=r.Cd,n.getDeviceId=r.uk,n.toggleAppboyLogging=r.cg,n.setLogger=r.Zf,n.openSession=r.He,n.changeUser=r.qc,n.getUser=r.Qc,n.requestImmediateDataFlush=r.Id,n.requestFeedRefresh=r.Ke,n.getCachedFeed=r.ye,n.subscribeToFeedUpdates=r.Xh,n.requestContentCardsRefresh=r.yc,n.getCachedContentCards=r.Pc,n.subscribeToContentCardsUpdates=r.Vh,n.logCardImpressions=r.Ub,n.logCardClick=r.Tb,n.logCardDismissal=r.De,n.logFeedDisplayed=r.Ih,n.logContentCardsDisplayed=r.Hh,n.logInAppMessageImpression=r.Gd,n.logInAppMessageClick=r.Fe,n.logInAppMessageButtonClick=r.Ee,n.logInAppMessageHtmlClick=r.Fd,n.subscribeToNewInAppMessages=r.Zh,n.removeSubscription=r.Ea,n.removeAllSubscriptions=r.va,n.logCustomEvent=r.Pf,n.logPurchase=r.Qf,n.isPushSupported=r.Sb,n.isPushBlocked=r.uc,n.isPushGranted=r.Mf,n.isPushPermissionGranted=r.Be,n.registerAppboyPushMessages=r.Uk,n.unregisterAppboyPushMessages=r.El,n.submitFeedback=r.bg,n.trackLocation=r.Dl,n.stopWebTracking=r.sl,n.resumeWebTracking=r.$k,n.wipeData=r.Il,n.ab=r.F,n.ab.User=r.F.w,n.ab.User.Genders=r.F.w.pg,n.ab.User.NotificationSubscriptionTypes=r.F.w.hd,n.ab.User.prototype.getUserId=r.F.w.prototype.T,n.ab.User.prototype.setFirstName=r.F.w.prototype.hl,n.ab.User.prototype.setLastName=r.F.w.prototype.ll,n.ab.User.prototype.setEmail=r.F.w.prototype.fl,n.ab.User.prototype.setGender=r.F.w.prototype.il,n.ab.User.prototype.setDateOfBirth=r.F.w.prototype.el,n.ab.User.prototype.setCountry=r.F.w.prototype.cl,n.ab.User.prototype.setHomeCity=r.F.w.prototype.jl,n.ab.User.prototype.setLanguage=r.F.w.prototype.kl,n.ab.User.prototype.setEmailNotificationSubscriptionType=r.F.w.prototype.gl,n.ab.User.prototype.setPushNotificationSubscriptionType=r.F.w.prototype.$f,n.ab.User.prototype.setPhoneNumber=r.F.w.prototype.ml,n.ab.User.prototype.setAvatarImageUrl=r.F.w.prototype.bl,n.ab.User.prototype.setLastKnownLocation=r.F.w.prototype.Le,n.ab.User.prototype.setUserAttribute=r.F.w.prototype.ca,n.ab.User.prototype.setCustomUserAttribute=r.F.w.prototype.Vc,n.ab.User.prototype.addToCustomAttributeArray=r.F.w.prototype.Rj,n.ab.User.prototype.removeFromCustomAttributeArray=r.F.w.prototype.Vk,n.ab.User.prototype.incrementCustomUserAttribute=r.F.w.prototype.Fk,n.ab.User.prototype.addAlias=r.F.w.prototype.Qj,n.ab.User.prototype.setCustomLocationAttribute=r.F.w.prototype.dl,n.ab.InAppMessage=r.F.h,n.ab.InAppMessage.SlideFrom=r.F.h.$d,n.ab.InAppMessage.ClickAction=r.F.h.Bb,n.ab.InAppMessage.DismissType=r.F.h.Bc,n.ab.InAppMessage.OpenTarget=r.F.h.jd,n.ab.InAppMessage.ImageStyle=r.F.h.Sd,n.ab.InAppMessage.TextAlignment=r.F.h.sf,n.ab.InAppMessage.Orientation=r.F.h.Ga,n.ab.InAppMessage.CropType=r.F.h.$c,n.ab.InAppMessage.prototype.subscribeToClickedEvent=r.F.h.prototype.Oe,n.ab.InAppMessage.prototype.subscribeToDismissedEvent=r.F.h.prototype.Wh,n.ab.InAppMessage.prototype.removeSubscription=r.F.h.prototype.Ea,n.ab.InAppMessage.prototype.removeAllSubscriptions=r.F.h.prototype.va,n.ab.InAppMessage.Button=r.F.h.Aa,n.ab.InAppMessage.Button.prototype.subscribeToClickedEvent=r.F.h.Aa.prototype.Oe,n.ab.InAppMessage.Button.prototype.removeSubscription=r.F.h.Aa.prototype.Ea,n.ab.InAppMessage.Button.prototype.removeAllSubscriptions=r.F.h.Aa.prototype.va,n.ab.SlideUpMessage=r.F.pb,n.ab.ModalMessage=r.F.dc,n.ab.FullScreenMessage=r.F.cc,n.ab.HtmlMessage=r.F.Sa,n.ab.ControlMessage=r.F.$b,n.ab.Feed=r.F.J,n.ab.Feed.prototype.getUnreadCardCount=r.F.J.prototype.Ah,n.ab.ContentCards=r.F.ta,n.ab.ContentCards.prototype.getUnviewedCardCount=r.F.ta.prototype.zk,n.ab.Card=r.F.b,n.ab.ClassicCard=r.F.Ab,n.ab.CaptionedImage=r.F.zb,n.ab.Banner=r.F.Banner,n.ab.ControlCard=r.F.kb,n.ab.WindowUtils=r.F.oa,"undefined"!=typeof f&&(n.ADF=f,r.display=new f(r,n),n.display=r.display,n.display.automaticallyShowNewInAppMessages=r.display.Tj,n.display.showInAppMessage=r.display.rl,n.display.showFeed=r.display.Uh,n.display.destroyFeed=r.display.hk,n.display.toggleFeed=r.display.Al,n.display.showContentCards=r.display.ql,n.display.hideContentCards=r.display.Bk,n.display.toggleContentCards=r.display.zl),n.sharedLib=r.ol,n.subscribeToInit=r.Yh,n}var f,i,r,h,l;if("function"==typeof o&&!0&&!0?c(n.exports||t):c(window.appboy={}),"undefined"!=typeof appboyQueue&&appboyQueue&&appboyQueue.length&&0<appboyQueue.length)for(f=appboyQueue,appboyQueue=null,i=0;i<f.length;i++)if(f[i].callee&&(r=f[i].callee.name,(null==r||""===r)&&(r=/^function ([\w]*)\(/g.exec(f[i].callee.toString())[1]),null!=r&&""!==r)){for(var s=r.split("_"),u=appboy,l=this,a="appboy",e=0;e<s.length;e++)"prototype"===s[e]?(h=eval({"appboy.ab.User":"appboy.getUser","appboy.ab.Feed":"appboy.getCachedFeed","appboy.ab.ContentCards":"appboy.getCachedContentCards"}[a]),l=u=null!=h?h.apply():new u.constructor):u=u[s[e]],a+="."+s[e];null!=u&&"function"==typeof u&&u.apply(l,f[i])}}).call(window)});window.appboy=h;var t="Appboy",c=28,l="2.0.2",i={PageView:3,PageEvent:4,Commerce:16},f={"01":"https://dev.appboy.com/api/v3","02":"https://sdk-02.iad.appboy.com/api/v3","03":"https://sdk.iad-03.appboy.com/api/v3",EU:"https://sdk.api.appboy.eu/api/v3"},r=function(){function w(t){var i=!1;return t.ProductAction.ProductList&&t.ProductAction.ProductList.forEach(function(r){var f,e;if(r.Attributes==null&&(r.Attributes={}),r.Attributes.Sku=r.Sku,f=n.forwardSkuAsProductName==="True"?u(String(r.Sku)):u(String(r.Name)),e=s(r.Attributes),e==null)return"Properties did not pass validation for "+f;i=appboy.logPurchase(f,parseFloat(r.Price),t.CurrencyCode,r.Quantity,e)}),i===!0}function b(t){var r,f,e,i=t.EventAttributes||{},o;return i.hostname=window.location.hostname,i.title=window.document.title,e=n.setEventNameForPageView==="True"?t.EventName:window.location.pathname,r=u(e),f=s(i),o=appboy.logCustomEvent(r,f),o===!0}function c(n,i){var f,r,u;if(n==="dob")if(i instanceof Date)appboy.getUser().setDateOfBirth(i.getFullYear(),i.getMonth()+1,i.getDate());else return"Can't call removeUserAttribute or setUserAttribute on forwarder "+t+", removeUserAttribute or setUserAttribute must set 'dob' to a date";else if(n==="$Age")if(typeof i=="number")f=(new Date).getFullYear()-i,appboy.getUser().setDateOfBirth(f,1,1);else return"$Age must be a number";else{if(i==null&&(i=""),!(typeof i=="string"))return"Can't call removeUserAttribute or setUserAttribute on forwarder "+t+", removeUserAttribute or setUserAttribute must set this value to a string";if(r=[],r.push(i),u=appboy.getUser(),!u[e[n]].apply(u,r))return"removeUserAttribute or setUserAttribute on forwarder "+t+" failed to call, an invalid attribute value was passed in"}}function l(n){var t=u(n.EventName),i=s(n.EventAttributes),r;return i==null?"Properties did not pass validation for "+t:(r=appboy.logCustomEvent(t,i),r===!0)}function k(r){var u=!1,f,e,s;if(r.EventDataType==i.Commerce&&r.EventCategory==mParticle.CommerceEventType.ProductPurchase)u=w(r);else if(r.EventDataType==i.Commerce){if(f=mParticle.eCommerce.expandCommerceEvent(r),f!=null){for(e=0;e<f.length;e++){s=!1;try{u=l(f[e]);u===!0&&(s=!0)}catch(c){return"Error logging page event"+c.message}}u=s===!0}}else if(r.EventDataType==i.PageEvent)u=l(r);else if(r.EventDataType==i.PageView)n.forwardScreenViews=="True"&&(u=b(r));else return"Can't send event type to forwarder "+t+", event type is not supported";u===!0&&o&&o(h,r)}function d(n){if(n in e)return c(n,null);var t=u(n);appboy.getUser().setCustomUserAttribute(t,null)}function g(n,t){if(n in e)return c(n,t);var r=u(n),i=u(t);if(t!=null&&i==null)return"Value did not pass validation for "+n;appboy.getUser().setCustomUserAttribute(r,i)}function nt(n,i){if(window.mParticle.getVersion().split(".")[0]==="1")if(i==window.mParticle.IdentityType.CustomerId)appboy.changeUser(n);else if(i==window.mParticle.IdentityType.Email)appboy.getUser().setEmail(n);else return"Can't call setUserIdentity on forwarder "+t+", identity type not supported."}function tt(t){var r,i=t.getUserIdentities().userIdentities;r=n.userIdentificationType==="MPID"?t.getMPID():i[n.userIdentificationType.toLowerCase()];appboy.changeUser(r);i.email&&appboy.getUser().setEmail(i.email)}function a(){appboy.subscribeToNewInAppMessages(function(t){var i=t[0],r=!1,u,f;return i!=null&&(u=!0,i instanceof appboy.ab.InAppMessage&&(f=i.extras["msg-id"],f=="push-primer"&&(r=!0,(!appboy.isPushSupported()||appboy.isPushPermissionGranted()||appboy.isPushBlocked())&&(u=!1),i.buttons[0]!=null&&i.buttons[0].subscribeToClickedEvent(function(){appboy.registerAppboyPushMessages()}))),(r&&u||!r&&n.register_inapp==="True")&&appboy.display.showInAppMessage(i)),t.slice(1)})}function v(n){appboy.openSession(function(){n.softPushCustomEventName&&appboy.logCustomEvent(n.softPushCustomEventName)})}function it(i,u,e){var s,h;try{if(n=i,o=u,r.sessionTimeoutInSeconds=n.ABKSessionTimeoutKey||1800,r.sdkFlavor="mparticle",r.enableHtmlInAppMessages=n.enableHtmlInAppMessages=="True",r.doNotLoadFontAwesome=n.doNotLoadFontAwesome=="True",n.safariWebsitePushId&&(r.safariWebsitePushId=n.safariWebsitePushId),n.serviceWorkerLocation&&(r.serviceWorkerLocation=n.serviceWorkerLocation),s=n.cluster||n.dataCenterLocation,f.hasOwnProperty(s)?r.baseUrl=f[s]:(h=y(s),h&&(r.baseUrl=h)),e!==!0)appboy.initialize(n.apiKey,r),a(),v(n);else{if(!appboy.initialize(n.apiKey,r))return"Failed to initialize: "+t;a();v(n)}return"Successfully initialized: "+t}catch(c){return"Failed to initialize: "+t+" with error: "+c.message}}function y(n){var i,t;if(n){i=n.replace(/&amp;/g,"&");i=n.replace(/&quot;/g,'"');try{if(t=JSON.parse(i),t&&t.JS)return"https://"+t.JS+"/api/v3"}catch(r){console.log("Unable to configure custom Appboy cluster: "+r.toString())}}}function p(n){return typeof n=="string"?n.substr(0,1)==="$"?n.replace(/^\$+/g,""):n:null}function u(n){var t,r,u,i;if(typeof n=="string")return p(n);if(Array.isArray(n)){t=[];for(r in n){if(u=n[r],i=p(u),i==null)return null;t.push(i)}return t}return n}function s(n){var r={},t,f,e,i;if(n==null&&(n={}),typeof n!="object")return null;for(i in n)t=n[i],f=u(i),e=typeof t=="string"?u(t):t,r[f]=e;return r}var h=this,n,r={},o,e;h.name=t;e={$LastName:"setLastName",$FirstName:"setFirstName",Email:"setEmail",$Gender:"setGender",$Country:"setCountry",$City:"setHomeCity",$Mobile:"setPhoneNumber",$Age:"setDateOfBirth",last_name:"setLastName",first_name:"setFirstName",email:"setEmail",gender:"setGender",country:"setCountry",home_city:"setHomeCity",email_subscribe:"setEmailNotificationSubscriptionType",push_subscribe:"setPushNotificationSubscriptionType",phone:"setPhoneNumber",image_url:"setAvatarImageUrl",dob:"setDateOfBirth"};this.init=it;this.process=k;this.setUserIdentity=nt;this.setUserAttribute=g;this.onUserIdentified=tt;this.removeUserAttribute=d;this.decodeClusterSetting=y};window&&window.mParticle&&window.mParticle.addForwarder&&window.mParticle.addForwarder({name:t,constructor:r,getId:a});var u={register:v,getVersion:function(){return l}},y=u.register,p=u.getVersion;return n.default=u,n.getVersion=p,n.register=y,n}({}) ;;

; var mpDoubleClickKit=function(n){"use strict";function i(){}function ut(n,t){if(t){var i=t.filter(function(t){return t.jsmap&&t.maptype&&t.value?t.jsmap===n.toString():{result:!1}});if(i&&i.length>0)return{result:!0,match:i[0]}}return null}function ft(n,t,i){var r=""+n+(""+t)+""+(i||"");return mParticle.generateHash(r)}function v(n){this.common=n||{}}function e(n){this.common=n||{}}function r(n){this.common=n||{}}function d(n,t){n.eventMapping=JSON.parse(t.eventMapping.replace(/&quot;/g,'"'));n.customVariablesMappings=JSON.parse(t.customVariables.replace(/&quot;/g,'"')).reduce(function(n,t){return n[t.map]=t.value,n},{});n.sendGtag("js",new Date,!0);n.sendGtag("allow_custom_scripts",!0,!0);n.sendGtag("config",t.advertiserId,!0)}function o(n){this.common=n={}}function tt(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1}function it(){return ot}function st(n){if(!n){window.console.log("You must pass a config object to register the kit "+t);return}if(!tt(n)){window.console.log("'config' must be an object. You passed in a "+typeof n);return}tt(n.kits)?n.kits[t]={constructor:s}:(n.kits={},n.kits[t]={constructor:s});window.console.log("Successfully registered "+t+" to your mParticle configuration")}var c,l,a,y,p,w,b,k,nt,h,rt;i.prototype.eventMapping={};i.prototype.customVariablesMappings={};i.prototype.settings={};i.prototype.setCustomVariables=function(n,t){for(var i in n.EventAttributes)this.customVariablesMappings[i]&&(t[this.customVariablesMappings[i]]=n.EventAttributes[i])};i.prototype.setSendTo=function(n,t,i){var r=n.value.split(";"),u=r[0],f=r[1];i.send_to="DC-"+this.settings.advertiserId+"/"+u+"/"+f};i.prototype.getEventMapping=function(n){var t=ft(n.EventDataType,n.EventCategory,n.EventName);return ut(t,this.eventMapping)};i.prototype.sendGtag=function(n,t,i){function r(){window.dataLayer.push(arguments)}Array.isArray(window.dataLayer)&&(i?r(n,t):r("event",n,t))};c=i;l={transactions:1,items_sold:1};a="items_sold";v.prototype.logCommerceEvent=function(n){var i,r,t;if(n.EventDataType===mParticle.CommerceEventType.ProductPurchase){if(i=n.CustomFlags&&n.CustomFlags["DoubleClick.Counter"]?n.CustomFlags["DoubleClick.Counter"]:null,i){if(!l[i])return console.log("Counter type not valid. For sales conversions, use a custom flag of DoubleClick.Counter equal to 'transactions', or 'items_sold'. See https://support.google.com/dcm/partner/answer/2823400?hl=en for more info"),!1}else return console.log("Event not sent. Sales conversions requires a custom flag of DoubleClick.Counter equal to 'transactions', or 'items_sold'. See https://support.google.com/dcm/partner/answer/2823400?hl=en for more info"),!1;if(r=this.common.getEventMapping(n),!r)return console.log("Event not mapped. Event not sent."),!1;if(r.result&&r.match)return t={},this.common.setCustomVariables(n,t),this.common.setSendTo(r.match,n.CustomFlags,t),t.send_to+="+"+i,t.value=""+n.ProductAction.TotalAmount,t.transaction_id=n.ProductAction.TransactionId,i===a&&(t.quantity=""+n.ProductAction.ProductList.length),this.common.sendGtag("purchase",t),!0}};y=v;p={standard:1,unique:1,per_session:1};e.prototype.logEvent=function(n){var i={},t,r;if(this.common.setCustomVariables(n,i),t=this.common.getEventMapping(n),!t)return console.log("Event not mapped. Event not sent."),!1;if(t.result&&t.match){if(r=n.CustomFlags&&n.CustomFlags["DoubleClick.Counter"]?n.CustomFlags["DoubleClick.Counter"]:null,!r)return console.log("Event not sent. Event conversions requires a custom flag of DoubleClick.Counter equal to 'standard', 'unique, or 'per_session'. See https://support.google.com/dcm/partner/answer/2823400?hl=en for more info"),!1;if(p[r])this.common.setSendTo(t.match,n.CustomFlags,i),i.send_to+="+"+r,this.common.sendGtag("conversion",i);else return console.log("Counter type not valid. For event conversions, use 'standard', 'unique, or 'per_session'. See https://support.google.com/dcm/partner/answer/2823400?hl=en for more info"),!1}return!0};e.prototype.logError=function(){};e.prototype.logPageView=function(){};w=e;r.prototype.onUserIdentified=function(){};r.prototype.onIdentifyComplete=function(){};r.prototype.onLoginComplete=function(){};r.prototype.onLogoutComplete=function(){};r.prototype.onModifyComplete=function(){};r.prototype.onSetUserIdentity=function(){};b=r;k={name:"DoubleclickDFP",moduleId:41,initForwarder:function(n,t,i,r,u,f,e,o){if(o.settings=n,window.dataLayer=window.dataLayer||[],t)d(o,n);else{var h="https://www.googletagmanager.com/gtag/js?id="+n.advertiserId,s=document.createElement("script");s.type="text/javascript";s.async=!0;s.src=h;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(s);s.onload=function(){if(d(o,n),f.length>0){for(var t=0;t<f.length;t++)u(f[t]);f=[]}}}}};var f=k,et={onSessionStart:function(){},onSessionEnd:function(){}},g=et;o.prototype.onRemoveUserAttribute=function(){};o.prototype.onSetUserAttribute=function(){};o.prototype.onConsentStateUpdated=function(){};nt=o;
/*!
     * isobject <https://github.com/jonschlinkert/isobject>
     *
     * Copyright (c) 2014-2017, Jon Schlinkert.
     * Released under the MIT License.
     */
var t=f.name,ot=f.moduleId,u={SessionStart:1,SessionEnd:2,PageView:3,PageEvent:4,CrashReport:5,OptOut:6,Commerce:16},s=function(){function h(u,h,c,l,a,v){r=u;e=window.mParticle.isTestEnvironment?function(){}:h;try{f.initForwarder(u,c,a,v,s,o,i,n.common);n.eventHandler=new w(n.common);n.identityHandler=new b(n.common);n.userAttributeHandler=new nt(n.common);n.commerceHandler=new y(n.common);i=!0}catch(p){console.log("Failed to initialize "+t+" - "+p)}}function s(r){var f=!1;if(i)try{return r.EventDataType===u.SessionStart?f=l(r):r.EventDataType===u.SessionEnd?f=a(r):r.EventDataType===u.CrashReport?f=v(r):r.EventDataType===u.PageView?f=p(r):r.EventDataType===u.Commerce?f=d(r):r.EventDataType===u.PageEvent&&(f=k(r)),f===!0&&e?(e(n,r),"Successfully sent to "+t):"Error logging event or event type not supported on forwarder "+t}catch(s){return"Failed to send to "+t+" "+s}else return o.push(r),"Can't send to forwarder "+t+", not initialized. Event added to queue."}function l(n){try{g.onSessionStart(n);return!0}catch(i){return{error:"Error starting session on forwarder "+t+"; "+i}}}function a(n){try{g.onSessionEnd(n);return!0}catch(i){return{error:"Error ending session on forwarder "+t+"; "+i}}}function v(i){try{return n.eventHandler.logError(i),!0}catch(r){return{error:"Error logging error on forwarder "+t+"; "+r}}}function p(i){try{return n.eventHandler.logPageView(i),!0}catch(r){return{error:"Error logging page view on forwarder "+t+"; "+r}}}function k(i){try{return n.eventHandler.logEvent(i),!0}catch(r){return{error:"Error logging event on forwarder "+t+"; "+r}}}function d(i){try{return n.commerceHandler.logCommerceEvent(i),!0}catch(r){return{error:"Error logging purchase event on forwarder "+t+"; "+r}}}function tt(u,f){if(i)try{n.userAttributeHandler.onSetUserAttribute(u,f,r);return"Successfully set user attribute on forwarder "+t}catch(e){return"Error setting user attribute on forwarder "+t+"; "+e}else return"Can't set user attribute on forwarder "+t+", not initialized"}function it(u){if(i)try{n.userAttributeHandler.onRemoveUserAttribute(u,r);return"Successfully removed user attribute on forwarder "+t}catch(f){return"Error removing user attribute on forwarder "+t+"; "+f}else return"Can't remove user attribute on forwarder "+t+", not initialized"}function rt(u,f){if(i)try{n.identityHandler.onSetUserIdentity(r,u,f);return"Successfully set user Identity on forwarder "+t}catch(e){return"Error removing user attribute on forwarder "+t+"; "+e}else return"Can't call setUserIdentity on forwarder "+t+", not initialized"}function ut(r){if(i)try{n.identityHandler.onUserIdentified(r);return"Successfully called onUserIdentified on forwarder "+t}catch(u){return{error:"Error calling onUserIdentified on forwarder "+t+"; "+u}}else return"Can't set new user identities on forwader  "+t+", not initialized"}function ft(r,u){if(i)try{n.identityHandler.onIdentifyComplete(r,u);return"Successfully called onIdentifyComplete on forwarder "+t}catch(f){return{error:"Error calling onIdentifyComplete on forwarder "+t+"; "+f}}else return"Can't call onIdentifyCompleted on forwader  "+t+", not initialized"}function et(r,u){if(i)try{n.identityHandler.onLoginComplete(r,u);return"Successfully called onLoginComplete on forwarder "+t}catch(f){return{error:"Error calling onLoginComplete on forwarder "+t+"; "+f}}else return"Can't call onLoginComplete on forwader  "+t+", not initialized"}function ot(r,u){if(i)try{n.identityHandler.onLogoutComplete(r,u);return"Successfully called onLogoutComplete on forwarder "+t}catch(f){return{error:"Error calling onLogoutComplete on forwarder "+t+"; "+f}}else return"Can't call onLogoutComplete on forwader  "+t+", not initialized"}function st(r,u){if(i)try{n.identityHandler.onModifyComplete(r,u);return"Successfully called onModifyComplete on forwarder "+t}catch(f){return{error:"Error calling onModifyComplete on forwarder "+t+"; "+f}}else return"Can't call onModifyComplete on forwader  "+t+", not initialized"}function ht(r){if(i)try{return n.initialization.setOptOut(r),"Successfully called setOptOut on forwarder "+t}catch(u){return{error:"Error calling setOptOut on forwarder "+t+"; "+u}}else return"Can't call setOptOut on forwader  "+t+", not initialized"}var n=this,i=!1,r,e,o=[];n.name=f.name;n.moduleId=f.moduleId;n.common=new c;this.init=h;this.process=s;this.setUserAttribute=tt;this.removeUserAttribute=it;this.onUserIdentified=ut;this.setUserIdentity=rt;this.onIdentifyComplete=ft;this.onLoginComplete=et;this.onLogoutComplete=ot;this.onModifyComplete=st;this.setOptOut=ht};return window&&window.mParticle&&window.mParticle.addForwarder&&window.mParticle.addForwarder({name:t,constructor:s,getId:it}),window.mParticle.addForwarder({name:t,constructor:s,getId:it}),h={register:st},rt=h.register,n.default=h,n.register=rt,n}({}) ;;


; window.mParticle.config.kitConfigs.push({"name":"Appboy","moduleId":28,"isDebug":false,"isVisible":true,"isDebugString":"false","hasDebugString":"true","settings":{"includeEnrichedUserAttributes":"True","abkDisableAutomaticLocationCollectionKey":"False","serviceWorkerLocation":null,"safariWebsitePushId":"web.com.overstock.app","register_inapp":"True","softPushCustomEventName":null,"push_enabled":"True","removeEventAttributeList":"","addEventAttributeList":"","singleItemEventAttributeList":"","apiKey":"5c2ca4f1-0219-4717-859b-ca7dceb0be43","doNotLoadFontAwesome":"True","forwardSkuAsProductName":"False","setEventNameForPageView":"False","abkMinimumTriggerTimeIntervalKey":null,"abkCollectIDFA":"False","abkSessionTimeoutKey":"2","abkRequestProcessingPolicyOptionKey":null,"abkFlushIntervalOptionKey":null,"forwardScreenViews":"False","enableHtmlInAppMessages":"True","userIdentificationType":"CustomerId","cluster":"03"},"screenNameFilters":[],"screenAttributeFilters":[],"userIdentityFilters":[],"userAttributeFilters":[1602623989,-244347312,99639,-95083654,1174755927,-2020273194,1922172824,2993026,1680596366,3227414,-46893570,-1012755440,278441882,-670818575,-788772684,-1125232537,816548556,795385615,2021407891,-812067613,1764879629,922522236,1720559315,-108750126,1619439862,1324770901,-1537364130,-1070875658,1371377311,7583531,293429210,105977123,-1012497145,294243341],"eventNameFilters":[839197918,-196537483,-1886654882,-1622590328,-2133622334],"eventTypeFilters":[1571,1574,1598,1576,1599,1570,57,1575],"attributeFilters":[-1717480801,1225113625,-665271543,387568199,-1702182106,1527996960,-435656451,-423279939,-386418352,119041079,1921103989,-762773739,788012253,-1209443698,1473649263,-1815439185,-1139041544,1278989191,46040325,482687632,-298420900,-1284001880,1973637839,-1567528978,1883555653,-1511176991,1968366480,2054621442,-456256840,-1723707049,1901252165,717973035,-1236709919,-1700428995,1229181040,1467225691,452684522,381261059,-765664560,-1835164908,-442912447,-1851956031,-1400554343,758738252,371866406,-1117571308,-1483409553,-423613727,524093585,-1656912434,-1436867598,602560898,-136772869,463754608,638750446,386001554,-1800379766,-1746764504,717431066,1324707610,1280341594,-471785785,-1369979648,-782965670,-1376693429,-1905065457,1875266314,-1052316103,-1591979602,659390346,-445482923,-1843903691,-1837981451,1453042111,-2024603303,1447424936,-548716272,214402176,1357224409,-347846066,1290875952,1347787728,-606897042,2069386339,-2114366586,114458617,917517038,-95263023,834996038,1335860769,-536860114,388784186,1423663661,-2108388883,956301276,1620749681,-1456660729,1251438275,-689009023,-1754487340,-762047249,-1215910893,524299634,-1957039382,-1959619980,-1315756398,1824113652,1602470561,-237000966,-320343691,1548336412,2138497835,1327560673,2099052576,-2138075523,1222670306,147767233,158550921,158550799,158550764,158550734,158550958,-976695872,845619604,1263163772,-1233133626,-1714656896,-1246408456,-650627145,127398756,1129355983,1009154323,-975520809,189220667,1861772122,56727545,1771657769,385416105,1154704344,1860930738,2110009239,-203770648,-1625929372,1351626514,2023996788,1346725040,-295558881,-1054515911,582525808,1032699819,795769638,399693348,1407945929,616843732,-2060640990,87221562,-146727272,-2104494961,584985979,25726283,-597462490,342862996,284988421,-465420398,-557503874,-557503901,-164077058,401342697,137504588,-130590182,1645855287,314422431,2037501640,953671196,-2053824335,2081014612,201536302,510710128,-1872021989,710151521,-1135104748,1808773724,444016513,-508946088,-270213623,-557505549,-1817678039,494431134,2060545610,1633719429,1543210781,1419987894,1901628292,-1015272372,-1490780535,1093887580,1171403575,-1813919028,1578193902,1751190050,-1957817571,-1042320411,-835310435,882363827,-328175446,2045555760,-1037776046,156982314,-1822873176,-1884965480,-159993974,-1000433048,-959418229,-582404695,-154008735,880537246,-146055787,-1230188509,-840862950,-1946955925,1394245440,1059120192,201846633,389794816,-1993071766,-780243476,-473892998,-101291381,2119994387,255349310,457878429,816121735,-1113120186,1765195143,-1478451541,2005115002,671477341,-1066913177,-1943192075,-635637267,-215447381,1323190140,-1197590856,1300036472,-516927012,-1527560027,382734720,2101934301,676627645,972128020,1943014694,-2055693803,-1547562470,1815667006,-88567456,-446573953,-885951937,-796555340,-755642152,-672836509,-826088053,855663993,-1888921177,-1026173828,331623576,918181745,655415368,-1341192046,-2080172684,443716267,-837798919,-181384687,667479708,733738457,-691721432,2083405669,1075717142,-488397053,1806005011,196541624,-448374093,658477940,436893126,-1543304271,-1543304268,-1543304267,-596203804,-1543304298,-851627211,453799820,874847605,53026212,-1597079407,880921350,1102292501,-1962069985,-1003788706,-585207691,-1783650230,-1571830428,-155972374,-1821348374,-404682874,1829100723,-1059509910,2125181431,279781799,937589358,-483809482,-659859460,1079465251,1958318481,-738753174,-1747851934,-954923269,-898321695,1073049504,-235185209,-1683705030,505187465,759843717,2042341785,263293088,-199935152,670722342,-477050837,670774035,1041068087,1268568981,-1064564739,-970084053,-1372006419,-222995699,-609497461,-684672068,239307180,1146629455],"githubPath":null,"filteringEventAttributeValue":null,"filteringUserAttributeValue":null,"filteringConsentRuleValues":null,"consentRegulationFilters":[50,49],"consentRegulationPurposeFilters":[],"messageTypeFilters":[1576],"messageTypeStateFilters":[49,50,51,52,53,54],"eventSubscriptionId":27517,"excludeAnonymousUser":false});;

; window.mParticle.config.kitConfigs.push({"name":"DoubleclickDFP","moduleId":41,"isDebug":true,"isVisible":true,"isDebugString":"true","hasDebugString":"false","settings":{"advertiserId":"1787227","token":"87d63ec8de2b4c97bbb0e40bd945a937","installEventMapping":"","customVariables":"[{&quot;jsmap&quot;:null,&quot;map&quot;:&quot;SKU&quot;,&quot;maptype&quot;:&quot;ProductAttributeSelector.Name&quot;,&quot;value&quot;:&quot;u1&quot;},{&quot;jsmap&quot;:null,&quot;map&quot;:&quot;Order Number&quot;,&quot;maptype&quot;:&quot;ProductAttributeSelector.Name&quot;,&quot;value&quot;:&quot;u2&quot;},{&quot;jsmap&quot;:null,&quot;map&quot;:&quot;Club O Member Type&quot;,&quot;maptype&quot;:&quot;UserAttributeClass.Name&quot;,&quot;value&quot;:&quot;u3&quot;}]","eventMapping":"[{&quot;jsmap&quot;:&quot;-1592184962&quot;,&quot;map&quot;:&quot;7635345240889844508&quot;,&quot;maptype&quot;:&quot;EventClassDetails.Id&quot;,&quot;value&quot;:&quot;sales311;order199&quot;}]"},"screenNameFilters":[],"screenAttributeFilters":[],"userIdentityFilters":[],"userAttributeFilters":[],"eventNameFilters":[],"eventTypeFilters":[],"attributeFilters":[],"githubPath":null,"filteringEventAttributeValue":null,"filteringUserAttributeValue":null,"filteringConsentRuleValues":null,"consentRegulationFilters":[],"consentRegulationPurposeFilters":[],"messageTypeFilters":[],"messageTypeStateFilters":[],"eventSubscriptionId":31967,"excludeAnonymousUser":false});;

; window.mParticle.config.kitConfigs.push({"name":"DoubleclickDFP","moduleId":41,"isDebug":false,"isVisible":true,"isDebugString":"false","hasDebugString":"true","settings":{"advertiserId":"1787227","token":"87d63ec8de2b4c97bbb0e40bd945a937","installEventMapping":"","customVariables":"[{&quot;jsmap&quot;:null,&quot;map&quot;:&quot;SKU&quot;,&quot;maptype&quot;:&quot;ProductAttributeSelector.Name&quot;,&quot;value&quot;:&quot;u1&quot;},{&quot;jsmap&quot;:null,&quot;map&quot;:&quot;Order Number&quot;,&quot;maptype&quot;:&quot;ProductAttributeSelector.Name&quot;,&quot;value&quot;:&quot;u2&quot;},{&quot;jsmap&quot;:null,&quot;map&quot;:&quot;Club O Member Type&quot;,&quot;maptype&quot;:&quot;UserAttributeClass.Name&quot;,&quot;value&quot;:&quot;u3&quot;}]","eventMapping":"[{&quot;jsmap&quot;:&quot;-1592184962&quot;,&quot;map&quot;:&quot;7635345240889844508&quot;,&quot;maptype&quot;:&quot;EventClassDetails.Id&quot;,&quot;value&quot;:&quot;sales311;order199&quot;}]"},"screenNameFilters":[],"screenAttributeFilters":[],"userIdentityFilters":[],"userAttributeFilters":[],"eventNameFilters":[],"eventTypeFilters":[],"attributeFilters":[],"githubPath":null,"filteringEventAttributeValue":null,"filteringUserAttributeValue":null,"filteringConsentRuleValues":null,"consentRegulationFilters":[],"consentRegulationPurposeFilters":[],"messageTypeFilters":[],"messageTypeStateFilters":[],"eventSubscriptionId":31967,"excludeAnonymousUser":false});;


; window.mParticle.config.pixelConfigs.push({"name":"AppNexus","moduleId":50,"esId":34513,"isDebug":false,"isProduction":true,"settings":{},"frequencyCap":14,"pixelUrl":"https://ib.adnxs.com/getuid?","redirectUrl":"https://cookiesync.mparticle.com/v1/sync?esid=34513&amp;MPID=%%mpid%%&amp;ID=$UID&amp;Key=b8c3dde1c7f21948b890b2606a18c623&amp;env=2"});;

window.mParticle.config.requestConfig = false;;
mParticle.init('b8c3dde1c7f21948b890b2606a18c623', window.mParticle.config);;